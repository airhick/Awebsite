import{c as k,r as l,a as I,j as e,B as F,s as L,t as m,h as P,i as T}from"./index-BvjaW1Z3.js";import{C as B,b as D,c as U,d as M,a as W}from"./card-DR3TeT3d.js";import{I as w}from"./index-BMEVF4ZA.js";import{L as y}from"./label-DvoeEu-I.js";import{A as b,a as v,b as N}from"./alert-sa7ei1Oh.js";import{M as q}from"./mail-CU4euSAr.js";const z=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],R=k("lock",z);function J({onComplete:h}){const[r,S]=l.useState(""),[t,A]=l.useState(""),[o,u]=l.useState(!1),[p,i]=l.useState(""),[n,E]=l.useState(!1),{setSession:x}=I(s=>s.auth),C=async s=>{s.preventDefault(),i(""),u(!0);try{if(!r||!t){i("Please enter both email and password"),u(!1);return}let a,d;if(n){const c=await L.auth.signUp({email:r.trim(),password:t,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(a=c.data,d=c.error,d)throw d.message.includes("already registered")?new Error("This email is already registered. Please sign in instead."):new Error(d.message||"Failed to create account");a.session?(x(a.session),m.success("Account created successfully!"),h()):(m.success("Please check your email to confirm your account"),i("Please check your email to confirm your account before signing in."))}else{const{customer:c,error:g}=await P(r.trim(),t);if(g||!c)throw new Error(g||"Invalid email or password");const{session:f,error:j}=await T(c);if(j||!f)throw new Error(j||"Failed to create session");x(f),m.success("Welcome back!"),h()}}catch(a){console.error("Auth error:",a),i(a.message||"Failed to authenticate. Please check your credentials and try again.")}finally{u(!1)}};return e.jsx("div",{className:"mx-auto max-w-2xl",children:e.jsxs(B,{children:[e.jsxs(D,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/Awebsite/logos/aurora-logo.png",alt:"Aurora Logo",className:"h-16 w-16 object-contain"})}),e.jsx(U,{className:"text-center",children:"Welcome to Aurora! ðŸŽ‰"}),e.jsx(M,{className:"text-center",children:"Sign in to access your AI receptionist dashboard"})]}),e.jsx(W,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),e.jsx(w,{id:"email",type:"email",value:r,onChange:s=>S(s.target.value),placeholder:"your@email.com",required:!0,disabled:o,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),e.jsx(w,{id:"password",type:"password",value:t,onChange:s=>A(s.target.value),placeholder:"Enter your password",required:!0,disabled:o,className:"pl-10"})]})]}),p&&e.jsxs(b,{variant:"destructive",children:[e.jsx(v,{children:"Error"}),e.jsx(N,{children:p})]}),e.jsx(F,{type:"submit",disabled:o||!r.trim()||!t,className:"w-full",size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),n?"Creating account...":"Signing in..."]}):n?"ðŸ” Create Account":"ðŸ” Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{E(!n),i("")},className:"text-sm text-muted-foreground hover:text-foreground underline",disabled:o,children:n?"Already have an account? Sign in instead":"Don't have an account? Sign up"})}),e.jsxs(b,{children:[e.jsx(v,{children:"Secure Access"}),e.jsx(N,{children:"Your credentials are securely verified against our database. All data is encrypted and protected."})]})]})})]})})}export{J as B};
