import{r as d,j as e,B as g,t as r}from"./index-AZRKLprC.js";import{T as f}from"./textarea-DL-q9Opr.js";import{L as C}from"./label-D12cn_zP.js";import{C as j,b as y,c as N,d as b,a as S}from"./card-D-HpVhxM.js";import{u as h,c as p}from"./translations-wzrxUbv4.js";import{M as w}from"./message-square-CRwJ4aSr.js";import{L as v}from"./loader-circle-BluJhsme.js";import{S as T}from"./send-DVwtwRGE.js";const A="https://n8n.goreview.fr/webhook/dbcontact";function D(){const[a,c]=d.useState(""),[n,o]=d.useState(!1),s=h(),u=async i=>{if(i.preventDefault(),!a.trim()){r.error(s.helpCenter?.messageRequired||"Please enter a message");return}o(!0);try{const t=p();if(!t.id){r.error(s.helpCenter?.customerNotFound||"Customer information not found. Please log in again."),o(!1);return}const x={customer_id:t.id,email:t.email||"",company:t.company||"",message:a.trim(),timestamp:new Date().toISOString()},m=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!m.ok)throw new Error(`Webhook request failed: ${m.status} ${m.statusText}`);r.success(s.helpCenter?.messageSent||"Your message has been sent successfully!"),c("")}catch(t){console.error("[ContactForm] Error sending message:",t),r.error(t.message||s.helpCenter?.sendError||"Failed to send message. Please try again.")}finally{o(!1)}},l=p();return e.jsxs(j,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsx(N,{children:s.helpCenter?.title||"Contact Aurora Team"})]}),e.jsx(b,{children:s.helpCenter?.description||"Send us a message and we'll get back to you as soon as possible."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:s.helpCenter?.yourInfo||"Your Information"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-medium",children:[s.helpCenter?.customerId||"Customer ID",":"]})," ",l.id||s.helpCenter?.notAvailable||"N/A"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-medium",children:[s.helpCenter?.email||"Email",":"]})," ",l.email||s.helpCenter?.notAvailable||"N/A"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-medium",children:[s.helpCenter?.company||"Company",":"]})," ",l.company||s.helpCenter?.notAvailable||"N/A"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"message",children:s.helpCenter?.messageLabel||"Your Message"}),e.jsx(f,{id:"message",placeholder:s.helpCenter?.messagePlaceholder||"Type your message here...",value:a,onChange:i=>c(i.target.value),disabled:n,rows:8,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.helpCenter?.messageHint||"Please provide as much detail as possible to help us assist you better."})]}),e.jsx(g,{type:"submit",disabled:n||!a.trim(),className:"w-full",children:n?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),s.helpCenter?.sending||"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),s.helpCenter?.sendButton||"Send Message"]})})]})})]})}function k(){const a=h();return e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a.helpCenter?.pageTitle||"Help Center"}),e.jsx("p",{className:"text-muted-foreground",children:a.helpCenter?.pageDescription||"Get in touch with the Aurora team for support and assistance."})]}),e.jsx(D,{})]})})}export{k as component};
