import{ai as ya,af as ba}from"./index-BaJPAlfg.js";function _a(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var st={};function Ln(t,e){if(t==null)return{};var r,s,n=(function(a,l){if(a==null)return{};var d={};for(var h in a)if({}.hasOwnProperty.call(a,h)){if(l.indexOf(h)!==-1)continue;d[h]=a[h]}return d})(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t){return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function Cs(t){var e=(function(r,s){if(G(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,s);if(G(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)})(t,"string");return G(e)=="symbol"?e:e+""}function Nn(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Cs(s.key),s)}}function he(t,e,r){return e&&Nn(t.prototype,e),r&&Nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dr(t,e){if(e&&(G(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r})(t)}function Se(t){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(t)}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Pt(t,e)}function hr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}function Te(t,e,r){return(e=Cs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rn(t,e,r,s,n,i,a){try{var l=t[i](a),d=l.value}catch(h){return void r(h)}l.done?e(d):Promise.resolve(d).then(s,n)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(s,n){var i=t.apply(e,r);function a(d){Rn(i,s,n,a,l,"next",d)}function l(d){Rn(i,s,n,a,l,"throw",d)}a(void 0)}))}}function xn(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}function se(t,e){return(function(r){if(Array.isArray(r))return r})(t)||(function(r,s){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,a,l,d,h=[],g=!0,_=!1;try{if(l=(n=n.call(r)).next,s===0){if(Object(n)!==n)return;g=!1}else for(;!(g=(i=l.call(n)).done)&&(h.push(i.value),h.length!==s);g=!0);}catch(C){_=!0,a=C}finally{try{if(!g&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(_)throw a}}return h}})(t,e)||(function(r,s){if(r){if(typeof r=="string")return xn(r,s);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(r,s):void 0}})(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Sa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fn,Rt={exports:{}},Fr=(function(){if(Fn)return Rt.exports;Fn=1;var t,e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(f,b,E){return Function.prototype.apply.call(f,b,E)};t=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var s=Number.isNaN||function(f){return f!=f};function n(){n.init.call(this)}Rt.exports=n,Rt.exports.once=function(f,b){return new Promise((function(E,M){function I(S){f.removeListener(b,w),M(S)}function w(){typeof f.removeListener=="function"&&f.removeListener("error",I),E([].slice.call(arguments))}y(f,b,w,{once:!0}),b!=="error"&&(function(S,T,D){typeof S.on=="function"&&y(S,"error",T,D)})(f,I,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var i=10;function a(f){if(typeof f!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function l(f){return f._maxListeners===void 0?n.defaultMaxListeners:f._maxListeners}function d(f,b,E,M){var I,w,S,T;if(a(E),(w=f._events)===void 0?(w=f._events=Object.create(null),f._eventsCount=0):(w.newListener!==void 0&&(f.emit("newListener",b,E.listener?E.listener:E),w=f._events),S=w[b]),S===void 0)S=w[b]=E,++f._eventsCount;else if(typeof S=="function"?S=w[b]=M?[E,S]:[S,E]:M?S.unshift(E):S.push(E),(I=l(f))>0&&S.length>I&&!S.warned){S.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=f,D.type=b,D.count=S.length,T=D,console&&console.warn&&console.warn(T)}return f}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(f,b,E){var M={fired:!1,wrapFn:void 0,target:f,type:b,listener:E},I=h.bind(M);return I.listener=E,M.wrapFn=I,I}function _(f,b,E){var M=f._events;if(M===void 0)return[];var I=M[b];return I===void 0?[]:typeof I=="function"?E?[I.listener||I]:[I]:E?(function(w){for(var S=new Array(w.length),T=0;T<S.length;++T)S[T]=w[T].listener||w[T];return S})(I):v(I,I.length)}function C(f){var b=this._events;if(b!==void 0){var E=b[f];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}function v(f,b){for(var E=new Array(b),M=0;M<b;++M)E[M]=f[M];return E}function y(f,b,E,M){if(typeof f.on=="function")M.once?f.once(b,E):f.on(b,E);else{if(typeof f.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f);f.addEventListener(b,(function I(w){M.once&&f.removeEventListener(b,I),E(w)}))}}return Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(f){if(typeof f!="number"||f<0||s(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");i=f}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(f){if(typeof f!="number"||f<0||s(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(f){for(var b=[],E=1;E<arguments.length;E++)b.push(arguments[E]);var M=f==="error",I=this._events;if(I!==void 0)M=M&&I.error===void 0;else if(!M)return!1;if(M){var w;if(b.length>0&&(w=b[0]),w instanceof Error)throw w;var S=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw S.context=w,S}var T=I[f];if(T===void 0)return!1;if(typeof T=="function")r(T,this,b);else{var D=T.length,N=v(T,D);for(E=0;E<D;++E)r(N[E],this,b)}return!0},n.prototype.addListener=function(f,b){return d(this,f,b,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(f,b){return d(this,f,b,!0)},n.prototype.once=function(f,b){return a(b),this.on(f,g(this,f,b)),this},n.prototype.prependOnceListener=function(f,b){return a(b),this.prependListener(f,g(this,f,b)),this},n.prototype.removeListener=function(f,b){var E,M,I,w,S;if(a(b),(M=this._events)===void 0)return this;if((E=M[f])===void 0)return this;if(E===b||E.listener===b)--this._eventsCount==0?this._events=Object.create(null):(delete M[f],M.removeListener&&this.emit("removeListener",f,E.listener||b));else if(typeof E!="function"){for(I=-1,w=E.length-1;w>=0;w--)if(E[w]===b||E[w].listener===b){S=E[w].listener,I=w;break}if(I<0)return this;I===0?E.shift():(function(T,D){for(;D+1<T.length;D++)T[D]=T[D+1];T.pop()})(E,I),E.length===1&&(M[f]=E[0]),M.removeListener!==void 0&&this.emit("removeListener",f,S||b)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(f){var b,E,M;if((E=this._events)===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[f]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete E[f]),this;if(arguments.length===0){var I,w=Object.keys(E);for(M=0;M<w.length;++M)(I=w[M])!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(b=E[f])=="function")this.removeListener(f,b);else if(b!==void 0)for(M=b.length-1;M>=0;M--)this.removeListener(f,b[M]);return this},n.prototype.listeners=function(f){return _(this,f,!0)},n.prototype.rawListeners=function(f){return _(this,f,!1)},n.listenerCount=function(f,b){return typeof f.listenerCount=="function"?f.listenerCount(b):C.call(f,b)},n.prototype.listenerCount=C,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},Rt.exports})(),xt=Sa(Fr),qn=Object.prototype.hasOwnProperty;function Vn(t,e,r){for(r of t.keys())if(ae(r,e))return r}function ae(t,e){var r,s,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((s=t.length)===e.length)for(;s--&&ae(t[s],e[s]););return s===-1}if(r===Set){if(t.size!==e.size)return!1;for(s of t)if((n=s)&&typeof n=="object"&&!(n=Vn(e,n))||!e.has(n))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(s of t)if((n=s[0])&&typeof n=="object"&&!(n=Vn(e,n))||!ae(s[1],e.get(n)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!r||typeof t=="object"){for(r in s=0,t)if(qn.call(t,r)&&++s&&!qn.call(e,r)||!(r in e)||!ae(t[r],e[r]))return!1;return Object.keys(e).length===s}}return t!=t&&e!=e}const wa={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ts={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},K={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},oe={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ne={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class O{static getFirstMatch(e,r){const s=r.match(e);return s&&s.length>0&&s[1]||""}static getSecondMatch(e,r){const s=r.match(e);return s&&s.length>1&&s[2]||""}static matchAndReturnConst(e,r,s){if(e.test(r))return s}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const r=e.split(".").splice(0,2).map((s=>parseInt(s,10)||0));if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const r=e.split(".").splice(0,2).map((s=>parseInt(s,10)||0));if(r.push(0),!(r[0]===1&&r[1]<5))return r[0]===1&&r[1]<6?"Cupcake":r[0]===1&&r[1]>=6?"Donut":r[0]===2&&r[1]<2?"Eclair":r[0]===2&&r[1]===2?"Froyo":r[0]===2&&r[1]>2?"Gingerbread":r[0]===3?"Honeycomb":r[0]===4&&r[1]<1?"Ice Cream Sandwich":r[0]===4&&r[1]<4?"Jelly Bean":r[0]===4&&r[1]>=4?"KitKat":r[0]===5?"Lollipop":r[0]===6?"Marshmallow":r[0]===7?"Nougat":r[0]===8?"Oreo":r[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,r,s=!1){const n=O.getVersionPrecision(e),i=O.getVersionPrecision(r);let a=Math.max(n,i),l=0;const d=O.map([e,r],(h=>{const g=a-O.getVersionPrecision(h),_=h+new Array(g+1).join(".0");return O.map(_.split("."),(C=>new Array(20-C.length).join("0")+C)).reverse()}));for(s&&(l=a-Math.min(n,i)),a-=1;a>=l;){if(d[0][a]>d[1][a])return 1;if(d[0][a]===d[1][a]){if(a===l)return 0;a-=1}else if(d[0][a]<d[1][a])return-1}}static map(e,r){const s=[];let n;if(Array.prototype.map)return Array.prototype.map.call(e,r);for(n=0;n<e.length;n+=1)s.push(r(e[n]));return s}static find(e,r){let s,n;if(Array.prototype.find)return Array.prototype.find.call(e,r);for(s=0,n=e.length;s<n;s+=1){const i=e[s];if(r(i,s))return i}}static assign(e,...r){const s=e;let n,i;if(Object.assign)return Object.assign(e,...r);for(n=0,i=r.length;n<i;n+=1){const a=r[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach((l=>{s[l]=a[l]}))}return e}static getBrowserAlias(e){return wa[e]}static getBrowserTypeByAlias(e){return Ts[e]||""}}const z=/version\/(\d+(\.?_?\d+)+)/i,Ea=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},r=O.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},r=O.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},r=O.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},r=O.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},r=O.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},r=O.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},r=O.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},r=O.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},r=O.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},r=O.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},r=O.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},r=O.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},r=O.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},r=O.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},r=O.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return r&&(e.version=r),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},r=O.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},r=O.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},r=O.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},r=O.getFirstMatch(z,t)||O.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},r=O.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},r=O.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},r=O.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},r=O.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},r=O.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},r=O.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},r=O.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},r=O.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},r=O.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e={name:"Android Browser"},r=O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},r=O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},r=O.getFirstMatch(z,t);return r&&(e.version=r),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:O.getFirstMatch(e,t),version:O.getSecondMatch(e,t)}}}];var ka=[{test:[/Roku\/DVP/],describe(t){const e=O.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:oe.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=O.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:oe.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=O.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=O.getWindowsVersionName(e);return{name:oe.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:oe.iOS},r=O.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return r&&(e.version=r),e}},{test:[/macintosh/i],describe(t){const e=O.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=O.getMacOSVersionName(e),s={name:oe.MacOS,version:e};return r&&(s.versionName=r),s}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=O.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:oe.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e=O.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),r=O.getAndroidVersionName(e),s={name:oe.Android,version:e};return r&&(s.versionName=r),s}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=O.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:oe.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=O.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||O.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||O.getFirstMatch(/\bbb(\d+)/i,t);return{name:oe.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=O.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:oe.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=O.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:oe.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:oe.Linux})},{test:[/CrOS/],describe:()=>({name:oe.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=O.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:oe.PlayStation4,version:e}}}],Ca=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=O.getFirstMatch(/(can-l01)/i,t)&&"Nova",r={type:K.mobile,vendor:"Huawei"};return e&&(r.model=e),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:K.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:K.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:K.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:K.tablet})},{test(t){const e=t.test(/ipod|iphone/i),r=t.test(/like (ipod|iphone)/i);return e&&!r},describe(t){const e=O.getFirstMatch(/(ipod|iphone)/i,t);return{type:K.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:K.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:K.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:K.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:K.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:K.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:K.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:K.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:K.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:K.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:K.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:K.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:K.tv})}],Ta=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Ne.Blink};const e=O.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Ne.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Ne.Trident},r=O.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Ne.Presto},r=O.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=t.test(/gecko/i),r=t.test(/like gecko/i);return e&&!r},describe(t){const e={name:Ne.Gecko},r=O.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ne.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Ne.WebKit},r=O.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}}];class Un{constructor(e,r=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=O.find(Ea,(r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some((s=>this.test(s)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=O.find(ka,(r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some((s=>this.test(s)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:r}=this.getOS();return e?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:r}=this.getPlatform();return e?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const e=O.find(Ca,(r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some((s=>this.test(s)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=O.find(Ta,(r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some((s=>this.test(s)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return O.assign({},this.parsedResult)}satisfies(e){const r={};let s=0;const n={};let i=0;if(Object.keys(e).forEach((a=>{const l=e[a];typeof l=="string"?(n[a]=l,i+=1):typeof l=="object"&&(r[a]=l,s+=1)})),s>0){const a=Object.keys(r),l=O.find(a,(h=>this.isOS(h)));if(l){const h=this.satisfies(r[l]);if(h!==void 0)return h}const d=O.find(a,(h=>this.isPlatform(h)));if(d){const h=this.satisfies(r[d]);if(h!==void 0)return h}}if(i>0){const a=Object.keys(n),l=O.find(a,(d=>this.isBrowser(d,!0)));if(l!==void 0)return this.compareVersion(n[l])}}isBrowser(e,r=!1){const s=this.getBrowserName().toLowerCase();let n=e.toLowerCase();const i=O.getBrowserTypeByAlias(n);return r&&i&&(n=i.toLowerCase()),n===s}compareVersion(e){let r=[0],s=e,n=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(s=e.substr(1),e[1]==="="?(n=!0,s=e.substr(2)):r=[],e[0]===">"?r.push(1):r.push(-1)):e[0]==="="?s=e.substr(1):e[0]==="~"&&(n=!0,s=e.substr(1)),r.indexOf(O.compareVersions(i,s,n))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,r=!1){return this.isBrowser(e,r)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((r=>this.is(r)))}}class Oa{static getParser(e,r=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Un(e,r)}static parse(e){return new Un(e).getResult()}static get BROWSER_MAP(){return Ts}static get ENGINE_MAP(){return Ne}static get OS_MAP(){return oe}static get PLATFORMS_MAP(){return K}}function pr(){return Date.now()+Math.random().toString()}function St(){throw new Error("Method must be implemented in subclass")}function Os(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function tr(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:Os("https://c.daily.co/call-machine/versioned/".concat("0.85.0","/static/call-machine-object-bundle.js"),t)}function rr(t){try{new URL(t)}catch{return!1}return!0}const Q=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,He="8.55.0",Y=globalThis;function nr(t,e,r){const s=Y,n=s.__SENTRY__=s.__SENTRY__||{},i=n[He]=n[He]||{};return i[t]||(i[t]=e())}const rt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,qr=["debug","info","warn","error","log","assert","trace"],ir={};function Dt(t){if(!("console"in Y))return t();const e=Y.console,r={},s=Object.keys(ir);s.forEach((n=>{const i=ir[n];r[n]=e[n],e[n]=i}));try{return t()}finally{s.forEach((n=>{e[n]=r[n]}))}}const V=nr("logger",(function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return rt?qr.forEach((r=>{e[r]=(...s)=>{t&&Dt((()=>{Y.console[r](`Sentry Logger [${r}]:`,...s)}))}})):qr.forEach((r=>{e[r]=()=>{}})),e})),ze="?",$n=/\(error: (.*)\)/,Jn=/captureMessage|captureException/;function Ft(t){return t[t.length-1]||{}}const Bn="<anonymous>";function qe(t){try{return t&&typeof t=="function"&&t.name||Bn}catch{return Bn}}function Gn(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach((s=>{s.stacktrace.frames&&r.push(...s.stacktrace.frames)})),r}catch{return}}}const Qt={},Yn={};function Qe(t,e){Qt[t]=Qt[t]||[],Qt[t].push(e)}function Ke(t,e){if(!Yn[t]){Yn[t]=!0;try{e()}catch(r){rt&&V.error(`Error while instrumenting ${t}`,r)}}}function _e(t,e){const r=t&&Qt[t];if(r)for(const s of r)try{s(e)}catch(n){rt&&V.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${qe(s)}
Error:`,n)}}let br=null;function Aa(){br=Y.onerror,Y.onerror=function(t,e,r,s,n){return _e("error",{column:s,error:n,line:r,msg:t,url:e}),!!br&&br.apply(this,arguments)},Y.onerror.__SENTRY_INSTRUMENTED__=!0}let _r=null;function Ma(){_r=Y.onunhandledrejection,Y.onunhandledrejection=function(t){return _e("unhandledrejection",t),!_r||_r.apply(this,arguments)},Y.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function fr(){return gn(Y),Y}function gn(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||He,e[He]=e[He]||{}}const As=Object.prototype.toString;function vn(t){switch(As.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Xe(t,Error)}}function mt(t,e){return As.call(t)===`[object ${e}]`}function Ms(t){return mt(t,"ErrorEvent")}function Wn(t){return mt(t,"DOMError")}function Ie(t){return mt(t,"String")}function yn(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Vr(t){return t===null||yn(t)||typeof t!="object"&&typeof t!="function"}function ut(t){return mt(t,"Object")}function mr(t){return typeof Event<"u"&&Xe(t,Event)}function gr(t){return!!(t&&t.then&&typeof t.then=="function")}function Xe(t,e){try{return t instanceof e}catch{return!1}}function Ps(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}const bn=Y;function Is(t,e={}){if(!t)return"<unknown>";try{let r=t;const s=5,n=[];let i=0,a=0;const l=" > ",d=l.length;let h;const g=Array.isArray(e)?e:e.keyAttrs,_=!Array.isArray(e)&&e.maxStringLength||80;for(;r&&i++<s&&(h=Pa(r,g),!(h==="html"||i>1&&a+n.length*d+h.length>=_));)n.push(h),a+=h.length,r=r.parentNode;return n.reverse().join(l)}catch{return"<unknown>"}}function Pa(t,e){const r=t,s=[];if(!r||!r.tagName)return"";if(bn.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}s.push(r.tagName.toLowerCase());const n=e&&e.length?e.filter((a=>r.getAttribute(a))).map((a=>[a,r.getAttribute(a)])):null;if(n&&n.length)n.forEach((a=>{s.push(`[${a[0]}="${a[1]}"]`)}));else{r.id&&s.push(`#${r.id}`);const a=r.className;if(a&&Ie(a)){const l=a.split(/\s+/);for(const d of l)s.push(`.${d}`)}}const i=["aria-label","type","name","title","alt"];for(const a of i){const l=r.getAttribute(a);l&&s.push(`[${a}="${l}"]`)}return s.join("")}function ct(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function zn(t,e){if(!Array.isArray(t))return"";const r=[];for(let s=0;s<t.length;s++){const n=t[s];try{Ps(n)?r.push("[VueViewModel]"):r.push(String(n))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function Ia(t,e,r=!1){return!!Ie(t)&&(mt(e,"RegExp")?e.test(t):!!Ie(e)&&(r?t===e:t.includes(e)))}function qt(t,e=[],r=!1){return e.some((s=>Ia(t,s,r)))}function ue(t,e,r){if(!(e in t))return;const s=t[e],n=r(s);typeof n=="function"&&Ds(n,s);try{t[e]=n}catch{rt&&V.log(`Failed to replace method "${e}" in object`,t)}}function Ze(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{rt&&V.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Ds(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,Ze(t,"__sentry_original__",e)}catch{}}function _n(t){return t.__sentry_original__}function js(t){if(vn(t))return{message:t.message,name:t.name,stack:t.stack,...Qn(t)};if(mr(t)){const e={type:t.type,target:Hn(t.target),currentTarget:Hn(t.currentTarget),...Qn(t)};return typeof CustomEvent<"u"&&Xe(t,CustomEvent)&&(e.detail=t.detail),e}return t}function Hn(t){try{return e=t,typeof Element<"u"&&Xe(e,Element)?Is(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function Qn(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}return{}}function me(t){return Ur(t,new Map)}function Ur(t,e){if((function(r){if(!ut(r))return!1;try{const s=Object.getPrototypeOf(r).constructor.name;return!s||s==="Object"}catch{return!0}})(t)){const r=e.get(t);if(r!==void 0)return r;const s={};e.set(t,s);for(const n of Object.getOwnPropertyNames(t))t[n]!==void 0&&(s[n]=Ur(t[n],e));return s}if(Array.isArray(t)){const r=e.get(t);if(r!==void 0)return r;const s=[];return e.set(t,s),t.forEach((n=>{s.push(Ur(n,e))})),s}return t}function jt(){return Date.now()/1e3}const je=(function(){const{performance:t}=Y;if(!t||!t.now)return jt;const e=Date.now()-t.now(),r=t.timeOrigin==null?e:t.timeOrigin;return()=>(r+t.now())/1e3})();function ge(){const t=Y,e=t.crypto||t.msCrypto;let r=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=()=>{const s=new Uint8Array(1);return e.getRandomValues(s),s[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,(s=>(s^(15&r())>>s/4).toString(16)))}function Ls(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function xe(t){const{message:e,event_id:r}=t;if(e)return e;const s=Ls(t);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||r||"<unknown>":r||"<unknown>"}function $r(t,e,r){const s=t.exception=t.exception||{},n=s.values=s.values||[],i=n[0]=n[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function dt(t,e){const r=Ls(t);if(!r)return;const s=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...s,...e},e&&"data"in e){const n={...s&&s.data,...e.data};r.mechanism.data=n}}function Kn(t){if((function(e){try{return e.__sentry_captured__}catch{}})(t))return!0;try{Ze(t,"__sentry_captured__",!0)}catch{}return!1}var Me;function et(t){return new fe((e=>{e(t)}))}function sr(t){return new fe(((e,r)=>{r(t)}))}(()=>{const{performance:t}=Y;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})(),(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Me||(Me={}));class fe{constructor(e){fe.prototype.__init.call(this),fe.prototype.__init2.call(this),fe.prototype.__init3.call(this),fe.prototype.__init4.call(this),this._state=Me.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new fe(((s,n)=>{this._handlers.push([!1,i=>{if(e)try{s(e(i))}catch(a){n(a)}else s(i)},i=>{if(r)try{s(r(i))}catch(a){n(a)}else n(i)}]),this._executeHandlers()}))}catch(e){return this.then((r=>r),e)}finally(e){return new fe(((r,s)=>{let n,i;return this.then((a=>{i=!1,n=a,e&&e()}),(a=>{i=!0,n=a,e&&e()})).then((()=>{i?s(n):r(n)}))}))}__init(){this._resolve=e=>{this._setResult(Me.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Me.REJECTED,e)}}__init3(){this._setResult=(e,r)=>{this._state===Me.PENDING&&(gr(r)?r.then(this._resolve,this._reject):(this._state=e,this._value=r,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Me.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((r=>{r[0]||(this._state===Me.RESOLVED&&r[1](this._value),this._state===Me.REJECTED&&r[2](this._value),r[0]=!0)}))}}}function Da(t){const e=je(),r={sid:ge(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>(function(s){return me({sid:`${s.sid}`,init:s.init,started:new Date(1e3*s.started).toISOString(),timestamp:new Date(1e3*s.timestamp).toISOString(),status:s.status,errors:s.errors,did:typeof s.did=="number"||typeof s.did=="string"?`${s.did}`:void 0,duration:s.duration,abnormal_mechanism:s.abnormal_mechanism,attrs:{release:s.release,environment:s.environment,ip_address:s.ipAddress,user_agent:s.userAgent}})})(r)};return t&&ht(r,t),r}function ht(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||je(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:ge()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Xn(){return ge()}function Jr(){return ge().substring(16)}function vr(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const s={...t};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=vr(s[n],e[n],r-1));return s}const Br="_sentrySpan";function Zn(t,e){e?Ze(t,Br,e):delete t[Br]}function ei(t){return t[Br]}class Sn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Xn(),spanId:Jr()}}clone(){const e=new Sn;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Zn(e,ei(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ht(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,[s,n]=r instanceof Ve?[r.getScopeData(),r.getRequestSession()]:ut(r)?[e,e.requestSession]:[],{tags:i,extra:a,user:l,contexts:d,level:h,fingerprint:g=[],propagationContext:_}=s||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...a},this._contexts={...this._contexts,...d},l&&Object.keys(l).length&&(this._user=l),h&&(this._level=h),g.length&&(this._fingerprint=g),_&&(this._propagationContext=_),n&&(this._requestSession=n),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Zn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Xn()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const s=typeof r=="number"?r:100;if(s<=0)return this;const n={timestamp:jt(),...e};return this._breadcrumbs.push(n),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ei(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=vr(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:Jr(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,r){const s=r&&r.event_id?r.event_id:ge();if(!this._client)return V.warn("No client configured on scope - will not capture exception!"),s;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...r,event_id:s},this),s}captureMessage(e,r,s){const n=s&&s.event_id?s.event_id:ge();if(!this._client)return V.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:i,...s,event_id:n},this),n}captureEvent(e,r){const s=r&&r.event_id?r.event_id:ge();return this._client?(this._client.captureEvent(e,{...r,event_id:s},this),s):(V.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const Ve=Sn;class ja{constructor(e,r){let s,n;s=e||new Ve,n=r||new Ve,this._stack=[{scope:s}],this._isolationScope=n}withScope(e){const r=this._pushScope();let s;try{s=e(r)}catch(n){throw this._popScope(),n}return gr(s)?s.then((n=>(this._popScope(),n)),(n=>{throw this._popScope(),n})):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function pt(){const t=gn(fr());return t.stack=t.stack||new ja(nr("defaultCurrentScope",(()=>new Ve)),nr("defaultIsolationScope",(()=>new Ve)))}function La(t){return pt().withScope(t)}function Na(t,e){const r=pt();return r.withScope((()=>(r.getStackTop().scope=t,e(t))))}function ti(t){return pt().withScope((()=>t(pt().getIsolationScope())))}function wn(t){const e=gn(t);return e.acs?e.acs:{withIsolationScope:ti,withScope:La,withSetScope:Na,withSetIsolationScope:(r,s)=>ti(s),getCurrentScope:()=>pt().getScope(),getIsolationScope:()=>pt().getIsolationScope()}}function nt(){return wn(fr()).getCurrentScope()}function Lt(){return wn(fr()).getIsolationScope()}function ie(){return nt().getClient()}function Ra(t){const e=t.getPropagationContext(),{traceId:r,spanId:s,parentSpanId:n}=e;return me({trace_id:r,span_id:s,parent_span_id:n})}function xa(t){const e=t._sentryMetrics;if(!e)return;const r={};for(const[,[s,n]]of e)(r[s]||(r[s]=[])).push(me(n));return r}const Fa=/^sentry-/;function qa(t){const e=(function(s){if(!(!s||!Ie(s)&&!Array.isArray(s)))return Array.isArray(s)?s.reduce(((n,i)=>{const a=ri(i);return Object.entries(a).forEach((([l,d])=>{n[l]=d})),n}),{}):ri(s)})(t);if(!e)return;const r=Object.entries(e).reduce(((s,[n,i])=>(n.match(Fa)&&(s[n.slice(7)]=i),s)),{});return Object.keys(r).length>0?r:void 0}function ri(t){return t.split(",").map((e=>e.split("=").map((r=>decodeURIComponent(r.trim()))))).reduce(((e,[r,s])=>(r&&s&&(e[r]=s),e)),{})}let ni=!1;function Va(t){const{spanId:e,traceId:r,isRemote:s}=t.spanContext();return me({parent_span_id:s?e:En(t).parent_span_id,span_id:s?Jr():e,trace_id:r})}function ii(t){return typeof t=="number"?si(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?si(t.getTime()):je()}function si(t){return t>9999999999?t/1e3:t}function En(t){if((function(e){return typeof e.getSpanJSON=="function"})(t))return t.getSpanJSON();try{const{spanId:e,traceId:r}=t.spanContext();if((function(s){const n=s;return!!(n.attributes&&n.startTime&&n.name&&n.endTime&&n.status)})(t)){const{attributes:s,startTime:n,name:i,endTime:a,parentSpanId:l,status:d}=t;return me({span_id:e,trace_id:r,data:s,description:i,parent_span_id:l,start_timestamp:ii(n),timestamp:ii(a)||void 0,status:Ua(d),op:s["sentry.op"],origin:s["sentry.origin"],_metrics_summary:xa(t)})}return{span_id:e,trace_id:r}}catch{return{}}}function Ua(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function Ns(t){return t._sentryRootSpan||t}function $a(){ni||(Dt((()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")})),ni=!0)}const kn="production";function Rs(t,e){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},n=me({environment:r.environment||kn,release:r.release,public_key:s,trace_id:t});return e.emit("createDsc",n),n}function Ja(t){const e=ie();if(!e)return{};const r=Ns(t),s=r._frozenDsc;if(s)return s;const n=r.spanContext().traceState,i=n&&n.get("sentry.dsc"),a=i&&qa(i);if(a)return a;const l=Rs(t.spanContext().traceId,e),d=En(r),h=d.data||{},g=h["sentry.sample_rate"];g!=null&&(l.sample_rate=`${g}`);const _=h["sentry.source"],C=d.description;return _!=="url"&&C&&(l.transaction=C),(function(v){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const y=ie(),f=y&&y.getOptions();return!!f&&(f.enableTracing||"tracesSampleRate"in f||"tracesSampler"in f)})()&&(l.sampled=String((function(v){const{traceFlags:y}=v.spanContext();return y===1})(r))),e.emit("createDsc",l,r),l}const Ba=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function or(t,e=!1){const{host:r,path:s,pass:n,port:i,projectId:a,protocol:l,publicKey:d}=t;return`${l}://${d}${e&&n?`:${n}`:""}@${r}${i?`:${i}`:""}/${s&&`${s}/`}${a}`}function oi(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ga(t){const e=typeof t=="string"?(function(r){const s=Ba.exec(r);if(!s)return void Dt((()=>{console.error(`Invalid Sentry Dsn: ${r}`)}));const[n,i,a="",l="",d="",h=""]=s.slice(1);let g="",_=h;const C=_.split("/");if(C.length>1&&(g=C.slice(0,-1).join("/"),_=C.pop()),_){const v=_.match(/^\d+/);v&&(_=v[0])}return oi({host:l,pass:a,path:g,projectId:_,port:d,protocol:n,publicKey:i})})(t):oi(t);if(e&&(function(r){if(!rt)return!0;const{port:s,projectId:n,protocol:i}=r;return!(["protocol","publicKey","host","projectId"].find((a=>!r[a]&&(V.error(`Invalid Sentry Dsn: ${a} missing`),!0)))||(n.match(/^\d+$/)?(function(a){return a==="http"||a==="https"})(i)?s&&isNaN(parseInt(s,10))&&(V.error(`Invalid Sentry Dsn: Invalid port ${s}`),1):(V.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(V.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))})(e))return e}function Pe(t,e=100,r=1/0){try{return Gr("",t,e,r)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function xs(t,e=3,r=102400){const s=Pe(t,e);return n=s,(function(i){return~-encodeURI(i).split(/%..|./).length})(JSON.stringify(n))>r?xs(t,e-1,r):s;var n}function Gr(t,e,r=1/0,s=1/0,n=(function(){const i=typeof WeakSet=="function",a=i?new WeakSet:[];return[function(l){if(i)return!!a.has(l)||(a.add(l),!1);for(let d=0;d<a.length;d++)if(a[d]===l)return!0;return a.push(l),!1},function(l){if(i)a.delete(l);else for(let d=0;d<a.length;d++)if(a[d]===l){a.splice(d,1);break}}]})()){const[i,a]=n;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=(function(v,y){try{if(v==="domain"&&y&&typeof y=="object"&&y._events)return"[Domain]";if(v==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&y===global)return"[Global]";if(typeof window<"u"&&y===window)return"[Window]";if(typeof document<"u"&&y===document)return"[Document]";if(Ps(y))return"[VueViewModel]";if(ut(f=y)&&"nativeEvent"in f&&"preventDefault"in f&&"stopPropagation"in f)return"[SyntheticEvent]";if(typeof y=="number"&&!Number.isFinite(y))return`[${y}]`;if(typeof y=="function")return`[Function: ${qe(y)}]`;if(typeof y=="symbol")return`[${String(y)}]`;if(typeof y=="bigint")return`[BigInt: ${String(y)}]`;const b=(function(E){const M=Object.getPrototypeOf(E);return M?M.constructor.name:"null prototype"})(y);return/^HTML(\w*)Element$/.test(b)?`[HTMLElement: ${b}]`:`[object ${b}]`}catch(b){return`**non-serializable** (${b})`}var f})(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const d=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(d===0)return l.replace("object ","");if(i(e))return"[Circular ~]";const h=e;if(h&&typeof h.toJSON=="function")try{return Gr("",h.toJSON(),d-1,s,n)}catch{}const g=Array.isArray(e)?[]:{};let _=0;const C=js(e);for(const v in C){if(!Object.prototype.hasOwnProperty.call(C,v))continue;if(_>=s){g[v]="[MaxProperties ~]";break}const y=C[v];g[v]=Gr(v,y,d-1,s,n),_++}return a(e),g}function It(t,e=[]){return[t,e]}function Ya(t,e){const[r,s]=t;return[r,[...s,e]]}function ai(t,e){const r=t[1];for(const s of r)if(e(s,s[0].type))return!0;return!1}function Yr(t){return Y.__SENTRY__&&Y.__SENTRY__.encodePolyfill?Y.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function Wa(t){const[e,r]=t;let s=JSON.stringify(e);function n(i){typeof s=="string"?s=typeof i=="string"?s+i:[Yr(s),i]:s.push(typeof i=="string"?Yr(i):i)}for(const i of r){const[a,l]=i;if(n(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)n(l);else{let d;try{d=JSON.stringify(l)}catch{d=JSON.stringify(Pe(l))}n(d)}}return typeof s=="string"?s:(function(i){const a=i.reduce(((h,g)=>h+g.length),0),l=new Uint8Array(a);let d=0;for(const h of i)l.set(h,d),d+=h.length;return l})(s)}function za(t){const e=typeof t.data=="string"?Yr(t.data):t.data;return[me({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const Ha={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function ci(t){return Ha[t]}function Fs(t){if(!t||!t.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function Qa(t,e,r,s){const n=Fs(r),i=t.type&&t.type!=="replay_event"?t.type:"event";(function(l,d){d&&(l.sdk=l.sdk||{},l.sdk.name=l.sdk.name||d.name,l.sdk.version=l.sdk.version||d.version,l.sdk.integrations=[...l.sdk.integrations||[],...d.integrations||[]],l.sdk.packages=[...l.sdk.packages||[],...d.packages||[]])})(t,r&&r.sdk);const a=(function(l,d,h,g){const _=l.sdkProcessingMetadata&&l.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:l.event_id,sent_at:new Date().toISOString(),...d&&{sdk:d},...!!h&&g&&{dsn:or(g)},..._&&{trace:me({..._})}}})(t,n,s,e);return delete t.sdkProcessingMetadata,It(a,[[{type:i},t]])}function Wr(t,e,r,s=0){return new fe(((n,i)=>{const a=t[s];if(e===null||typeof a!="function")n(e);else{const l=a({...e},r);Q&&a.id&&l===null&&V.log(`Event processor "${a.id}" dropped event`),gr(l)?l.then((d=>Wr(t,d,r,s+1).then(n))).then(null,i):Wr(t,l,r,s+1).then(n).then(null,i)}}))}let Vt,li,Sr;function Ka(t,e){const{fingerprint:r,span:s,breadcrumbs:n,sdkProcessingMetadata:i}=e;(function(a,l){const{extra:d,tags:h,user:g,contexts:_,level:C,transactionName:v}=l,y=me(d);y&&Object.keys(y).length&&(a.extra={...y,...a.extra});const f=me(h);f&&Object.keys(f).length&&(a.tags={...f,...a.tags});const b=me(g);b&&Object.keys(b).length&&(a.user={...b,...a.user});const E=me(_);E&&Object.keys(E).length&&(a.contexts={...E,...a.contexts}),C&&(a.level=C),v&&a.type!=="transaction"&&(a.transaction=v)})(t,e),s&&(function(a,l){a.contexts={trace:Va(l),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:Ja(l),...a.sdkProcessingMetadata};const d=Ns(l),h=En(d).description;h&&!a.transaction&&a.type==="transaction"&&(a.transaction=h)})(t,s),(function(a,l){a.fingerprint=a.fingerprint?Array.isArray(a.fingerprint)?a.fingerprint:[a.fingerprint]:[],l&&(a.fingerprint=a.fingerprint.concat(l)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint})(t,r),(function(a,l){const d=[...a.breadcrumbs||[],...l];a.breadcrumbs=d.length?d:void 0})(t,n),(function(a,l){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...l}})(t,i)}function ui(t,e){const{extra:r,tags:s,user:n,contexts:i,level:a,sdkProcessingMetadata:l,breadcrumbs:d,fingerprint:h,eventProcessors:g,attachments:_,propagationContext:C,transactionName:v,span:y}=e;Ut(t,"extra",r),Ut(t,"tags",s),Ut(t,"user",n),Ut(t,"contexts",i),t.sdkProcessingMetadata=vr(t.sdkProcessingMetadata,l,2),a&&(t.level=a),v&&(t.transactionName=v),y&&(t.span=y),d.length&&(t.breadcrumbs=[...t.breadcrumbs,...d]),h.length&&(t.fingerprint=[...t.fingerprint,...h]),g.length&&(t.eventProcessors=[...t.eventProcessors,...g]),_.length&&(t.attachments=[...t.attachments,..._]),t.propagationContext={...t.propagationContext,...C}}function Ut(t,e,r){t[e]=vr(t[e],r,1)}function Xa(t,e,r,s,n,i){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=t,d={...e,event_id:e.event_id||r.event_id||ge(),timestamp:e.timestamp||jt()},h=r.integrations||t.integrations.map((y=>y.name));(function(y,f){const{environment:b,release:E,dist:M,maxValueLength:I=250}=f;y.environment=y.environment||b||kn,!y.release&&E&&(y.release=E),!y.dist&&M&&(y.dist=M),y.message&&(y.message=ct(y.message,I));const w=y.exception&&y.exception.values&&y.exception.values[0];w&&w.value&&(w.value=ct(w.value,I));const S=y.request;S&&S.url&&(S.url=ct(S.url,I))})(d,t),(function(y,f){f.length>0&&(y.sdk=y.sdk||{},y.sdk.integrations=[...y.sdk.integrations||[],...f])})(d,h),n&&n.emit("applyFrameMetadata",e),e.type===void 0&&(function(y,f){const b=(function(E){const M=Y._sentryDebugIds;if(!M)return{};const I=Object.keys(M);return Sr&&I.length===li||(li=I.length,Sr=I.reduce(((w,S)=>{Vt||(Vt={});const T=Vt[S];if(T)w[T[0]]=T[1];else{const D=E(S);for(let N=D.length-1;N>=0;N--){const j=D[N],F=j&&j.filename,W=M[S];if(F&&W){w[F]=W,Vt[S]=[F,W];break}}}return w}),{})),Sr})(f);try{y.exception.values.forEach((E=>{E.stacktrace.frames.forEach((M=>{b&&M.filename&&(M.debug_id=b[M.filename])}))}))}catch{}})(d,t.stackParser);const g=(function(y,f){if(!f)return y;const b=y?y.clone():new Ve;return b.update(f),b})(s,r.captureContext);r.mechanism&&dt(d,r.mechanism);const _=n?n.getEventProcessors():[],C=nr("globalScope",(()=>new Ve)).getScopeData();i&&ui(C,i.getScopeData()),g&&ui(C,g.getScopeData());const v=[...r.attachments||[],...C.attachments];return v.length&&(r.attachments=v),Ka(d,C),Wr([..._,...C.eventProcessors],d,r).then((y=>(y&&(function(f){const b={};try{f.exception.values.forEach((M=>{M.stacktrace.frames.forEach((I=>{I.debug_id&&(I.abs_path?b[I.abs_path]=I.debug_id:I.filename&&(b[I.filename]=I.debug_id),delete I.debug_id)}))}))}catch{}if(Object.keys(b).length===0)return;f.debug_meta=f.debug_meta||{},f.debug_meta.images=f.debug_meta.images||[];const E=f.debug_meta.images;Object.entries(b).forEach((([M,I])=>{E.push({type:"sourcemap",code_file:M,debug_id:I})}))})(y),typeof a=="number"&&a>0?(function(f,b,E){if(!f)return null;const M={...f,...f.breadcrumbs&&{breadcrumbs:f.breadcrumbs.map((I=>({...I,...I.data&&{data:Pe(I.data,b,E)}})))},...f.user&&{user:Pe(f.user,b,E)},...f.contexts&&{contexts:Pe(f.contexts,b,E)},...f.extra&&{extra:Pe(f.extra,b,E)}};return f.contexts&&f.contexts.trace&&M.contexts&&(M.contexts.trace=f.contexts.trace,f.contexts.trace.data&&(M.contexts.trace.data=Pe(f.contexts.trace.data,b,E))),f.spans&&(M.spans=f.spans.map((I=>({...I,...I.data&&{data:Pe(I.data,b,E)}})))),f.contexts&&f.contexts.flags&&M.contexts&&(M.contexts.flags=Pe(f.contexts.flags,3,E)),M})(y,a,l):y)))}function di(t,e){return nt().captureEvent(t,e)}function hi(t){const e=ie(),r=Lt(),s=nt(),{release:n,environment:i=kn}=e&&e.getOptions()||{},{userAgent:a}=Y.navigator||{},l=Da({release:n,environment:i,user:s.getUser()||r.getUser(),...a&&{userAgent:a},...t}),d=r.getSession();return d&&d.status==="ok"&&ht(d,{status:"exited"}),qs(),r.setSession(l),s.setSession(l),l}function qs(){const t=Lt(),e=nt(),r=e.getSession()||t.getSession();r&&(function(s,n){let i={};s.status==="ok"&&(i={status:"exited"}),ht(s,i)})(r),Vs(),t.setSession(),e.setSession()}function Vs(){const t=Lt(),e=nt(),r=ie(),s=e.getSession()||t.getSession();s&&r&&r.captureSession(s)}function pi(t=!1){t?qs():Vs()}function Za(t,e,r){return e||`${(function(s){return`${(function(n){const i=n.protocol?`${n.protocol}:`:"",a=n.port?`:${n.port}`:"";return`${i}//${n.host}${a}${n.path?`/${n.path}`:""}/api/`})(s)}${s.projectId}/envelope/`})(t)}?${(function(s,n){const i={sentry_version:"7"};return s.publicKey&&(i.sentry_key=s.publicKey),n&&(i.sentry_client=`${n.name}/${n.version}`),new URLSearchParams(i).toString()})(t,r)}`}const fi=[];function mi(t,e){for(const r of e)r&&r.afterAllSetup&&r.afterAllSetup(t)}function gi(t,e,r){if(r[e.name])Q&&V.log(`Integration skipped because it was already installed: ${e.name}`);else{if(r[e.name]=e,fi.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),fi.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const s=e.preprocessEvent.bind(e);t.on("preprocessEvent",((n,i)=>s(n,i,t)))}if(typeof e.processEvent=="function"){const s=e.processEvent.bind(e),n=Object.assign(((i,a)=>s(i,a,t)),{id:e.name});t.addEventProcessor(n)}Q&&V.log(`Integration installed: ${e.name}`)}}class be extends Error{constructor(e,r="warn"){super(e),this.message=e,this.logLevel=r}}const vi="Not capturing exception because it's already been captured.";class ec{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ga(e.dsn):Q&&V.warn("No DSN provided, client will not send events."),this._dsn){const s=Za(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:s})}const r=["enableTracing","tracesSampleRate","tracesSampler"].find((s=>s in e&&e[s]==null));r&&Dt((()=>{console.warn(`[Sentry] Deprecation warning: \`${r}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)}))}captureException(e,r,s){const n=ge();if(Kn(e))return Q&&V.log(vi),n;const i={event_id:n,...r};return this._process(this.eventFromException(e,i).then((a=>this._captureEvent(a,i,s)))),i.event_id}captureMessage(e,r,s,n){const i={event_id:ge(),...s},a=yn(e)?e:String(e),l=Vr(e)?this.eventFromMessage(a,r,i):this.eventFromException(e,i);return this._process(l.then((d=>this._captureEvent(d,i,n)))),i.event_id}captureEvent(e,r,s){const n=ge();if(r&&r.originalException&&Kn(r.originalException))return Q&&V.log(vi),n;const i={event_id:n,...r},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,i,a||s)),i.event_id}captureSession(e){typeof e.release!="string"?Q&&V.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ht(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?(this.emit("flush"),this._isClientDoneProcessing(e).then((s=>r.flush(e).then((n=>s&&n))))):et(!0)}close(e){return this.flush(e).then((r=>(this.getOptions().enabled=!1,this.emit("close"),r)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];gi(this,e,this._integrations),r||mi(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let s=Qa(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of r.attachments||[])s=Ya(s,za(i));const n=this.sendEnvelope(s);n&&n.then((i=>this.emit("afterSendEvent",e,i)),null)}sendSession(e){const r=(function(s,n,i,a){const l=Fs(i);return It({sent_at:new Date().toISOString(),...l&&{sdk:l},...!!a&&n&&{dsn:or(n)}},["aggregates"in s?[{type:"sessions"},s]:[{type:"session"},s.toJSON()]])})(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,r,s){if(this._options.sendClientReports){const n=typeof s=="number"?s:1,i=`${e}:${r}`;Q&&V.log(`Recording outcome: "${i}"${n>1?` (${n} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+n}}on(e,r){const s=this._hooks[e]=this._hooks[e]||[];return s.push(r),()=>{const n=s.indexOf(r);n>-1&&s.splice(n,1)}}emit(e,...r){const s=this._hooks[e];s&&s.forEach((n=>n(...r)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(r=>(Q&&V.error("Error while sending envelope:",r),r))):(Q&&V.error("Transport disabled"),et({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=(function(r,s){const n={};return s.forEach((i=>{i&&gi(r,i,n)})),n})(this,e),mi(this,e)}_updateSessionFromEvent(e,r){let s=r.level==="fatal",n=!1;const i=r.exception&&r.exception.values;if(i){n=!0;for(const l of i){const d=l.mechanism;if(d&&d.handled===!1){s=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&s)&&(ht(e,{...s&&{status:"crashed"},errors:e.errors||Number(n||s)}),this.captureSession(e))}_isClientDoneProcessing(e){return new fe((r=>{let s=0;const n=setInterval((()=>{this._numProcessing==0?(clearInterval(n),r(!0)):(s+=1,e&&s>=e&&(clearInterval(n),r(!1)))}),1)}))}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,s=nt(),n=Lt()){const i=this.getOptions(),a=Object.keys(this._integrations);return!r.integrations&&a.length>0&&(r.integrations=a),this.emit("preprocessEvent",e,r),e.type||n.setLastEventId(e.event_id||r.event_id),Xa(i,e,r,s,this,n).then((l=>{if(l===null)return l;l.contexts={trace:Ra(s),...l.contexts};const d=(function(h,g){const _=g.getPropagationContext();return _.dsc||Rs(_.traceId,h)})(this,s);return l.sdkProcessingMetadata={dynamicSamplingContext:d,...l.sdkProcessingMetadata},l}))}_captureEvent(e,r={},s){return this._processEvent(e,r,s).then((n=>n.event_id),(n=>{Q&&(n instanceof be&&n.logLevel==="log"?V.log(n.message):V.warn(n))}))}_processEvent(e,r,s){const n=this.getOptions(),{sampleRate:i}=n,a=bi(e),l=yi(e),d=e.type||"error",h=`before send for type \`${d}\``,g=i===void 0?void 0:(function(v){if(typeof v=="boolean")return Number(v);const y=typeof v=="string"?parseFloat(v):v;if(!(typeof y!="number"||isNaN(y)||y<0||y>1))return y;Q&&V.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(v)} of type ${JSON.stringify(typeof v)}.`)})(i);if(l&&typeof g=="number"&&Math.random()>g)return this.recordDroppedEvent("sample_rate","error",e),sr(new be(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const _=d==="replay_event"?"replay":d,C=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,r,s,C).then((v=>{if(v===null)throw this.recordDroppedEvent("event_processor",_,e),new be("An event processor returned `null`, will not send event.","log");if(r.data&&r.data.__sentry__===!0)return v;const y=(function(f,b,E,M){const{beforeSend:I,beforeSendTransaction:w,beforeSendSpan:S}=b;if(yi(E)&&I)return I(E,M);if(bi(E)){if(E.spans&&S){const T=[];for(const D of E.spans){const N=S(D);N?T.push(N):($a(),f.recordDroppedEvent("before_send","span"))}E.spans=T}if(w){if(E.spans){const T=E.spans.length;E.sdkProcessingMetadata={...E.sdkProcessingMetadata,spanCountBeforeProcessing:T}}return w(E,M)}}return E})(this,n,v,r);return(function(f,b){const E=`${b} must return \`null\` or a valid event.`;if(gr(f))return f.then((M=>{if(!ut(M)&&M!==null)throw new be(E);return M}),(M=>{throw new be(`${b} rejected with ${M}`)}));if(!ut(f)&&f!==null)throw new be(E);return f})(y,h)})).then((v=>{if(v===null){if(this.recordDroppedEvent("before_send",_,e),a){const b=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new be(`${h} returned \`null\`, will not send event.`,"log")}const y=s&&s.getSession();if(!a&&y&&this._updateSessionFromEvent(y,v),a){const b=(v.sdkProcessingMetadata&&v.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(v.spans?v.spans.length:0);b>0&&this.recordDroppedEvent("before_send","span",b)}const f=v.transaction_info;if(a&&f&&v.transaction!==e.transaction){const b="custom";v.transaction_info={...f,source:b}}return this.sendEvent(v,r),v})).then(null,(v=>{throw v instanceof be?v:(this.captureException(v,{data:{__sentry__:!0},originalException:v}),new be(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${v}`))}))}_process(e){this._numProcessing++,e.then((r=>(this._numProcessing--,r)),(r=>(this._numProcessing--,r)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([r,s])=>{const[n,i]=r.split(":");return{reason:n,category:i,quantity:s}}))}_flushOutcomes(){Q&&V.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(Q&&V.log("No outcomes to send"));if(!this._dsn)return void(Q&&V.log("No dsn provided, will not send outcomes"));Q&&V.log("Sending outcomes:",e);const r=(s=e,It((n=this._options.tunnel&&or(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:i||jt(),discarded_events:s}]]));var s,n,i;this.sendEnvelope(r)}}function yi(t){return t.type===void 0}function bi(t){return t.type==="transaction"}function tc(t){const e=[];function r(s){return e.splice(e.indexOf(s),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(s){if(!(t===void 0||e.length<t))return sr(new be("Not adding Promise because buffer limit was reached."));const n=s();return e.indexOf(n)===-1&&e.push(n),n.then((()=>r(n))).then(null,(()=>r(n).then(null,(()=>{})))),n},drain:function(s){return new fe(((n,i)=>{let a=e.length;if(!a)return n(!0);const l=setTimeout((()=>{s&&s>0&&n(!1)}),s);e.forEach((d=>{et(d).then((()=>{--a||(clearTimeout(l),n(!0))}),i)}))}))}}}function rc(t,{statusCode:e,headers:r},s=Date.now()){const n={...t},i=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(i)for(const l of i.trim().split(",")){const[d,h,,,g]=l.split(":",5),_=parseInt(d,10),C=1e3*(isNaN(_)?60:_);if(h)for(const v of h.split(";"))v==="metric_bucket"&&g&&!g.split(";").includes("custom")||(n[v]=s+C);else n.all=s+C}else a?n.all=s+(function(l,d=Date.now()){const h=parseInt(`${l}`,10);if(!isNaN(h))return 1e3*h;const g=Date.parse(`${l}`);return isNaN(g)?6e4:g-d})(a,s):e===429&&(n.all=s+6e4);return n}function nc(t,e,r=tc(t.bufferSize||64)){let s={};return{send:function(n){const i=[];if(ai(n,((d,h)=>{const g=ci(h);if((function(_,C,v=Date.now()){return(function(y,f){return y[f]||y.all||0})(_,C)>v})(s,g)){const _=_i(d,h);t.recordDroppedEvent("ratelimit_backoff",g,_)}else i.push(d)})),i.length===0)return et({});const a=It(n[0],i),l=d=>{ai(a,((h,g)=>{const _=_i(h,g);t.recordDroppedEvent(d,ci(g),_)}))};return r.add((()=>e({body:Wa(a)}).then((d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Q&&V.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),s=rc(s,d),d)),(d=>{throw l("network_error"),d})))).then((d=>d),(d=>{if(d instanceof be)return Q&&V.error("Skipped sending event because buffer is full."),l("queue_overflow"),et({});throw d}))},flush:n=>r.drain(n)}}function _i(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const ic=100;function Be(t,e){const r=ie(),s=Lt();if(!r)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:i=ic}=r.getOptions();if(i<=0)return;const a={timestamp:jt(),...t},l=n?Dt((()=>n(a,e))):a;l!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",l,e),s.addBreadcrumb(l,i))}let Si;const wi=new WeakMap,sc=()=>({name:"FunctionToString",setupOnce(){Si=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=_n(this),r=wi.has(ie())&&e!==void 0?e:this;return Si.apply(r,t)}}catch{}},setup(t){wi.set(t,!0)}}),oc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],ac=(t={})=>({name:"InboundFilters",processEvent(e,r,s){const n=s.getOptions(),i=(function(a={},l={}){return{allowUrls:[...a.allowUrls||[],...l.allowUrls||[]],denyUrls:[...a.denyUrls||[],...l.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...l.ignoreErrors||[],...a.disableErrorDefaults?[]:oc],ignoreTransactions:[...a.ignoreTransactions||[],...l.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}})(t,n);return(function(a,l){return l.ignoreInternal&&(function(d){try{return d.exception.values[0].type==="SentryError"}catch{}return!1})(a)?(Q&&V.warn(`Event dropped due to being internal Sentry Error.
Event: ${xe(a)}`),!0):(function(d,h){return d.type||!h||!h.length?!1:(function(g){const _=[];g.message&&_.push(g.message);let C;try{C=g.exception.values[g.exception.values.length-1]}catch{}return C&&C.value&&(_.push(C.value),C.type&&_.push(`${C.type}: ${C.value}`)),_})(d).some((g=>qt(g,h)))})(a,l.ignoreErrors)?(Q&&V.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${xe(a)}`),!0):(function(d){return d.type||!d.exception||!d.exception.values||d.exception.values.length===0?!1:!d.message&&!d.exception.values.some((h=>h.stacktrace||h.type&&h.type!=="Error"||h.value))})(a)?(Q&&V.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${xe(a)}`),!0):(function(d,h){if(d.type!=="transaction"||!h||!h.length)return!1;const g=d.transaction;return!!g&&qt(g,h)})(a,l.ignoreTransactions)?(Q&&V.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${xe(a)}`),!0):(function(d,h){if(!h||!h.length)return!1;const g=$t(d);return!!g&&qt(g,h)})(a,l.denyUrls)?(Q&&V.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${xe(a)}.
Url: ${$t(a)}`),!0):(function(d,h){if(!h||!h.length)return!0;const g=$t(d);return!g||qt(g,h)})(a,l.allowUrls)?!1:(Q&&V.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${xe(a)}.
Url: ${$t(a)}`),!0)})(e,i)?null:e}});function $t(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?(function(r=[]){for(let s=r.length-1;s>=0;s--){const n=r[s];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null})(e):null}catch{return Q&&V.error(`Cannot extract url for event ${xe(t)}`),null}}function cc(t,e,r=250,s,n,i,a){if(!(i.exception&&i.exception.values&&a&&Xe(a.originalException,Error)))return;const l=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var d,h;l&&(i.exception.values=(d=zr(t,e,n,a.originalException,s,i.exception.values,l,0),h=r,d.map((g=>(g.value&&(g.value=ct(g.value,h)),g)))))}function zr(t,e,r,s,n,i,a,l){if(i.length>=r+1)return i;let d=[...i];if(Xe(s[n],Error)){Ei(a,l);const h=t(e,s[n]),g=d.length;ki(h,n,g,l),d=zr(t,e,r,s[n],n,[h,...d],h,g)}return Array.isArray(s.errors)&&s.errors.forEach(((h,g)=>{if(Xe(h,Error)){Ei(a,l);const _=t(e,h),C=d.length;ki(_,`errors[${g}]`,C,l),d=zr(t,e,r,h,n,[_,...d],_,C)}})),d}function Ei(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function ki(t,e,r,s){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:s}}function wr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",s=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:s,relative:e[5]+r+s}}function lc(){"console"in Y&&qr.forEach((function(t){t in Y.console&&ue(Y.console,t,(function(e){return ir[t]=e,function(...r){_e("console",{args:r,level:t});const s=ir[t];s&&s.apply(Y.console,r)}}))}))}function uc(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const dc=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if((function(r,s){return s?!!((function(n,i){const a=n.message,l=i.message;return!(!a&&!l||a&&!l||!a&&l||a!==l||!Ti(n,i)||!Ci(n,i))})(r,s)||(function(n,i){const a=Oi(i),l=Oi(n);return!(!a||!l||a.type!==l.type||a.value!==l.value||!Ti(n,i)||!Ci(n,i))})(r,s)):!1})(e,t))return Q&&V.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Ci(t,e){let r=Gn(t),s=Gn(e);if(!r&&!s)return!0;if(r&&!s||!r&&s||s.length!==r.length)return!1;for(let n=0;n<s.length;n++){const i=s[n],a=r[n];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function Ti(t,e){let r=t.fingerprint,s=e.fingerprint;if(!r&&!s)return!0;if(r&&!s||!r&&s)return!1;try{return r.join("")===s.join("")}catch{return!1}}function Oi(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Ai(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Er=Y;function Hr(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function hc(){if(typeof EdgeRuntime=="string")return!0;if(!(function(){if(!("fetch"in Er))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}})())return!1;if(Hr(Er.fetch))return!0;let t=!1;const e=Er.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=Hr(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){rt&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function pc(t,e){const r="fetch";Qe(r,t),Ke(r,(()=>(function(s,n=!1){n&&!hc()||ue(Y,"fetch",(function(i){return function(...a){const l=new Error,{method:d,url:h}=(function(_){if(_.length===0)return{method:"GET",url:""};if(_.length===2){const[v,y]=_;return{url:Mi(v),method:Qr(y,"method")?String(y.method).toUpperCase():"GET"}}const C=_[0];return{url:Mi(C),method:Qr(C,"method")?String(C.method).toUpperCase():"GET"}})(a),g={args:a,fetchData:{method:d,url:h},startTimestamp:1e3*je(),virtualError:l};return s||_e("fetch",{...g}),i.apply(Y,a).then((async _=>(s?s(_):_e("fetch",{...g,endTimestamp:1e3*je(),response:_}),_)),(_=>{throw _e("fetch",{...g,endTimestamp:1e3*je(),error:_}),vn(_)&&_.stack===void 0&&(_.stack=l.stack,Ze(_,"framesToPop",1)),_}))}}))})(void 0,e)))}function Qr(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Mi(t){return typeof t=="string"?t:t?Qr(t,"url")?t.url:t.toString?t.toString():"":""}const Jt=Y,ee=Y;let Kr=0;function Pi(){return Kr>0}function ft(t,e={}){if(!(function(s){return typeof s=="function"})(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(_n(t))return t}catch{return t}const r=function(...s){try{const n=s.map((i=>ft(i,e)));return t.apply(this,n)}catch(n){throw Kr++,setTimeout((()=>{Kr--})),(function(...i){const a=wn(fr());if(i.length===2){const[l,d]=i;return l?a.withSetScope(l,d):a.withScope(d)}a.withScope(i[0])})((i=>{var a;i.addEventProcessor((l=>(e.mechanism&&($r(l,void 0),dt(l,e.mechanism)),l.extra={...l.extra,arguments:s},l))),a=n,nt().captureException(a,void 0)})),n}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}Ds(r,t),Ze(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}const yr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Cn(t,e){const r=Tn(t,e),s={type:gc(e),value:vc(e)};return r.length&&(s.stacktrace={frames:r}),s.type===void 0&&s.value===""&&(s.value="Unrecoverable error caught"),s}function fc(t,e,r,s){const n=ie(),i=n&&n.getOptions().normalizeDepth,a=(function(h){for(const g in h)if(Object.prototype.hasOwnProperty.call(h,g)){const _=h[g];if(_ instanceof Error)return _}})(e),l={__serialized__:xs(e,i)};if(a)return{exception:{values:[Cn(t,a)]},extra:l};const d={exception:{values:[{type:mr(e)?e.constructor.name:s?"UnhandledRejection":"Error",value:yc(e,{isUnhandledRejection:s})}]},extra:l};if(r){const h=Tn(t,r);h.length&&(d.exception.values[0].stacktrace={frames:h})}return d}function kr(t,e){return{exception:{values:[Cn(t,e)]}}}function Tn(t,e){const r=e.stacktrace||e.stack||"",s=(function(i){return i&&mc.test(i.message)?1:0})(e),n=(function(i){return typeof i.framesToPop=="number"?i.framesToPop:0})(e);try{return t(r,s,n)}catch{}return[]}const mc=/Minified React error #\d+;/i;function Us(t){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&t instanceof WebAssembly.Exception}function gc(t){const e=t&&t.name;return!e&&Us(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function vc(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:Us(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function Xr(t,e,r,s,n){let i;if(Ms(e)&&e.error)return kr(t,e.error);if(Wn(e)||mt(e,"DOMException")){const a=e;if("stack"in e)i=kr(t,e);else{const l=a.name||(Wn(a)?"DOMError":"DOMException"),d=a.message?`${l}: ${a.message}`:l;i=Zr(t,d,r,s),$r(i,d)}return"code"in a&&(i.tags={...i.tags,"DOMException.code":`${a.code}`}),i}return vn(e)?kr(t,e):ut(e)||mr(e)?(i=fc(t,e,r,n),dt(i,{synthetic:!0}),i):(i=Zr(t,e,r,s),$r(i,`${e}`),dt(i,{synthetic:!0}),i)}function Zr(t,e,r,s){const n={};if(s&&r){const i=Tn(t,r);i.length&&(n.exception={values:[{value:e,stacktrace:{frames:i}}]}),dt(n,{synthetic:!0})}if(yn(e)){const{__sentry_template_string__:i,__sentry_template_values__:a}=e;return n.logentry={message:i,params:a},n}return n.message=e,n}function yc(t,{isUnhandledRejection:e}){const r=(function(n,i=40){const a=Object.keys(js(n));a.sort();const l=a[0];if(!l)return"[object has no keys]";if(l.length>=i)return ct(l,i);for(let d=a.length;d>0;d--){const h=a.slice(0,d).join(", ");if(!(h.length>i))return d===a.length?h:ct(h,i)}return""})(t),s=e?"promise rejection":"exception";return Ms(t)?`Event \`ErrorEvent\` captured as ${s} with message \`${t.message}\``:mr(t)?`Event \`${(function(n){try{const i=Object.getPrototypeOf(n);return i?i.constructor.name:void 0}catch{}})(t)}\` (type=${t.type}) captured as ${s}`:`Object captured as ${s} with keys: ${r}`}class bc extends ec{constructor(e){const r={parentSpanIsAlwaysRootSpan:!0,...e};(function(s,n,i=[n],a="npm"){const l=s._metadata||{};l.sdk||(l.sdk={name:`sentry.javascript.${n}`,packages:i.map((d=>({name:`${a}:@sentry/${d}`,version:He}))),version:He}),s._metadata=l})(r,"browser",["browser"],ee.SENTRY_SDK_SOURCE||"npm"),super(r),r.sendClientReports&&ee.document&&ee.document.addEventListener("visibilitychange",(()=>{ee.document.visibilityState==="hidden"&&this._flushOutcomes()}))}eventFromException(e,r){return(function(s,n,i,a){const l=Xr(s,n,i&&i.syntheticException||void 0,a);return dt(l),l.level="error",i&&i.event_id&&(l.event_id=i.event_id),et(l)})(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",s){return(function(n,i,a="info",l,d){const h=Zr(n,i,l&&l.syntheticException||void 0,d);return h.level=a,l&&l.event_id&&(h.event_id=l.event_id),et(h)})(this._options.stackParser,e,r,s,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(yr&&V.warn("SDK not enabled, will not capture user feedback."));const r=(function(s,{metadata:n,tunnel:i,dsn:a}){const l={event_id:s.event_id,sent_at:new Date().toISOString(),...n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!i&&!!a&&{dsn:or(a)}};return It(l,[(function(h){return[{type:"user_report"},h]})(s)])})(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(r)}_prepareEvent(e,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,s)}}const _c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ce=Y;let Ii,Cr,Tr,Bt;function Sc(){if(!ce.document)return;const t=_e.bind(null,"dom"),e=Di(t,!0);ce.document.addEventListener("click",e,!1),ce.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((r=>{const s=ce[r],n=s&&s.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ue(n,"addEventListener",(function(i){return function(a,l,d){if(a==="click"||a=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},g=h[a]=h[a]||{refCount:0};if(!g.handler){const _=Di(t);g.handler=_,i.call(this,a,_,d)}g.refCount++}catch{}return i.call(this,a,l,d)}})),ue(n,"removeEventListener",(function(i){return function(a,l,d){if(a==="click"||a=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},g=h[a];g&&(g.refCount--,g.refCount<=0&&(i.call(this,a,g.handler,d),g.handler=void 0,delete h[a]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,a,l,d)}})))}))}function Di(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const s=(function(i){try{return i.target}catch{return null}})(r);if((function(i,a){return i==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)})(r.type,s))return;Ze(r,"_sentryCaptured",!0),s&&!s._sentryId&&Ze(s,"_sentryId",ge());const n=r.type==="keypress"?"input":r.type;(function(i){if(i.type!==Cr)return!1;try{if(!i.target||i.target._sentryId!==Tr)return!1}catch{}return!0})(r)||(t({event:r,name:n,global:e}),Cr=r.type,Tr=s?s._sentryId:void 0),clearTimeout(Ii),Ii=ce.setTimeout((()=>{Tr=void 0,Cr=void 0}),1e3)}}function $s(t){const e="history";Qe(e,t),Ke(e,wc)}function wc(){if(!(function(){const r=Jt.chrome,s=r&&r.app&&r.app.runtime,n="history"in Jt&&!!Jt.history.pushState&&!!Jt.history.replaceState;return!s&&n})())return;const t=ce.onpopstate;function e(r){return function(...s){const n=s.length>2?s[2]:void 0;if(n){const i=Bt,a=String(n);Bt=a,_e("history",{from:i,to:a})}return r.apply(this,s)}}ce.onpopstate=function(...r){const s=ce.location.href,n=Bt;if(Bt=s,_e("history",{from:n,to:s}),t)try{return t.apply(this,r)}catch{}},ue(ce.history,"pushState",e),ue(ce.history,"replaceState",e)}const Kt={};function ji(t){Kt[t]=void 0}const kt="__sentry_xhr_v3__";function Ec(){if(!ce.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,s){const n=new Error,i=1e3*je(),a=Ie(s[0])?s[0].toUpperCase():void 0,l=(function(h){if(Ie(h))return h;try{return h.toString()}catch{}})(s[1]);if(!a||!l)return e.apply(r,s);r[kt]={method:a,url:l,request_headers:{}},a==="POST"&&l.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const d=()=>{const h=r[kt];if(h&&r.readyState===4){try{h.status_code=r.status}catch{}_e("xhr",{endTimestamp:1e3*je(),startTimestamp:i,xhr:r,virtualError:n})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply:(h,g,_)=>(d(),h.apply(g,_))}):r.addEventListener("readystatechange",d),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(h,g,_){const[C,v]=_,y=g[kt];return y&&Ie(C)&&Ie(v)&&(y.request_headers[C.toLowerCase()]=v),h.apply(g,_)}}),e.apply(r,s)}}),t.send=new Proxy(t.send,{apply(e,r,s){const n=r[kt];return n?(s[0]!==void 0&&(n.body=s[0]),_e("xhr",{startTimestamp:1e3*je(),xhr:r}),e.apply(r,s)):e.apply(r,s)}})}function kc(t,e=(function(r){const s=Kt[r];if(s)return s;let n=ce[r];if(Hr(n))return Kt[r]=n.bind(ce);const i=ce.document;if(i&&typeof i.createElement=="function")try{const a=i.createElement("iframe");a.hidden=!0,i.head.appendChild(a);const l=a.contentWindow;l&&l[r]&&(n=l[r]),i.head.removeChild(a)}catch(a){_c&&V.warn(`Could not create sandbox iframe for ${r} check, bailing to window.${r}: `,a)}return n&&(Kt[r]=n.bind(ce))})("fetch")){let r=0,s=0;return nc(t,(function(n){const i=n.body.length;r+=i,s++;const a={body:n.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:r<=6e4&&s<15,...t.fetchOptions};if(!e)return ji("fetch"),sr("No fetch implementation available");try{return e(t.url,a).then((l=>(r-=i,s--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}})))}catch(l){return ji("fetch"),r-=i,s--,sr(l)}}))}function Or(t,e,r,s){const n={filename:t,function:e==="<anonymous>"?ze:e,in_app:!0};return r!==void 0&&(n.lineno=r),s!==void 0&&(n.colno=s),n}const Cc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Tc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Oc=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ac=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Mc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Pc=(function(...t){const e=t.sort(((r,s)=>r[0]-s[0])).map((r=>r[1]));return(r,s=0,n=0)=>{const i=[],a=r.split(`
`);for(let l=s;l<a.length;l++){const d=a[l];if(d.length>1024)continue;const h=$n.test(d)?d.replace($n,"$1"):d;if(!h.match(/\S*Error: /)){for(const g of e){const _=g(h);if(_){i.push(_);break}}if(i.length>=50+n)break}}return(function(l){if(!l.length)return[];const d=Array.from(l);return/sentryWrapped/.test(Ft(d).function||"")&&d.pop(),d.reverse(),Jn.test(Ft(d).function||"")&&(d.pop(),Jn.test(Ft(d).function||"")&&d.pop()),d.slice(0,50).map((h=>({...h,filename:h.filename||Ft(d).filename,function:h.function||ze})))})(i.slice(n))}})([30,t=>{const e=Cc.exec(t);if(e){const[,s,n,i]=e;return Or(s,ze,+n,+i)}const r=Tc.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const i=Oc.exec(r[2]);i&&(r[2]=i[1],r[3]=i[2],r[4]=i[3])}const[s,n]=Li(r[1]||ze,r[2]);return Or(n,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,t=>{const e=Ac.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const n=Mc.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}let r=e[3],s=e[1]||ze;return[s,r]=Li(s,r),Or(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),Li=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,s=t.indexOf("safari-web-extension")!==-1;return r||s?[t.indexOf("@")!==-1?t.split("@")[0]:ze,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Ni=1024,Ic=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(r){var s;e.console&&(function(n){const i="console";Qe(i,n),Ke(i,lc)})((function(n){return function(i){if(ie()!==n)return;const a={category:"console",data:{arguments:i.args,logger:"console"},level:uc(i.level),message:zn(i.args," ")};if(i.level==="assert"){if(i.args[0]!==!1)return;a.message=`Assertion failed: ${zn(i.args.slice(1)," ")||"console.assert"}`,a.data.arguments=i.args.slice(1)}Be(a,{input:i.args,level:i.level})}})(r)),e.dom&&(s=(function(n,i){return function(a){if(ie()!==n)return;let l,d,h=typeof i=="object"?i.serializeAttribute:void 0,g=typeof i=="object"&&typeof i.maxStringLength=="number"?i.maxStringLength:void 0;g&&g>Ni&&(yr&&V.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${g} was configured. Sentry will use 1024 instead.`),g=Ni),typeof h=="string"&&(h=[h]);try{const C=a.event,v=(function(y){return!!y&&!!y.target})(C)?C.target:C;l=Is(v,{keyAttrs:h,maxStringLength:g}),d=(function(y){if(!bn.HTMLElement)return null;let f=y;for(let b=0;b<5;b++){if(!f)return null;if(f instanceof HTMLElement){if(f.dataset.sentryComponent)return f.dataset.sentryComponent;if(f.dataset.sentryElement)return f.dataset.sentryElement}f=f.parentNode}return null})(v)}catch{l="<unknown>"}if(l.length===0)return;const _={category:`ui.${a.name}`,message:l};d&&(_.data={"ui.component_name":d}),Be(_,{event:a.event,name:a.name,global:a.global})}})(r,e.dom),Qe("dom",s),Ke("dom",Sc)),e.xhr&&(function(n){Qe("xhr",n),Ke("xhr",Ec)})((function(n){return function(i){if(ie()!==n)return;const{startTimestamp:a,endTimestamp:l}=i,d=i.xhr[kt];if(!a||!l||!d)return;const{method:h,url:g,status_code:_,body:C}=d,v={method:h,url:g,status_code:_},y={xhr:i.xhr,input:C,startTimestamp:a,endTimestamp:l};Be({category:"xhr",data:v,type:"http",level:Ai(_)},y)}})(r)),e.fetch&&pc((function(n){return function(i){if(ie()!==n)return;const{startTimestamp:a,endTimestamp:l}=i;if(l&&(!i.fetchData.url.match(/sentry_key/)||i.fetchData.method!=="POST"))if(i.error)Be({category:"fetch",data:i.fetchData,level:"error",type:"http"},{data:i.error,input:i.args,startTimestamp:a,endTimestamp:l});else{const d=i.response,h={...i.fetchData,status_code:d&&d.status},g={input:i.args,response:d,startTimestamp:a,endTimestamp:l};Be({category:"fetch",data:h,type:"http",level:Ai(h.status_code)},g)}}})(r)),e.history&&$s((function(n){return function(i){if(ie()!==n)return;let a=i.from,l=i.to;const d=wr(ee.location.href);let h=a?wr(a):void 0;const g=wr(l);h&&h.path||(h=d),d.protocol===g.protocol&&d.host===g.host&&(l=g.relative),d.protocol===h.protocol&&d.host===h.host&&(a=h.relative),Be({category:"navigation",data:{from:a,to:l}})}})(r)),e.sentry&&r.on("beforeSendEvent",(function(n){return function(i){ie()===n&&Be({category:"sentry."+(i.type==="transaction"?"transaction":"event"),event_id:i.event_id,level:i.level,message:xe(i)},{event:i})}})(r))}}},Dc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],jc=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&ue(ee,"setTimeout",Ri),e.setInterval&&ue(ee,"setInterval",Ri),e.requestAnimationFrame&&ue(ee,"requestAnimationFrame",Lc),e.XMLHttpRequest&&"XMLHttpRequest"in ee&&ue(XMLHttpRequest.prototype,"send",Nc);const r=e.eventTarget;r&&(Array.isArray(r)?r:Dc).forEach(Rc)}}};function Ri(t){return function(...e){const r=e[0];return e[0]=ft(r,{mechanism:{data:{function:qe(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Lc(t){return function(e){return t.apply(this,[ft(e,{mechanism:{data:{function:"requestAnimationFrame",handler:qe(t)},handled:!1,type:"instrument"}})])}}function Nc(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((s=>{s in r&&typeof r[s]=="function"&&ue(r,s,(function(n){const i={mechanism:{data:{function:s,handler:qe(n)},handled:!1,type:"instrument"}},a=_n(n);return a&&(i.mechanism.data.handler=qe(a)),ft(n,i)}))})),t.apply(this,e)}}function Rc(t){const e=ee[t],r=e&&e.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(ue(r,"addEventListener",(function(s){return function(n,i,a){try{typeof i.handleEvent=="function"&&(i.handleEvent=ft(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qe(i),target:t},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[n,ft(i,{mechanism:{data:{function:"addEventListener",handler:qe(i),target:t},handled:!1,type:"instrument"}}),a])}})),ue(r,"removeEventListener",(function(s){return function(n,i,a){try{const l=i.__sentry_wrapped__;l&&s.call(this,n,l,a)}catch{}return s.call(this,n,i,a)}})))}const xc=()=>({name:"BrowserSession",setupOnce(){ee.document!==void 0?(hi({ignoreDuration:!0}),pi(),$s((({from:t,to:e})=>{t!==void 0&&t!==e&&(hi({ignoreDuration:!0}),pi())}))):yr&&V.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),Fc=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&((function(s){(function(n){const i="error";Qe(i,n),Ke(i,Aa)})((n=>{const{stackParser:i,attachStacktrace:a}=Fi();if(ie()!==s||Pi())return;const{msg:l,url:d,line:h,column:g,error:_}=n,C=(function(v,y,f,b){const E=v.exception=v.exception||{},M=E.values=E.values||[],I=M[0]=M[0]||{},w=I.stacktrace=I.stacktrace||{},S=w.frames=w.frames||[],T=b,D=f,N=Ie(y)&&y.length>0?y:(function(){try{return bn.document.location.href}catch{return""}})();return S.length===0&&S.push({colno:T,filename:N,function:ze,in_app:!0,lineno:D}),v})(Xr(i,_||l,void 0,a,!1),d,h,g);C.level="error",di(C,{originalException:_,mechanism:{handled:!1,type:"onerror"}})}))})(r),xi("onerror")),e.onunhandledrejection&&((function(s){(function(n){const i="unhandledrejection";Qe(i,n),Ke(i,Ma)})((n=>{const{stackParser:i,attachStacktrace:a}=Fi();if(ie()!==s||Pi())return;const l=(function(h){if(Vr(h))return h;try{if("reason"in h)return h.reason;if("detail"in h&&"reason"in h.detail)return h.detail.reason}catch{}return h})(n),d=Vr(l)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(l)}`}]}}:Xr(i,l,void 0,a,!0);d.level="error",di(d,{originalException:l,mechanism:{handled:!1,type:"onunhandledrejection"}})}))})(r),xi("onunhandledrejection"))}}};function xi(t){yr&&V.log(`Global Handler attached: ${t}`)}function Fi(){const t=ie();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const qc=()=>({name:"HttpContext",preprocessEvent(t){if(!ee.navigator&&!ee.location&&!ee.document)return;const e=t.request&&t.request.url||ee.location&&ee.location.href,{referrer:r}=ee.document||{},{userAgent:s}=ee.navigator||{},n={...t.request&&t.request.headers,...r&&{Referer:r},...s&&{"User-Agent":s}},i={...t.request,...e&&{url:e},headers:n};t.request=i}}),Vc=(t={})=>{const e=t.limit||5,r=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(s,n,i){const a=i.getOptions();cc(Cn,a.stackParser,a.maxValueLength,r,e,s,n)}}};var en="new",qi="loading",Vi="loaded",ar="joining-meeting",Fe="joined-meeting",Re="left-meeting",Ae="error",Uc="blocked",$c="off",Jc="sendable",Bc="loading",Gc="interrupted",Js="playable",Xt="unknown",Bs="full",Yc="lobby",Wc="none",Gs="base",zc="*",Hc="ejected",Qc="nbf-room",Kc="nbf-token",Xc="exp-room",Zc="exp-token",tn="no-room",el="meeting-full",Ys="end-of-life",tl="not-allowed",Ws="connection-error",rl="cam-in-use",nl="mic-in-use",il="cam-mic-in-use",sl="permissions",ol="undefined-mediadevices",al="not-found",cl="constraints",ll="unknown",zs="iframe-ready-for-launch-config",Hs="iframe-launch-config",Qs="theme-updated",Ks="loading",Xs="load-attempt-failed",rn="loaded",Zs="started-camera",eo="camera-error",to="joining-meeting",ro="joined-meeting",no="left-meeting",io="participant-joined",so="participant-updated",oo="participant-left",ao="participant-counts-updated",co="access-state-updated",lo="meeting-session-summary-updated",uo="meeting-session-state-updated",ul="meeting-session-data-error",ho="waiting-participant-added",po="waiting-participant-updated",fo="waiting-participant-removed",mo="track-started",go="track-stopped",vo="transcription-started",yo="transcription-stopped",bo="transcription-error",nn="recording-started",sn="recording-stopped",_o="recording-stats",So="recording-error",wo="recording-upload-completed",Eo="recording-data",ko="app-message",Co="transcription-message",To="remote-media-player-started",Oo="remote-media-player-updated",Ao="remote-media-player-stopped",Mo="local-screen-share-started",Po="local-screen-share-stopped",Io="local-screen-share-canceled",Do="active-speaker-change",jo="active-speaker-mode-change",Lo="network-quality-change",No="network-connection",Ro="cpu-load-change",xo="face-counts-updated",Ct="fullscreen",Tt="exited-fullscreen",Fo="live-streaming-started",qo="live-streaming-updated",Vo="live-streaming-stopped",Uo="live-streaming-error",$o="lang-updated",Jo="receive-settings-updated",on="input-settings-updated",an="nonfatal-error",cn="error",Ar=4096,Ui=102400,Mr="iframe-call-message",$i="local-screen-start",Ji="daily-method-update-live-streaming-endpoints",Gt="transmit-log",De="daily-custom-track",Zt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Bo={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},ln={PLAY:"play",PAUSE:"pause"},Pr=["jpg","png","jpeg"],dl="add-endpoints",hl="remove-endpoints",Bi="sip-call-transfer";function ve(){return!J()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function J(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Go(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function pl(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&((function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0})(tt(),cr())||J())}function Gi(){if(J()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var un="none",fl="software",ml="hardware",gl=(function(){try{var t,e=document.createElement("canvas"),r=!1;(t=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(r=!0,t=e.getContext("webgl2"));var s=t!=null;return e.remove(),s?r?fl:ml:un}catch{return un}})();function Yo(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!J()&&gl!==un&&(t?(function(){return Yi()?!1:["Chrome","Firefox"].includes(tt())})():(function(){if(Yi())return!1;var e=tt();if(e==="Safari"){var r=An();if(r.major<15||r.major===15&&r.minor<4)return!1}return e==="Chrome"?On().major>=77:e==="Firefox"?Mn().major>=97:["Chrome","Firefox","Safari"].includes(e)})())}function Wo(){if(J()||zo()||typeof AudioWorkletNode>"u")return!1;switch(tt()){case"Chrome":case"Firefox":return!0;case"Safari":var t=cr();return t.major>17||t.major===17&&t.minor>=4}return!1}function Ir(){return Go()&&typeof MediaStreamTrack<"u"&&!(function(){var t,e=tt();if(!ve())return!0;switch(e){case"Chrome":return(t=On()).major&&t.major>0&&t.major<75;case"Firefox":return(t=Mn()).major<91;case"Safari":return(t=An()).major<13||t.major===13&&t.minor<1;default:return!0}})()}function zo(){return ve().match(/Linux; Android/)}function Yi(){var t,e=ve(),r=e.match(/Mac/)&&(!J()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(t=t.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||r)||!!ve().match(/DailyAnd\//)||void 0}function tt(){if(typeof window<"u"){var t=ve();return Ho()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||Qo()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function cr(){switch(tt()){case"Chrome":return On();case"Safari":return An();case"Firefox":return Mn();case"Edge":return(function(){var t=0,e=0;if(typeof window<"u"){var r=ve().match(/Edge\/(\d+).(\d+)/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2])}catch{}}return{major:t,minor:e}})()}}function On(){var t=0,e=0,r=0,s=0,n=!1;if(typeof window<"u"){var i=ve(),a=i.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{t=parseInt(a[1]),e=parseInt(a[2]),r=parseInt(a[3]),s=parseInt(a[4]),n=i.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:r,patch:s,opera:n}}function Ho(){return!!ve().match(/iPad|iPhone|iPod/i)&&Go()}function Qo(){return ve().indexOf("AppleWebKit/605.1.15")>-1}function An(){var t=0,e=0,r=0;if(typeof window<"u"){var s=ve().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(s)try{t=parseInt(s[1]),e=parseInt(s[2]),r=parseInt(s[4])}catch{}else(Ho()||Qo())&&(t=14,e=0,r=3)}return{major:t,minor:e,point:r}}function Mn(){var t=0,e=0;if(typeof window<"u"){var r=ve().match(/Firefox\/(\d+).(\d+)/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2])}catch{}}return{major:t,minor:e}}var Ko=(function(){return he((function t(){de(this,t)}),[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,r){St()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,r){St()}},{key:"sendMessageToCallMachine",value:function(t,e,r,s){St()}},{key:"sendMessageToDailyJs",value:function(t,e){St()}},{key:"removeListener",value:function(t){St()}}])})();function Wi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,s)}return r}function Dr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wi(Object(r),!0).forEach((function(s){Te(t,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))}))}return t}function Xo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Xo=function(){return!!t})()}var vl=(function(){function t(){var e,r,s,n;return de(this,t),r=this,s=Se(s=t),(e=dr(r,Xo()?Reflect.construct(s,[],Se(r).constructor):s.apply(r,n)))._wrappedListeners={},e._messageCallbacks={},e}return hr(t,Ko),he(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,r,s){var n=this,i=function(a){if(a.data&&a.data.what==="iframe-call-message"&&(!a.data.callClientId||a.data.callClientId===r)&&(!a.data.from||a.data.from!=="module")){var l=Dr({},a.data);if(delete l.from,l.callbackStamp&&n._messageCallbacks[l.callbackStamp]){var d=l.callbackStamp;n._messageCallbacks[d].call(s,l),delete n._messageCallbacks[d]}delete l.what,delete l.callbackStamp,e.call(s,l)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,r,s){var n=function(i){var a;if(!(!i.data||i.data.what!==Mr||!i.data.action||i.data.from&&i.data.from!=="module"||i.data.callClientId&&r&&i.data.callClientId!==r||i!=null&&(a=i.data)!==null&&a!==void 0&&a.callFrameId)){var l=i.data;e.call(s,l)}};this._wrappedListeners[e]=n,window.addEventListener("message",n)}},{key:"sendMessageToCallMachine",value:function(e,r,s,n){if(!s)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var i=Dr({},e);if(i.what=Mr,i.from="module",i.callClientId=s,r){var a=pr();this._messageCallbacks[a]=r,i.callbackStamp=a}var l=n?n.contentWindow:window,d=this._callMachineTargetOrigin(n);d&&l.postMessage(i,d)}},{key:"sendMessageToDailyJs",value:function(e,r){e.what=Mr,e.callClientId=r,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var r=this._wrappedListeners[e];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,r,s){var n=Dr({},e);n.callClientId=s;var i=r?r.contentWindow:window,a=this._callMachineTargetOrigin(r);a&&i.postMessage(n,a)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,r){var s=function(n){if(n.data&&n.data.what==="iframe-call-message"&&(!n.data.callClientId||n.data.callClientId===r)&&(!n.data.from||n.data.from!=="module")){var i=n.data;e(i)}};return this._wrappedListeners[e]=s,window.addEventListener("message",s),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var r=this._wrappedListeners[e];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])})();function zi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,s)}return r}function Zo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Zo=function(){return!!t})()}var yl=(function(){function t(){var e,r,s,n;return de(this,t),r=this,s=Se(s=t),e=dr(r,Zo()?Reflect.construct(s,[],Se(r).constructor):s.apply(r,n)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Fr.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Fr.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return hr(t,Ko),he(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,r,s){this._addListener(e,global.callMachineToDailyJsEmitter,r,s,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,r,s){this._addListener(e,global.dailyJsToCallMachineEmitter,r,s,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,r,s){this._sendMessage(e,global.dailyJsToCallMachineEmitter,s,r,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,r){this._sendMessage(e,global.callMachineToDailyJsEmitter,r,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var r=this._wrappedListeners[e];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,r,s,n,i){var a=this,l=function(d){if(d.callClientId===s){if(d.callbackStamp&&a._messageCallbacks[d.callbackStamp]){var h=d.callbackStamp;a._messageCallbacks[h].call(n,d),delete a._messageCallbacks[h]}e.call(n,d)}};this._wrappedListeners[e]=l,r.addListener("message",l)}},{key:"_sendMessage",value:function(e,r,s,n,i){var a=(function(d){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?zi(Object(g),!0).forEach((function(_){Te(d,_,g[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):zi(Object(g)).forEach((function(_){Object.defineProperty(d,_,Object.getOwnPropertyDescriptor(g,_))}))}return d})({},e);if(a.callClientId=s,n){var l=pr();this._messageCallbacks[l]=n,a.callbackStamp=l}r.emit("message",a)}}])})(),dn="replace",hn="shallow-merge",Hi=[dn,hn],bl=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.data,s=e.mergeStrategy,n=s===void 0?dn:s;de(this,t),t._validateMergeStrategy(n),t._validateData(r,n),this.mergeStrategy=n,this.data=r}return he(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,r){return Object.keys(e).length===0&&r===hn}},{key:"_validateMergeStrategy",value:function(e){if(!Hi.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Hi,"]"))}},{key:"_validateData",value:function(e,r){if(!(function(l){if(l==null||G(l)!=="object")return!1;var d=Object.getPrototypeOf(l);return d==null||d===Object.prototype})(e))throw Error("Meeting session data must be a plain (map-like) object");var s;try{if(s=JSON.stringify(e),r===dn){var n=JSON.parse(s);ae(n,e)||console.warn("The meeting session data provided will be modified when serialized.",n,e)}else if(r===hn){for(var i in e)if(Object.hasOwnProperty.call(e,i)&&e[i]!==void 0){var a=JSON.parse(JSON.stringify(e[i]));ae(e[i],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,e[i])}}}catch(l){throw Error("Meeting session data must be serializable to JSON: ".concat(l))}if(s.length>Ui)throw Error("Meeting session data is too large (".concat(s.length," characters). Maximum size suppported is ").concat(Ui,"."))}}])})();function ea(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ea=function(){return!!t})()}function pn(t){var e=typeof Map=="function"?new Map:void 0;return pn=function(r){if(r===null||!(function(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}})(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return(function(n,i,a){if(ea())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,i);var d=new(n.bind.apply(n,l));return a&&Pt(d,a.prototype),d})(r,arguments,Se(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Pt(s,r)},pn(t)}function ta(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ta=function(){return!!t})()}function Qi(t){var e,r=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(r){var s=r.indexOf(t);s!==-1&&r.splice(s,1)}}var _l=(function(){return he((function t(e){de(this,t),this._currentLoad=null,this._callClientId=e}),[{key:"load",value:function(){var t,e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void s(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Sl(r,(function(){s(!1)}),(function(i,a){a||Qi(e._callClientId),n(i,a)})),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Qi(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])})(),Sl=(function(){return he((function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;de(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=r,this._failureCallback=s}),[{key:"start",value:function(){var t=this;if(!this._currentAttempt){var e=function(r){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(r,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout((function(){t._currentAttempt.cancelled||(t._currentAttempt=new Ki(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())}),3e3))};this._currentAttempt=new Ki(this._dailyConfig,this._successCallback,e),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])})(),jr=(function(){function t(){return de(this,t),e=this,s=arguments,r=Se(r=t),dr(e,ta()?Reflect.construct(r,s||[],Se(e).constructor):r.apply(e,s));var e,r,s}return hr(t,pn(Error)),he(t)})(),lr=2e4,Ki=(function(){return he((function e(r,s,n){de(this,e),this._loadAttemptImpl=J()||!r.avoidEval?new wl(r,s,n):new El(r,s,n)}),[{key:"start",value:(t=q((function*(){return this._loadAttemptImpl.start()})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var t})(),wl=(function(){return he((function n(i,a,l){de(this,n),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=i,this._successCallback=a,this._failureCallback=l}),[{key:"start",value:(s=q((function*(){var n=tr(this._dailyConfig);!(yield this._tryLoadFromIOSCache(n))&&this._loadFromNetwork(n)})),function(){return s.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=q((function*(n){if(!this._iosCache)return!1;try{var i=yield this._iosCache.get(n);return!!this.cancelled||!!i&&(i.code?(Function('"use strict";'+i.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=i.refetchHeaders,!1))}catch{return!1}})),function(n){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=q((function*(n){var i=this;this._networkTimeout=setTimeout((function(){i._networkTimedOut=!0,i._failureCallback({msg:"Timed out (>".concat(lr," ms) when loading call object bundle ").concat(n),type:"timeout"})}),lr);try{var a=this._refetchHeaders?{headers:this._refetchHeaders}:{},l=yield fetch(n,a);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new jr;var d=yield this._getBundleCodeFromResponse(n,l);if(this.cancelled)throw new jr;Function('"use strict";'+d)(),this._iosCache&&this._iosCache.set(n,d,l.headers),this.succeeded=!0,this._successCallback()}catch(h){if(clearTimeout(this._networkTimeout),h instanceof jr||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(n,": ").concat(h),type:h.message})}})),function(n){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=q((function*(n,i){if(i.ok)return yield i.text();if(this._iosCache&&i.status===304)return(yield this._iosCache.renew(n,i.headers)).code;throw new Error("Received ".concat(i.status," response"))})),function(n,i){return t.apply(this,arguments)})}]);var t,e,r,s})(),El=(function(){return he((function t(e,r,s){de(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=r,this._failureCallback=s,this._attemptId=pr(),this._networkTimeout=null,this._scriptElement=null}),[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=tr(this._dailyConfig);(typeof document>"u"?"undefined":G(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout((function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(lr," ms) when loading call object bundle ").concat(t),type:"timeout"})}),lr);var r=document.getElementsByTagName("head")[0],s=document.createElement("script");this._scriptElement=s,s.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},s.onerror=function(n){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(n.target.src),type:n.message})},s.src=t,r.appendChild(s)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])})(),Yt=function(t,e,r){return Cl(t.local,e,r)===!0},kl=function(t,e,r){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(r==="video"?"Video":"Audio","Tracks")]()[0]},at=function(t,e,r,s){var n=Tl(t,e,r,s);return n&&n.pendingTrack},Cl=function(t,e,r){if(!t)return!1;var s=function(i){switch(i){case"avatar":return!0;case"staged":return i;default:return!!i}},n=t.public.subscribedTracks;return n&&n[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(r)===-1&&n[e].custom?[!0,"staged"].includes(n[e].custom)?s(n[e].custom):s(n[e].custom[r]):s(n[e][r]):!n||s(n.ALL)},Tl=function(t,e,r,s){var n=Object.values(t.streams||{}).filter((function(i){return i.participantId===e&&i.type===r&&i.pendingTrack&&i.pendingTrack.kind===s})).sort((function(i,a){return new Date(a.starttime)-new Date(i.starttime)}));return n&&n[0]},Ol=function(t,e){var r=t.local.public.customTracks;if(r&&r[e])return r[e].track};function Xi(t,e){for(var r=e.getState(),s=0,n=["cam","screen"];s<n.length;s++)for(var i=n[s],a=0,l=["video","audio"];a<l.length;a++){var d=l[a],h=i==="cam"?d:"screen".concat(d.charAt(0).toUpperCase()+d.slice(1)),g=t.tracks[h];if(g){var _=t.local?kl(r,i,d):at(r,t.session_id,i,d);g.state==="playable"&&(g.track=_),g.persistentTrack=_}}}function Zi(t,e){try{var r=e.getState();for(var s in t.tracks)if(!Al(s)){var n=t.tracks[s].kind;if(n){var i=t.tracks[s];if(i){var a=t.local?Ol(r,s):at(r,t.session_id,s,n);i.state==="playable"&&(t.tracks[s].track=a),i.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(l){console.error(l)}}function Al(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function es(t,e,r){var s=r.getState();if(t.local){if(t.audio)try{t.audioTrack=s.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=s.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=s.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=s.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var n=!0;try{var i=s.participants[t.session_id];i&&i.public&&i.public.rtcType&&i.public.rtcType.impl==="peer-to-peer"&&i.private&&!["connected","completed"].includes(i.private.peeringState)&&(n=!1)}catch(g){console.error(g)}if(!n)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(s.streams,t.audio&&Yt(s,t.session_id,"cam-audio")){var a=at(s,t.session_id,"cam","audio");a&&(e&&e.audioTrack&&e.audioTrack.id===a.id?t.audioTrack=a:a.muted||(t.audioTrack=a)),t.audioTrack||(t.audio=!1)}if(t.video&&Yt(s,t.session_id,"cam-video")){var l=at(s,t.session_id,"cam","video");l&&(e&&e.videoTrack&&e.videoTrack.id===l.id?t.videoTrack=l:l.muted||(t.videoTrack=l)),t.videoTrack||(t.video=!1)}if(t.screen&&Yt(s,t.session_id,"screen-audio")){var d=at(s,t.session_id,"screen","audio");d&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===d.id?t.screenAudioTrack=d:d.muted||(t.screenAudioTrack=d))}if(t.screen&&Yt(s,t.session_id,"screen-video")){var h=at(s,t.session_id,"screen","video");h&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===h.id?t.screenVideoTrack=h:h.muted||(t.screenVideoTrack=h))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(g){console.error("unexpected error matching up tracks",g)}}}function Ml(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(function(d,h){if(d){if(typeof d=="string")return ts(d,h);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?ts(d,h):void 0}})(t))||e){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var d=r.next();return a=d.done,d},e:function(d){l=!0,i=d},f:function(){try{a||r.return==null||r.return()}finally{if(l)throw i}}}}function ts(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}var ke=new Map,lt=null;function Pl(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(function(d,h){if(d){if(typeof d=="string")return rs(d,h);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?rs(d,h):void 0}})(t))||e){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var d=r.next();return a=d.done,d},e:function(d){l=!0,i=d},f:function(){try{a||r.return==null||r.return()}finally{if(l)throw i}}}}function rs(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}var Ce=new Map,At=null;function Il(t){ra()?(function(e){ke.has(e)||(ke.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(r){ke.has(e)&&(ke.get(e).lastDevicesString=JSON.stringify(r),lt||(lt=(function(){var s=q((function*(){var n,i=yield navigator.mediaDevices.enumerateDevices(),a=Ml(ke.keys());try{for(a.s();!(n=a.n()).done;){var l=n.value,d=JSON.stringify(i);d!==ke.get(l).lastDevicesString&&(ke.get(l).lastDevicesString=d,l(i))}}catch(h){a.e(h)}finally{a.f()}}));return function(){return s.apply(this,arguments)}})(),navigator.mediaDevices.addEventListener("devicechange",lt)))})).catch((function(){})))})(t):(function(e){Ce.has(e)||(Ce.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(r){Ce.has(e)&&(Ce.get(e).lastDevicesString=JSON.stringify(r),At||(At=setInterval(q((function*(){var s,n=yield navigator.mediaDevices.enumerateDevices(),i=Pl(Ce.keys());try{for(i.s();!(s=i.n()).done;){var a=s.value,l=JSON.stringify(n);l!==Ce.get(a).lastDevicesString&&(Ce.get(a).lastDevicesString=l,a(n))}}catch(d){i.e(d)}finally{i.f()}})),3e3)))})))})(t)}function Dl(t){ra()?(function(e){ke.has(e)&&(ke.delete(e),ke.size===0&&lt&&(navigator.mediaDevices.removeEventListener("devicechange",lt),lt=null))})(t):(function(e){Ce.has(e)&&(Ce.delete(e),Ce.size===0&&At&&(clearInterval(At),At=null))})(t)}function ra(){var t;return J()||((t=navigator.mediaDevices)===null||t===void 0?void 0:t.ondevicechange)!==void 0}var jl=new Set;function Ll(t,e){return t&&t.readyState==="live"&&!(function(r,s){return r.muted&&!jl.has(r.id)})(t)}function ns(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,s)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ns(Object(r),!0).forEach((function(s){Te(t,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ns(Object(r)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))}))}return t}var Ot=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),Nl=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),Mt=Object.values(Ot),is=["v","a","sv","sa","cv","ca"];Object.freeze(Mt.reduce((function(t,e,r){return t[e]=is[r],t}),{})),Object.freeze(is.reduce((function(t,e,r){return t[e]=Mt[r],t}),{}));var Rl=[Ot.VIDEO,Ot.AUDIO,Ot.SCREEN_VIDEO,Ot.SCREEN_AUDIO],ss=Object.values(Nl),os=["p","s","t"];Object.freeze(ss.reduce((function(t,e,r){return t[e]=os[r],t}),{})),Object.freeze(os.reduce((function(t,e,r){return t[e]=ss[r],t}),{}));var na=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.base,s=e.byUserId,n=e.byParticipantId;de(this,t),this.base=r,this.byUserId=s,this.byParticipantId=n}return he(t,[{key:"clone",value:function(){var e=new t;if(this.base instanceof te?e.base=this.base.clone():e.base=this.base,this.byUserId!==void 0)for(var r in e.byUserId={},this.byUserId){var s=this.byUserId[r];e.byUserId[r]=s instanceof te?s.clone():s}if(this.byParticipantId!==void 0)for(var n in e.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[n];e.byParticipantId[n]=i instanceof te?i.clone():i}return e}},{key:"toJSONObject",value:function(){var e={};if(typeof this.base=="boolean"?e.base=this.base:this.base instanceof te&&(e.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var r in e.byUserId={},this.byUserId){var s=this.byUserId[r];e.byUserId[r]=s instanceof te?s.toJSONObject():s}if(this.byParticipantId!==void 0)for(var n in e.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[n];e.byParticipantId[n]=i instanceof te?i.toJSONObject():i}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(this.base!==void 0&&(typeof this.base=="boolean"?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var r in e.u={},this.byUserId){var s=this.byUserId[r];e.u[r]=typeof s=="boolean"?s:s.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var n in e.p={},this.byParticipantId){var i=this.byParticipantId[n];e.p[n]=typeof i=="boolean"?i:i.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof te&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map((function(e){var r=se(e,2),s=r[0],n=r[1];return[s,n instanceof te?n.normalize():n]})))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map((function(e){var r=se(e,2),s=r[0],n=r[1];return[s,n instanceof te?n.normalize():n]})))),this}}],[{key:"fromJSONObject",value:function(e){var r,s,n;if(e.base!==void 0&&(r=typeof e.base=="boolean"?e.base:te.fromJSONObject(e.base)),e.byUserId!==void 0)for(var i in s={},e.byUserId){var a=e.byUserId[i];s[i]=typeof a=="boolean"?a:te.fromJSONObject(a)}if(e.byParticipantId!==void 0)for(var l in n={},e.byParticipantId){var d=e.byParticipantId[l];n[l]=typeof d=="boolean"?d:te.fromJSONObject(d)}return new t({base:r,byUserId:s,byParticipantId:n})}},{key:"fromMinifiedJSONObject",value:function(e){var r,s,n;if(e.b!==void 0&&(r=typeof e.b=="boolean"?e.b:te.fromMinifiedJSONObject(e.b)),e.u!==void 0)for(var i in s={},e.u){var a=e.u[i];s[i]=typeof a=="boolean"?a:te.fromMinifiedJSONObject(a)}if(e.p!==void 0)for(var l in n={},e.p){var d=e.p[l];n[l]=typeof d=="boolean"?d:te.fromMinifiedJSONObject(d)}return new t({base:r,byUserId:s,byParticipantId:n})}},{key:"validateJSONObject",value:function(e){if(G(e)!=="object")return[!1,"canReceive must be an object"];for(var r=["base","byUserId","byParticipantId"],s=0,n=Object.keys(e);s<n.length;s++){var i=n[s];if(!r.includes(i))return[!1,"canReceive can only contain keys (".concat(r.join(", "),")")];if(i==="base"){var a=se(te.validateJSONObject(e.base,!0),2),l=a[0],d=a[1];if(!l)return[!1,d]}else{if(G(e[i])!=="object")return[!1,"invalid (non-object) value for field '".concat(i,"' in canReceive")];for(var h=0,g=Object.values(e[i]);h<g.length;h++){var _=g[h],C=se(te.validateJSONObject(_),2),v=C[0],y=C[1];if(!v)return[!1,y]}}}return[!0]}}])})(),te=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.video,s=e.audio,n=e.screenVideo,i=e.screenAudio,a=e.customVideo,l=e.customAudio;de(this,t),this.video=r,this.audio=s,this.screenVideo=n,this.screenAudio=i,this.customVideo=a,this.customAudio=l}return he(t,[{key:"clone",value:function(){var e=new t;return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Le({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Le({},this.customAudio)),e}},{key:"toJSONObject",value:function(){var e={};return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Le({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Le({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return this.video!==void 0&&(e.v=this.video),this.audio!==void 0&&(e.a=this.audio),this.screenVideo!==void 0&&(e.sv=this.screenVideo),this.screenAudio!==void 0&&(e.sa=this.screenAudio),this.customVideo!==void 0&&(e.cv=Le({},this.customVideo)),this.customAudio!==void 0&&(e.ca=Le({},this.customAudio)),e}},{key:"normalize",value:function(){function e(r,s){return r&&Object.keys(r).length===1&&r["*"]===s}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(e){return new t({video:e,audio:e,screenVideo:e,screenAudio:e,customVideo:{"*":e},customAudio:{"*":e}})}},{key:"fromJSONObject",value:function(e){return new t({video:e.video,audio:e.audio,screenVideo:e.screenVideo,screenAudio:e.screenAudio,customVideo:e.customVideo!==void 0?Le({},e.customVideo):void 0,customAudio:e.customAudio!==void 0?Le({},e.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(e){return new t({video:e.v,audio:e.a,screenVideo:e.sv,screenAudio:e.sa,customVideo:e.cv,customAudio:e.ca})}},{key:"validateJSONObject",value:function(e,r){if(typeof e=="boolean")return[!0];if(G(e)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var s=Object.keys(e),n=0,i=s;n<i.length;n++){var a=i[n];if(!Mt.includes(a))return[!1,"invalid media type '".concat(a,"' in canReceive")];if(Rl.includes(a)){if(typeof e[a]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(a,"' in canReceive")]}else{if(G(e[a])!=="object")return[!1,"invalid (non-object) value for media type '".concat(a,"' in canReceive")];for(var l=0,d=Object.values(e[a]);l<d.length;l++)if(typeof d[l]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(a,"' in canReceive")];if(r&&e[a]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(a,"'")]}}return r&&s.length!==Mt.length?[!1,'canReceive "base" permission must specify all media types: '.concat(Mt.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])})(),xl=["result"],Fl=["preserveIframe"];function as(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,s)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?as(Object(r),!0).forEach((function(s){Te(t,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):as(Object(r)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))}))}return t}function ia(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ia=function(){return!!t})()}function cs(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(function(d,h){if(d){if(typeof d=="string")return ls(d,h);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?ls(d,h):void 0}})(t))||e){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var d=r.next();return a=d.done,d},e:function(d){l=!0,i=d},f:function(){try{a||r.return==null||r.return()}finally{if(l)throw i}}}}function ls(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}var Ge={},us="video",ql="voice",ds=J()?{data:{}}:{data:{},topology:"none"},hs={present:0,hidden:0},sa={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Lr=Object.keys(sa),ps=["state","volume","simulcastEncodings"],fs={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},ur={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},fn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Ye={customIntegrations:{validate:pa,help:da()},customTrayButtons:{validate:ha,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(ur))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(r){console.error("Failed to validate dailyConfig",r)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return fa(t,fs)},help:"reactNativeConfig should look like ".concat(JSON.stringify(fs),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return oa(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalVideo=t,!0;var r;if(t instanceof MediaStreamTrack)e._sharedTracks.videoTrack=t,r={customTrack:De};else{if(delete e._sharedTracks.videoTrack,typeof t!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;r={deviceId:t}}return e._updatePreloadCacheInputSettings({video:{settings:r}},!1),!0}},audioSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalAudio=t,!0;var r;if(t instanceof MediaStreamTrack)e._sharedTracks.audioTrack=t,r={customTrack:De};else{if(delete e._sharedTracks.audioTrack,typeof t!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;r={deviceId:t}}return e._updatePreloadCacheInputSettings({audio:{settings:r}},!1),!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],r=function(s){for(var n=0,i=Object.keys(s);n<i.length;n++){var a=i[n];if(!e.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(e.join(", "))),!1;if(!s[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(s[a],'"')),!1}return!0};return G(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?r(t.light.colors)&&r(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):r(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return aa(t,{allowAllParticipantsKey:!1})},help:ua({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!(function(r,s){try{return s.validateUpdateSendSettings(r),!0}catch(n){return console.error("Failed to validate send settings",n),!1}})(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var r;return!!ca(t)&&(e._inputSettings||(e._inputSettings={}),la(t,(r=e.properties)===null||r===void 0?void 0:r.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(t,!0),!0)},help:mn()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Wt={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var r in t.cam)if(r!=="div"&&r!=="video")return!1}if(t.screen){for(var s in t.screen)if(s!=="div"&&s!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var r=[!0,!1,"staged"];if(r.includes(t)||!J()&&t==="avatar")return!0;var s=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],n=function(i){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in i)if(l==="custom"){if(!r.includes(i[l])&&!n(i[l],!0))return!1}else{var d=!a&&!s.includes(l),h=!r.includes(i[l]);if(d||h)return!1}return!0};return n(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(J()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var s=se(r[e],2),n=s[0],i=s[1];switch(n){case"hasPresence":if(typeof i!="boolean")return!1;break;case"canSend":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var a,l=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],d=cs(i);try{for(d.s();!(a=d.n()).done;){var h=a.value;if(!l.includes(h))return!1}}catch(E){d.e(E)}finally{d.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(t.canSend=new Set(i));break;case"canReceive":var g=se(na.validateJSONObject(i),2),_=g[0],C=g[1];if(!_)return console.error(C),!1;break;case"canAdmin":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var v,y=["participants","streaming","transcription"],f=cs(i);try{for(f.s();!(v=f.n()).done;){var b=v.value;if(!y.includes(b))return!1}}catch(E){f.e(E)}finally{f.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(t.canAdmin=new Set(i));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=(function(){var t=q((function*(e){return new Promise((function(r,s){var n=[];e.forEach((function(i){return Promise.resolve(i).then((function(a){r(a)})).catch((function(a){n.push(a),n.length===e.length&&s(n)}))}))}))}));return function(e){return t.apply(this,arguments)}})());var Vl=(function(){function t(o){var u,c,p,m,k,A,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(de(this,t),p=this,m=Se(m=t),Te(c=dr(p,ia()?Reflect.construct(m,[],Se(p).constructor):m.apply(p,k)),"startListeningForDeviceChanges",(function(){Il(c.handleDeviceChange)})),Te(c,"stopListeningForDeviceChanges",(function(){Dl(c.handleDeviceChange)})),Te(c,"handleDeviceChange",(function(U){U=U.map((function(B){return JSON.parse(JSON.stringify(B))})),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:U})})),Te(c,"handleNativeAppStateChange",(function(){var U=q((function*(B){if(B==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var Ee=B==="active";c.disableReactNativeAutoDeviceManagement("video")||(Ee?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))}));return function(B){return U.apply(this,arguments)}})()),Te(c,"handleNativeAudioFocusChange",(function(U){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=U,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))})),Te(c,"handleNativeSystemScreenCaptureStop",(function(){c.stopScreenShare()})),!Ir()&&!J())throw new Error("WebRTC not supported or suppressed");if(c.strictMode=P.strictMode===void 0||P.strictMode,c.allowMultipleCallInstances=(u=P.allowMultipleCallInstances)!==null&&u!==void 0&&u,Object.keys(Ge).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=pr(),Ge[(A=c).callClientId]=A,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,P.dailyJsVersion=t.version(),c._iframe=o,c._callObjectMode=P.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},P.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!P.showLocalVideo:c._showLocalVideo=!0,P.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!P.showParticipantsBar:c._showParticipantsBar=!0,P.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=P.customIntegrations:c._customIntegrations={},P.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=P.customTrayButtons:c._customTrayButtons={},P.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!P.activeSpeakerMode:c._activeSpeakerMode=!1,P.receiveSettings?c._callObjectMode?c._receiveSettings=P.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(P),c.properties=x({},P),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new _l(c.callClientId):null,c._callState=en,c._isPreparingToJoin=!1,c._accessState={access:Xt},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=xr(ds,c._callObjectMode),c._nativeInCallAudioMode=us,c._participants={},c._isScreenSharing=!1,c._participantCounts=hs,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=Ar,c._messageChannel=J()?new yl:new vl,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",(function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:Ct}),c.sendMessageToCallMachine({action:Ct})):(c.emitDailyJSEvent({action:Tt}),c.sendMessageToCallMachine({action:Tt}))})):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",(function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:Ct}),c.sendMessageToCallMachine({action:Ct})):(c.emitDailyJSEvent({action:Tt}),c.sendMessageToCallMachine({action:Tt}))}))),J()){var L=c.nativeUtils();L.addAudioFocusChangeListener&&L.removeAudioFocusChangeListener&&L.addAppStateChangeListener&&L.removeAppStateChangeListener&&L.addSystemScreenCaptureStopListener&&L.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,L.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),L.addAppStateChangeListener(c.handleNativeAppStateChange),L.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,c),c}return hr(t,xt),he(t,[{key:"destroy",value:(Dn=q((function*(){var o;try{yield this.leave()}catch{}var u=this._iframe;if(u){var c=u.parentElement;c&&c.removeChild(u)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),J()){var p=this.nativeUtils();p.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),p.removeAppStateChangeListener(this.handleNativeAppStateChange),p.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Ge[this.callClientId],!((o=window)===null||o===void 0||(o=o._daily)===null||o===void 0)&&o.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)})),function(){return Dn.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(o){var u=o.bodyClass,c=o.cssFile,p=o.cssText;return $(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:u,cssText:p}),this}},{key:"iframe",value:function(){return $(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return ye(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return ye(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(o,u){for(var c in u){if(!Wt[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(Wt[c].validate&&!Wt[c].validate(u[c],this,this._participants[o]))throw new Error(Wt[c].help)}}},{key:"updateParticipant",value:function(o,u){return this._participants.local&&this._participants.local.session_id===o&&(o="local"),o&&u&&(this.validateParticipantProperties(o,u),this.sendMessageToCallMachine({action:"update-participant",id:o,properties:u})),this}},{key:"updateParticipants",value:function(o){var u=this._participants.local&&this._participants.local.session_id;for(var c in o)c===u&&(c="local"),c&&o[c]&&this.validateParticipantProperties(c,o[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:o}),this}},{key:"updateWaitingParticipant",value:(In=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ye(this._callObjectMode,"updateWaitingParticipant()"),H(this._callState,"updateWaitingParticipant()"),typeof u!="string"||G(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise((function(p,m){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:u,updates:c},(function(k){k.error&&m(k.error),k.id||m(new Error("unknown error in updateWaitingParticipant()")),p({id:k.id})}))}))})),function(){return In.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(Pn=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"updateWaitingParticipants()"),H(this._callState,"updateWaitingParticipants()"),G(u)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise((function(c,p){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:u},(function(m){m.error&&p(m.error),m.ids||p(new Error("unknown error in updateWaitingParticipants()")),c({ids:m.ids})}))}))})),function(){return Pn.apply(this,arguments)})},{key:"requestAccess",value:(gt=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=u.access,p=c===void 0?{level:Bs}:c,m=u.name,k=m===void 0?"":m;return ye(this._callObjectMode,"requestAccess()"),H(this._callState,"requestAccess()"),new Promise((function(A,P){o.sendMessageToCallMachine({action:"daily-method-request-access",access:p,name:k},(function(L){L.error&&P(L.error),L.access||P(new Error("unknown error in requestAccess()")),A({access:L.access,granted:L.granted})}))}))})),function(){return gt.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in u&&(J()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),u={}):o&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),u={})),this.sendMessageToCallMachine({action:"local-audio",state:o,options:u}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(o){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:o}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(o){return this.sendMessageToCallMachine({action:"local-video",state:o}),this}},{key:"_setAllowLocalAudio",value:function(o){if(this._preloadCache.allowLocalAudio=o,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:o}),this}},{key:"_setAllowLocalVideo",value:function(o){if(this._preloadCache.allowLocalVideo=o,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:o}),this}},{key:"getReceiveSettings",value:(Ue=q((function*(o){var u=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,p=c!==void 0&&c;if(ye(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(G(o)){case"string":return new Promise((function(m){u.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:o,showInheritedValues:p},(function(k){m(k.receiveSettings)}))}));case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}})),function(o){return Ue.apply(this,arguments)})},{key:"updateReceiveSettings",value:(X=q((function*(o){var u=this;if(ye(this._callObjectMode,"updateReceiveSettings()"),!aa(o,{allowAllParticipantsKey:!0}))throw new Error(ua({allowAllParticipantsKey:!0}));return H(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise((function(c){u.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:o},(function(p){c({receiveSettings:p.receiveSettings})}))}))})),function(o){return X.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(o,u){if(o){var c={};if(o.audio){var p,m,k;o.audio.settings&&(!Object.keys(o.audio.settings).length&&u||(c.audio={settings:x({},o.audio.settings)})),u&&(p=c.audio)!==null&&p!==void 0&&(p=p.settings)!==null&&p!==void 0&&p.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var A=((m=o.audio.processor)===null||m===void 0?void 0:m.type)==="none"&&((k=o.audio.processor)===null||k===void 0?void 0:k._isDefaultWhenNone);if(o.audio.processor&&!A){var P=x({},o.audio.processor);delete P._isDefaultWhenNone,c.audio=x(x({},c.audio),{},{processor:P})}}if(o.video){var L,U,B;o.video.settings&&(!Object.keys(o.video.settings).length&&u||(c.video={settings:x({},o.video.settings)})),u&&(L=c.video)!==null&&L!==void 0&&(L=L.settings)!==null&&L!==void 0&&L.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Ee=((U=o.video.processor)===null||U===void 0?void 0:U.type)==="none"&&((B=o.video.processor)===null||B===void 0?void 0:B._isDefaultWhenNone);if(o.video.processor&&!Ee){var $e=x({},o.video.processor);delete $e._isDefaultWhenNone,c.video=x(x({},c.video),{},{processor:$e})}}return c}}},{key:"getInputSettings",value:function(){var o=this;return $(),new Promise((function(u){u(o._getInputSettings())}))}},{key:"_getInputSettings",value:function(){var o,u,c,p,m,k,A={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(o=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||A,u=((p=this._inputSettings)===null||p===void 0?void 0:p.audio)||A):(o=((m=this._preloadCache)===null||m===void 0||(m=m.inputSettings)===null||m===void 0?void 0:m.video)||A,u=((k=this._preloadCache)===null||k===void 0||(k=k.inputSettings)===null||k===void 0?void 0:k.audio)||A);var P={audio:u,video:o};return this._prepInputSettingsForSharing(P,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(o,u){var c=this._inputSettings||{},p={};if(o.video){var m,k,A;p.video={},o.video.settings?(p.video.settings={},u||o.video.settings.customTrack||(A=c.video)===null||A===void 0||!A.settings?p.video.settings=o.video.settings:p.video.settings=x(x({},c.video.settings),o.video.settings),Object.keys(p.video.settings).length||delete p.video.settings):(m=c.video)!==null&&m!==void 0&&m.settings&&(p.video.settings=c.video.settings),o.video.processor?p.video.processor=o.video.processor:(k=c.video)!==null&&k!==void 0&&k.processor&&(p.video.processor=c.video.processor)}else c.video&&(p.video=c.video);if(o.audio){var P,L,U;p.audio={},o.audio.settings?(p.audio.settings={},u||o.audio.settings.customTrack||(U=c.audio)===null||U===void 0||!U.settings?p.audio.settings=o.audio.settings:p.audio.settings=x(x({},c.audio.settings),o.audio.settings),Object.keys(p.audio.settings).length||delete p.audio.settings):(P=c.audio)!==null&&P!==void 0&&P.settings&&(p.audio.settings=c.audio.settings),o.audio.processor?p.audio.processor=o.audio.processor:(L=c.audio)!==null&&L!==void 0&&L.processor&&(p.audio.processor=c.audio.processor)}else c.audio&&(p.audio=c.audio);this._maybeUpdateInputSettings(p)}},{key:"_devicesFromInputSettings",value:function(o){var u,c,p=(o==null||(u=o.video)===null||u===void 0||(u=u.settings)===null||u===void 0?void 0:u.deviceId)||null,m=(o==null||(c=o.audio)===null||c===void 0||(c=c.settings)===null||c===void 0?void 0:c.deviceId)||null,k=this._preloadCache.outputDeviceId||null;return{camera:p?{deviceId:p}:{},mic:m?{deviceId:m}:{},speaker:k?{deviceId:k}:{}}}},{key:"updateInputSettings",value:(ne=q((function*(o){var u=this;return $(),ca(o)?o.video||o.audio?(la(o,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(o,!0),this._getInputSettings()):new Promise((function(c,p){u.sendMessageToCallMachine({action:"update-input-settings",inputSettings:o},(function(m){if(m.error)p(m.error);else{if(m.returnPreloadCache)return u._updatePreloadCacheInputSettings(o,!0),void c(u._getInputSettings());u._maybeUpdateInputSettings(m.inputSettings),c(u._prepInputSettingsForSharing(m.inputSettings,!0))}}))}))):this._getInputSettings():(console.error(mn()),Promise.reject(mn()))})),function(o){return ne.apply(this,arguments)})},{key:"setBandwidth",value:function(o){var u=o.kbs,c=o.trackConstraints;if($(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:u,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var o=this;if($(),this._callMachineInitialized)return new Promise((function(u){o.sendMessageToCallMachine({action:"get-daily-lang"},(function(c){delete c.action,delete c.callbackStamp,u(c)}))}))}},{key:"setDailyLang",value:function(o){return $(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:o}),this}},{key:"setProxyUrl",value:function(o){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:o}),this}},{key:"setIceConfig",value:function(o){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:o}),this}},{key:"meetingSessionSummary",value:function(){return[Re,Ae].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(R=q((function*(){var o=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),H(this._callState,"getMeetingSession()"),new Promise((function(u){o.sendMessageToCallMachine({action:"get-meeting-session"},(function(c){delete c.action,delete c.callbackStamp,u(c)}))}))})),function(){return R.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return H(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";ye(this._callObjectMode,"setMeetingSessionData()"),H(this._callState,"setMeetingSessionData");try{(function(c,p){new bl({data:c,mergeStrategy:p})})(o,u)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:o,mergeStrategy:u})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(o,u){var c=this;return this.properties.userName=o,new Promise((function(p){c.sendMessageToCallMachine({action:"set-user-name",name:o??"",thisMeetingOnly:J()||!!u&&!!u.thisMeetingOnly},(function(m){delete m.action,delete m.callbackStamp,p(m)}))}))}},{key:"setUserData",value:(it=q((function*(o){var u=this;try{oa(o)}catch(c){throw console.error(c),c}if(this.properties.userData=o,this._callMachineInitialized)return new Promise((function(c){try{u.sendMessageToCallMachine({action:"set-user-data",userData:o},(function(p){delete p.action,delete p.callbackStamp,c(p)}))}catch(p){throw new Error("Error setting user data: ".concat(p))}}))})),function(o){return it.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(o){if(o&&(o<100||typeof o!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(o){var u=this;if(typeof AudioWorkletNode>"u"&&!J())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise((function(c,p){u.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:o},(function(m){u._isLocalAudioLevelObserverRunning=!m.error,m.error?p({error:m.error}):c()}))}));this._preloadCache.localAudioLevelObserver={enabled:!0,interval:o}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(o){var u=this;if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise((function(c,p){u.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:o},(function(m){u._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?p({error:m.error}):c()}))}));this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:o}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(we=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"startCamera()"),Nr(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(u)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(u.url&&u.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(u.token&&u.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(u),this.properties=x(x({},this.properties),u)}return new Promise((function(c){o._preloadCache.inputSettings=o._prepInputSettingsForSharing(o._inputSettings,!1),o.sendMessageToCallMachine({action:"start-camera",properties:ot(o.properties,o.callClientId),preloadCache:ot(o._preloadCache,o.callClientId)},(function(p){c({camera:p.camera,mic:p.mic,speaker:p.speaker})}))}))})),function(){return we.apply(this,arguments)})},{key:"validateCustomTrack",value:function(o,u,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(u&&u!=="music"&&u!=="speech"&&!(u instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(o instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName,ignoreAudioLevel};return $(),H(this._callState,"startCustomTrack()"),this.validateCustomTrack(u.track,u.mode,u.trackName),new Promise((function(c,p){o._sharedTracks.customTrack=u.track,u.track=De,o.sendMessageToCallMachine({action:"start-custom-track",properties:u},(function(m){m.error?p({error:m.error}):c(m.mediaTag)}))}))}},{key:"stopCustomTrack",value:function(o){var u=this;return $(),H(this._callState,"stopCustomTrack()"),new Promise((function(c){u.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:o},(function(p){c(p.mediaTag)}))}))}},{key:"setCamera",value:function(o){var u=this;return wt(),zt(this._callMachineInitialized,"setCamera()"),new Promise((function(c){u.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:o},(function(p){c({device:p.device})}))}))}},{key:"setAudioDevice",value:(re=q((function*(o){return wt(),this.nativeUtils().setAudioDevice(o),{deviceId:yield this.nativeUtils().getAudioDevice()}})),function(o){return re.apply(this,arguments)})},{key:"cycleCamera",value:function(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((function(c){o.sendMessageToCallMachine({action:"cycle-camera",properties:u},(function(p){c({device:p.device})}))}))}},{key:"cycleMic",value:function(){var o=this;return $(),new Promise((function(u){o.sendMessageToCallMachine({action:"cycle-mic"},(function(c){u({device:c.device})}))}))}},{key:"getCameraFacingMode",value:function(){var o=this;return wt(),new Promise((function(u){o.sendMessageToCallMachine({action:"get-camera-facing-mode"},(function(c){u(c.facingMode)}))}))}},{key:"setInputDevicesAsync",value:(W=q((function*(o){var u=this,c=o.audioDeviceId,p=o.videoDeviceId,m=o.audioSource,k=o.videoSource;if($(),m!==void 0&&(c=m),k!==void 0&&(p=k),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof p=="boolean"&&(this._setAllowLocalVideo(p),p=void 0),!c&&!p)return yield this.getInputDevices();var A={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=De,A.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,A.audio={settings:{deviceId:c}})),p&&(p instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=p,p=De,A.video={settings:{customTrack:p}}):(delete this._sharedTracks.videoTrack,A.video={settings:{deviceId:p}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(A,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise((function(P){u.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:p},(function(L){if(delete L.action,delete L.callbackStamp,L.returnPreloadCache)return u._updatePreloadCacheInputSettings(A,!1),void P(u._devicesFromInputSettings(u._inputSettings));P(L)}))}))})),function(o){return W.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(F=q((function*(o){var u=this,c=o.outputDeviceId;if($(),!c||typeof c!="string")throw new Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=c,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(p,m){u.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},(function(k){if(delete k.action,delete k.callbackStamp,k.error){var A=new Error(k.error.message);return A.type=k.error.type,void m(A)}k.returnPreloadCache?p(u._devicesFromInputSettings(u._inputSettings)):p(k)}))}))})),function(o){return F.apply(this,arguments)})},{key:"getInputDevices",value:(j=q((function*(){var o=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(u){o.sendMessageToCallMachine({action:"get-input-devices"},(function(c){c.returnPreloadCache?u(o._devicesFromInputSettings(o._inputSettings)):u({camera:c.camera,mic:c.mic,speaker:c.speaker})}))}))})),function(){return j.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return wt(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(o){if(wt(),[us,ql].includes(o)){if(o!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=o,!this.disableReactNativeAutoDeviceManagement("audio")&&er(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",o)}},{key:"preAuth",value:(N=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"preAuth()"),Nr(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(u)),!u.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(u),this.properties=x(x({},this.properties),u),new Promise((function(c,p){o._preloadCache.inputSettings=o._prepInputSettingsForSharing(o._inputSettings,!1),o.sendMessageToCallMachine({action:"daily-method-preauth",properties:ot(o.properties,o.callClientId),preloadCache:ot(o._preloadCache,o.callClientId)},(function(m){return m.error?p(m.error):m.access?(o._didPreAuth=!0,void c({access:m.access})):p(new Error("unknown error in preAuth()"))}))}))})),function(){return N.apply(this,arguments)})},{key:"load",value:(D=q((function*(o){var u=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(o&&(this.validateProperties(o),this.properties=x(x({},this.properties),o)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(qi),this.emitDailyJSEvent({action:Ks}),this._callObjectMode?new Promise((function(c,p){u._callObjectLoader.cancel();var m=Date.now();u._callObjectLoader.load(u.properties.dailyConfig,(function(k){u._bundleLoadTime=k?"no-op":Date.now()-m,u._updateCallState(Vi),k&&u.emitDailyJSEvent({action:rn}),c()}),(function(k,A){if(u.emitDailyJSEvent({action:Xs}),!A){u._updateCallState(Ae),u.resetMeetingDependentVars();var P={action:cn,errorMsg:k.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:k,bundleUrl:tr(u.properties.dailyConfig)}}};u._maybeSendToSentry(P),u.emitDailyJSEvent(P),p(k.msg)}}))})):(this._iframe.src=Os(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise((function(c,p){u._loadedCallback=function(m){u._callState!==Ae?(u._updateCallState(Vi),(u.properties.cssFile||u.properties.cssText)&&u.loadCss(u.properties),c()):p(m)}})))}})),function(o){return D.apply(this,arguments)})},{key:"join",value:(T=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(u)}catch(p){return this.updateIsPreparingToJoin(!1),Promise.reject(p)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(u.url&&u.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(u.token&&u.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(u.url&&!this._callObjectMode&&u.url&&u.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(u.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(u),this.properties=x(x({},this.properties),u)}return u.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!u.showLocalVideo),u.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!u.showParticipantsBar),this._callState===Fe||this._callState===ar?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(ar,!1),this.emitDailyJSEvent({action:to}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:ot(this.properties,this.callClientId),preloadCache:ot(this._preloadCache,this.callClientId)}),new Promise((function(p,m){o._joinedCallback=function(k,A){if(o._callState!==Ae){if(o._updateCallState(Fe),k)for(var P in k){if(o._callObjectMode){var L=o._callMachine().store;Xi(k[P],L),Zi(k[P],L),es(k[P],o._participants[P],L)}o._participants[P]=x({},k[P]),o.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&o.loadCss(o.properties),p(k)}else m(A)}})))})),function(){return T.apply(this,arguments)})},{key:"leave",value:(S=q((function*(){var o=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise((function(u){o._callState===Re||o._callState===Ae?u():o._callObjectLoader&&!o._callObjectLoader.loaded?(o._callObjectLoader.cancel(),o._updateCallState(Re),o.resetMeetingDependentVars(),o.emitDailyJSEvent({action:Re}),u()):(o._resolveLeave=u,o.sendMessageToCallMachine({action:"leave-meeting"}))}))})),function(){return S.apply(this,arguments)})},{key:"startScreenShare",value:(w=q((function*(){var o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(zt(this._callMachineInitialized,"startScreenShare()"),u.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",u.screenVideoSendSettings),u.mediaStream&&(this._sharedTracks.screenMediaStream=u.mediaStream,u.mediaStream=De),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:an,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback((function(){c.setSystemScreenCaptureStartCallback(null),o.sendMessageToCallMachine({action:$i,captureOptions:u})})),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:$i,captureOptions:u})})),function(){return w.apply(this,arguments)})},{key:"stopScreenShare",value:function(){zt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.type;if(u&&u!=="cloud"&&u!=="raw-tracks"&&u!=="local")throw new Error("invalid type: ".concat(u,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(x({action:"local-recording-start"},o))}},{key:"updateRecording",value:function(o){var u=o.layout,c=u===void 0?{preset:"default"}:u,p=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:p})}},{key:"stopRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(x({action:"local-recording-stop"},o))}},{key:"startLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(x({action:"daily-method-start-live-streaming"},o))}},{key:"updateLiveStreaming",value:function(o){var u=o.layout,c=u===void 0?{preset:"default"}:u,p=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:p})}},{key:"addLiveStreamingEndpoints",value:function(o){var u=o.endpoints,c=o.instanceId;this.sendMessageToCallMachine({action:Ji,endpointsOp:dl,endpoints:u,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(o){var u=o.endpoints,c=o.instanceId;this.sendMessageToCallMachine({action:Ji,endpointsOp:hl,endpoints:u,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(x({action:"daily-method-stop-live-streaming"},o))}},{key:"validateDailyConfig",value:function(o){o.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(o.camSimulcastEncodings)),o.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),zo()&&o.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(o){if(!(o instanceof Array||Array.isArray(o)))throw new Error("encodings must be an Array");if(!bs(o.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var p=0;p<o.length;p++){var m=o[p];for(var k in this._validateEncodingLayerHasValidProperties(m),m)if(Lr.includes(k)){if(typeof m[k]!="number")throw new Error("".concat(k," must be a number"));if(u){var A=u[k],P=A.min,L=A.max;if(!bs(m[k],P,L))throw new Error("".concat(k," value not in range. valid range: ").concat(P," to ").concat(L))}}else if(!["active","scalabilityMode"].includes(k))throw new Error("Invalid key ".concat(k,", valid keys are:")+Object.values(Lr));if(c&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(I=q((function*(o){var u=this,c=o.url,p=o.settings,m=p===void 0?{state:ln.PLAY}:p;try{(function(k){if(typeof k!="string")throw new Error('url parameter must be "string" type')})(c),ys(m),(function(k){for(var A in k)if(!ps.includes(A))throw new Error("Invalid key ".concat(A,", valid keys are: ").concat(ps));k.simulcastEncodings&&this.validateSimulcastEncodings(k.simulcastEncodings,sa,!0)})(m)}catch(k){throw console.error("invalid argument Error: ".concat(k)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),k}return new Promise((function(k,A){u.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:m},(function(P){P.error?A({error:P.error,errorMsg:P.errorMsg}):k({session_id:P.session_id,remoteMediaPlayerState:{state:P.state,settings:P.settings}})}))}))})),function(o){return I.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(M=q((function*(o){var u=this;if(typeof o!="string")throw new Error(" remotePlayerID must be of type string");return new Promise((function(c,p){u.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:o},(function(m){m.error?p({error:m.error,errorMsg:m.errorMsg}):c()}))}))})),function(o){return M.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(E=q((function*(o){var u=this,c=o.session_id,p=o.settings;try{ys(p)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise((function(m,k){u.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:p},(function(A){A.error?k({error:A.error,errorMsg:A.errorMsg}):m({session_id:A.session_id,remoteMediaPlayerState:{state:A.state,settings:A.settings}})}))}))})),function(o){return E.apply(this,arguments)})},{key:"startTranscription",value:function(o){H(this._callState,"startTranscription()"),this.sendMessageToCallMachine(x({action:"daily-method-start-transcription"},o))}},{key:"updateTranscription",value:function(o){if(H(this._callState,"updateTranscription()"),!o)throw new Error("updateTranscription Error: options is mandatory");if(G(o)!=="object")throw new Error("updateTranscription Error: options must be object type");if(o.participants&&!Array.isArray(o.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(x({action:"daily-method-update-transcription"},o))}},{key:"stopTranscription",value:function(o){if(H(this._callState,"stopTranscription()"),o&&G(o)!=="object")throw new Error("stopTranscription Error: options must be object type");if(o&&!o.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(x({action:"daily-method-stop-transcription"},o))}},{key:"startDialOut",value:(b=q((function*(o){var u=this;H(this._callState,"startDialOut()");var c=function(A){if(A){if(!Array.isArray(A))throw new Error("Error starting dial out: audio codec must be an array");if(A.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");A.forEach((function(P){if(typeof P!="string")throw new Error("Error starting dial out: audio codec must be a string");if(P!=="OPUS"&&P!=="PCMU"&&P!=="PCMA"&&P!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")}))}};if(!o.sipUri&&!o.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(o.sipUri&&o.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(o.sipUri){if(typeof o.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!o.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(o.video&&typeof o.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(A){if(A&&(c(A.audio),A.video)){if(!Array.isArray(A.video))throw new Error("Error starting dial out: video codec must be an array");if(A.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");A.video.forEach((function(P){if(typeof P!="string")throw new Error("Error starting dial out: video codec must be a string");if(P!=="H264"&&P!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")}))}})(o.codecs)}if(o.phoneNumber){if(typeof o.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(o.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");o.codecs&&c(o.codecs.audio)}if(o.callerId){if(typeof o.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(o.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(o.displayName){if(typeof o.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(o.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(o.userId){if(typeof o.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(o.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}if(ms(o),o.permissions&&o.permissions.canReceive){var p=se(na.validateJSONObject(o.permissions.canReceive),2),m=p[0],k=p[1];if(!m)throw new Error(k)}if(o.provider){if(o.provider!=="daily")throw new Error("Error: provider can be set only to 'daily', got: ".concat(o.provider));if(o.phoneNumber)throw new Error("Error starting dial out: provider valid only for sipUri, not phoneNumber");console.warn("(pre-beta) provider=daily is currently in pre-beta, things might break!")}return new Promise((function(A,P){u.sendMessageToCallMachine(x({action:"dialout-start"},o),(function(L){L.error?P(L.error):A(L)}))}))})),function(o){return b.apply(this,arguments)})},{key:"stopDialOut",value:function(o){var u=this;return H(this._callState,"stopDialOut()"),new Promise((function(c,p){u.sendMessageToCallMachine(x({action:"dialout-stop"},o),(function(m){m.error?p(m.error):c(m)}))}))}},{key:"sipCallTransfer",value:(f=q((function*(o){var u=this;if(H(this._callState,"sipCallTransfer()"),!o)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return o.useSipRefer=!1,vs(o,"sipCallTransfer"),ms(o),new Promise((function(c,p){u.sendMessageToCallMachine(x({action:Bi},o),(function(m){m.error?p(m.error):c(m)}))}))})),function(o){return f.apply(this,arguments)})},{key:"sipRefer",value:(y=q((function*(o){var u=this;if(H(this._callState,"sipRefer()"),!o)throw new Error("sessionId and toEndPoint are mandatory parameter");return o.useSipRefer=!0,vs(o,"sipRefer"),new Promise((function(c,p){u.sendMessageToCallMachine(x({action:Bi},o),(function(m){m.error?p(m.error):c(m)}))}))})),function(o){return y.apply(this,arguments)})},{key:"sendDTMF",value:(v=q((function*(o){var u=this;return H(this._callState,"sendDTMF()"),(function(c){var p=c.sessionId,m=c.tones;if(!p||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof p!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var k=/[^0-9A-D*#]/g,A=m.match(k);if(A&&A[0])throw new Error("".concat(A[0]," is not valid DTMF tone"))})(o),new Promise((function(c,p){u.sendMessageToCallMachine(x({action:"send-dtmf"},o),(function(m){m.error?p(m.error):c(m)}))}))})),function(o){return v.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var o=this;return this._callState!==Fe?Promise.resolve(x({stats:{latest:{}}},this._network)):new Promise((function(u){o.sendMessageToCallMachine({action:"get-calc-stats"},(function(c){u(x(x({},o._network),{},{stats:c.stats}))}))}))}},{key:"testWebsocketConnectivity",value:(C=q((function*(){var o=this;if(Rr(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(u){return Promise.reject(u)}return new Promise((function(u,c){o.sendMessageToCallMachine({action:"test-websocket-connectivity"},(function(p){p.error?c(p.error):u(p.results)}))}))})),function(){return C.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(o){return o?o instanceof MediaStreamTrack?!!Ll(o)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(_=q((function*(){var o=this;$(),ye(this._callObjectMode,"testCallQuality()"),zt(this._callMachineInitialized,"testCallQuality()",null,!0),Nr(this._callState,this._isPreparingToJoin,"testCallQuality()");var u=this._testCallAlreadyInProgress,c=function(m){u||(o._testCallInProgress=m)};if(c(!0),this.needsLoad())try{var p=this._callState;yield this.load(),this._callState=p}catch(m){return c(!1),Promise.reject(m)}return new Promise((function(m){o.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:o.properties.dailyJsVersion},(function(k){var A=k.results,P=A.result,L=Ln(A,xl);if(P==="failed"){var U,B=x({},L);(U=L.error)!==null&&U!==void 0&&U.details?(L.error.details=JSON.parse(L.error.details),B.error=x(x({},B.error),{},{details:x({},B.error.details)}),B.error.details.duringTest="testCallQuality"):(B.error=B.error?x({},B.error):{},B.error.details={duringTest:"testCallQuality"}),o._maybeSendToSentry(B)}c(!1),m(x({result:P},L))}))}))})),function(){return _.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(g=q((function*(o){var u;J()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),u=yield this.testPeerToPeerCallQuality(o)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),u=yield this.testCallQuality());var c={result:u.result,secondsElapsed:u.secondsElapsed};return u.data&&(c.data={maxRTT:u.data.maxRoundTripTime,packetLoss:u.data.avgRecvPacketLoss}),c})),function(o){return g.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(h=q((function*(o){var u=this;if(Rr(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var c=o.videoTrack,p=o.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise((function(m,k){u.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:p},(function(A){A.error?k(A.error):m(A.results)}))}))})),function(o){return h.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){J()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(d=q((function*(o){var u=this;if(Rr(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(o))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=o,new Promise((function(c,p){u.sendMessageToCallMachine({action:"test-network-connectivity"},(function(m){m.error?p(m.error):c(m.results)}))}))})),function(o){return d.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var o=this;return new Promise((function(u){o._callState===Fe?o.sendMessageToCallMachine({action:"get-cpu-load-stats"},(function(c){u(c.cpuStats)})):u({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})}))}},{key:"_validateEncodingLayerHasValidProperties",value:function(o){var u;if(!(((u=Object.keys(o))===null||u===void 0?void 0:u.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Lr))}},{key:"_validateVideoSendSettings",value:function(o,u){var c=o==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],p="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof u=="string"){if(!c.includes(u))throw new Error(p)}else{if(G(u)!=="object")throw new Error(p);if(!u.maxQuality&&!u.encodings&&u.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(u.maxQuality&&["low","medium","high"].indexOf(u.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(u.encodings){var m=!1;switch(Object.keys(u.encodings).length){case 1:m=!u.encodings.low;break;case 2:m=!u.encodings.low||!u.encodings.medium;break;case 3:m=!u.encodings.low||!u.encodings.medium||!u.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");u.encodings.low&&this._validateEncodingLayerHasValidProperties(u.encodings.low),u.encodings.medium&&this._validateEncodingLayerHasValidProperties(u.encodings.medium),u.encodings.high&&this._validateEncodingLayerHasValidProperties(u.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(o){var u=this;if(!o||Object.keys(o).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(o).forEach((function(c){var p=se(c,2),m=p[0],k=p[1];u._validateVideoSendSettings(m,k)}))}},{key:"updateSendSettings",value:function(o){var u=this;return this.validateUpdateSendSettings(o),this.needsLoad()?(this._preloadCache.sendSettings=o,{sendSettings:this._preloadCache.sendSettings}):new Promise((function(c,p){u.sendMessageToCallMachine({action:"update-send-settings",sendSettings:o},(function(m){m.error?p(m.error):c(m.sendSettings)}))}))}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return $(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(o){return $(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:o}),this}},{key:"activeSpeakerMode",value:function(){return $(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(o){return H(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=o,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:o}),this}},{key:"enumerateDevices",value:(l=q((function*(){var o=this;if(this._callObjectMode){var u=yield navigator.mediaDevices.enumerateDevices();return tt()==="Firefox"&&cr().major>115&&cr().major<123&&(u=u.filter((function(c){return c.kind!=="audiooutput"}))),{devices:u.map((function(c){var p=JSON.parse(JSON.stringify(c));if(!J()&&c.kind==="videoinput"&&c.getCapabilities){var m,k=c.getCapabilities();p.facing=(k==null||(m=k.facingMode)===null||m===void 0?void 0:m.length)>=1?k.facingMode[0]:void 0}return p}))}}return new Promise((function(c){o.sendMessageToCallMachine({action:"enumerate-devices"},(function(p){c({devices:p.devices})}))}))})),function(){return l.apply(this,arguments)})},{key:"sendAppMessage",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(H(this._callState,"sendAppMessage()"),JSON.stringify(o).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:o,to:u}),this}},{key:"addFakeParticipant",value:function(o){return $(),H(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(x({action:"add-fake-participant"},o)),this}},{key:"setShowNamesMode",value:function(o){return le(this._callObjectMode,"setShowNamesMode()"),$(),o&&o!=="always"&&o!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:o}),this)}},{key:"setShowLocalVideo",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return le(this._callObjectMode,"setShowLocalVideo()"),$(),H(this._callState,"setShowLocalVideo()"),typeof o!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:o}),this._showLocalVideo=o,this)}},{key:"showLocalVideo",value:function(){return le(this._callObjectMode,"showLocalVideo()"),$(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return le(this._callObjectMode,"setShowParticipantsBar()"),$(),H(this._callState,"setShowParticipantsBar()"),typeof o!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:o}),this._showParticipantsBar=o,this)}},{key:"showParticipantsBar",value:function(){return le(this._callObjectMode,"showParticipantsBar()"),$(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return $(),le(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(o){return $(),le(this._callObjectMode,"setCustomIntegrations()"),H(this._callState,"setCustomIntegrations()"),pa(o)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:o}),this._customIntegrations=o,this):this}},{key:"startCustomIntegrations",value:function(o){var u=this;if($(),le(this._callObjectMode,"startCustomIntegrations()"),H(this._callState,"startCustomIntegrations()"),Array.isArray(o)&&o.some((function(m){return typeof m!="string"}))||!Array.isArray(o)&&typeof o!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof o=="string"?[o]:o,p=c.filter((function(m){return!(m in u._customIntegrations)}));return p.length?(console.error(`Can't find custom integration(s): "`.concat(p.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(o){var u=this;if($(),le(this._callObjectMode,"stopCustomIntegrations()"),H(this._callState,"stopCustomIntegrations()"),Array.isArray(o)&&o.some((function(m){return typeof m!="string"}))||!Array.isArray(o)&&typeof o!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof o=="string"?[o]:o,p=c.filter((function(m){return!(m in u._customIntegrations)}));return p.length?(console.error(`Can't find custom integration(s): "`.concat(p.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return le(this._callObjectMode,"customTrayButtons()"),$(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(o){return le(this._callObjectMode,"updateCustomTrayButtons()"),$(),H(this._callState,"updateCustomTrayButtons()"),ha(o)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:o}),this._customTrayButtons=o,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(ur))),this)}},{key:"theme",value:function(){return le(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(o){var u=this;return le(this._callObjectMode,"setTheme()"),new Promise((function(c,p){try{u.validateProperties({theme:o}),u.properties.theme=x({},o),u.sendMessageToCallMachine({action:"set-theme",theme:u.properties.theme});try{u.emitDailyJSEvent({action:Qs,theme:u.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}c(u.properties.theme)}catch(m){p(m)}}))}},{key:"requestFullscreen",value:(a=q((function*(){if($(),this._iframe&&!document.fullscreenElement&&Gi())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(o){console.log("could not make video call fullscreen",o)}})),function(){return a.apply(this,arguments)})},{key:"exitFullscreen",value:function(){$(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=q((function*(){var o=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise((function(u){o.sendMessageToCallMachine({action:"get-sidebar-view"},(function(c){u(c.view)}))}))})),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(o){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:o}),this)}},{key:"room",value:(n=q((function*(){var o=this,u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=u===void 0||u;return this._accessState.access===Xt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise((function(p){o.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},(function(m){delete m.action,delete m.callbackStamp,p(m)}))}))})),function(){return n.apply(this,arguments)})},{key:"geo",value:(s=q((function*(){try{var o=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield o.json()).geo}}catch(u){return console.error("geo lookup failed",u),{current:""}}})),function(){return s.apply(this,arguments)})},{key:"setNetworkTopology",value:(r=q((function*(o){var u=this;return $(),H(this._callState,"setNetworkTopology()"),new Promise((function(c,p){u.sendMessageToCallMachine({action:"set-network-topology",opts:o},(function(m){m.error?p({error:m.error}):c({workerId:m.workerId})}))}))})),function(o){return r.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=q((function*(){var o=this;return new Promise((function(u,c){o.needsLoad()&&u({topology:"none"}),o.sendMessageToCallMachine({action:"get-network-topology"},(function(p){p.error?c({error:p.error}):u({topology:p.topology})}))}))})),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(o){if($(),typeof o!="number"&&o!==!0&&o!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(o));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:o})}},{key:"on",value:function(o,u){return xt.prototype.on.call(this,o,u)}},{key:"once",value:function(o,u){return xt.prototype.once.call(this,o,u)}},{key:"off",value:function(o,u){return xt.prototype.off.call(this,o,u)}},{key:"validateProperties",value:function(o){var u,c;if(o!=null&&(u=o.dailyConfig)!==null&&u!==void 0&&u.userMediaAudioConstraints){var p,m;J()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var k=o.inputSettings||{};k.audio=((p=o.inputSettings)===null||p===void 0?void 0:p.audio)||{},k.audio.settings=((m=o.inputSettings)===null||m===void 0||(m=m.audio)===null||m===void 0?void 0:m.settings)||{},k.audio.settings=x(x({},k.audio.settings),o.dailyConfig.userMediaAudioConstraints),o.inputSettings=k,delete o.dailyConfig.userMediaAudioConstraints}if(o!=null&&(c=o.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var A,P;J()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var L=o.inputSettings||{};L.video=((A=o.inputSettings)===null||A===void 0?void 0:A.video)||{},L.video.settings=((P=o.inputSettings)===null||P===void 0||(P=P.video)===null||P===void 0?void 0:P.settings)||{},L.video.settings=x(x({},L.video.settings),o.dailyConfig.userMediaVideoConstraints),o.inputSettings=L,delete o.dailyConfig.userMediaVideoConstraints}for(var U in o)if(Ye[U]){if(Ye[U].validate&&!Ye[U].validate(o[U],this))throw new Error("property '".concat(U,"': ").concat(Ye[U].help))}else console.warn("Ignoring unrecognized property '".concat(U,"'")),delete o[U]}},{key:"assembleMeetingUrl",value:function(){var o,u,c=x(x({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(o=this.properties.dailyConfig)!==null&&o!==void 0&&o.proxyUrl?encodeURIComponent((u=this.properties.dailyConfig)===null||u===void 0?void 0:u.proxyUrl):void 0}),p=c.url.match(/\?/)?"&":"?";return c.url+p+Object.keys(Ye).filter((function(m){return Ye[m].queryString&&c[m]!==void 0})).map((function(m){return"".concat(Ye[m].queryString,"=").concat(c[m])})).join("&")}},{key:"needsLoad",value:function(){return[en,qi,Re,Ae].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(o,u){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(o,u,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(o){this._messageChannel.forwardPackagedMessageToCallMachine(o,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(o){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(o,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(o){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(o)}},{key:"handleMessageFromCallMachine",value:function(o){switch(o.action){case zs:this.sendMessageToCallMachine(x({action:Hs},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var u={action:Gt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:tr(this.properties.dailyConfig)}};this.sendMessageToCallMachine(u),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case rn:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(o);break;case ro:var c,p=x({},o);delete p.internal,this._maxAppMessageSize=((c=o.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||Ar,this._joinedCallback&&(this._joinedCallback(o.participants),this._joinedCallback=null),this.emitDailyJSEvent(p);break;case io:case so:if(this._callState===Re)return;if(o.participant&&o.participant.session_id){var m=o.participant.local?"local":o.participant.session_id;if(this._callObjectMode){var k=this._callMachine().store;Xi(o.participant,k),Zi(o.participant,k),es(o.participant,this._participants[m],k)}try{this.maybeParticipantTracksStopped(this._participants[m],o.participant),this.maybeParticipantTracksStarted(this._participants[m],o.participant),this.maybeEventRecordingStopped(this._participants[m],o.participant),this.maybeEventRecordingStarted(this._participants[m],o.participant)}catch(va){console.error("track events error",va)}this.compareEqualForParticipantUpdateEvent(o.participant,this._participants[m])||(this._participants[m]=x({},o.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(o))}break;case oo:if(o.participant&&o.participant.session_id){var A=this._participants[o.participant.session_id];A&&this.maybeParticipantTracksStopped(A,null),delete this._participants[o.participant.session_id],this.emitDailyJSEvent(o)}break;case ao:ae(this._participantCounts,o.participantCounts)||(this._participantCounts=o.participantCounts,this.emitDailyJSEvent(o));break;case co:var P={access:o.access};o.awaitingAccess&&(P.awaitingAccess=o.awaitingAccess),ae(this._accessState,P)||(this._accessState=P,this.emitDailyJSEvent(o));break;case lo:if(o.meetingSession){this._meetingSessionSummary=o.meetingSession,this.emitDailyJSEvent(o);var L=x(x({},o),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(L)}break;case cn:var U;this._iframe&&!o.preserveIframe&&(this._iframe.src=""),this._updateCallState(Ae),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(o.errorMsg),this._loadedCallback=null),o.preserveIframe;var B=Ln(o,Fl);B!=null&&(U=B.error)!==null&&U!==void 0&&U.details&&(B.error.details=JSON.parse(B.error.details)),this._maybeSendToSentry(o),this._joinedCallback&&(this._joinedCallback(null,B),this._joinedCallback=null),this.emitDailyJSEvent(B);break;case no:this._callState!==Ae&&this._updateCallState(Re),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(o);break;case"selected-devices-updated":o.devices&&this.emitDailyJSEvent(o);break;case Lo:var Ee=o.state,$e=o.threshold,vt=o.quality,Z=Ee.state,pe=Ee.reasons;Z===this._network.networkState&&ae(pe,this._network.networkStateReasons)&&$e===this._network.threshold&&vt===this._network.quality||(this._network.networkState=Z,this._network.networkStateReasons=pe,this._network.quality=vt,this._network.threshold=$e,o.networkState=Z,pe.length&&(o.networkStateReasons=pe),delete o.state,this.emitDailyJSEvent(o));break;case Ro:o&&o.cpuLoadState&&this.emitDailyJSEvent(o);break;case xo:o&&o.faceCounts!==void 0&&this.emitDailyJSEvent(o);break;case Do:var Je=o.activeSpeaker;this._activeSpeaker.peerId!==Je.peerId&&(this._activeSpeaker.peerId=Je.peerId,this.emitDailyJSEvent({action:o.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var yt=o.show;this._showLocalVideo=yt,this.emitDailyJSEvent({action:o.action,show:yt});break;case jo:var Nt=o.enabled;this._activeSpeakerMode!==Nt&&(this._activeSpeakerMode=Nt,this.emitDailyJSEvent({action:o.action,enabled:this._activeSpeakerMode}));break;case ho:case po:case fo:this._waitingParticipants=o.allWaitingParticipants,this.emitDailyJSEvent({action:o.action,participant:o.participant});break;case Jo:ae(this._receiveSettings,o.receiveSettings)||(this._receiveSettings=o.receiveSettings,this.emitDailyJSEvent({action:o.action,receiveSettings:o.receiveSettings}));break;case on:this._maybeUpdateInputSettings(o.inputSettings);break;case"send-settings-updated":ae(this._sendSettings,o.sendSettings)||(this._sendSettings=o.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:o.action,sendSettings:o.sendSettings}));break;case"local-audio-level":this._localAudioLevel=o.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=o.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case To:var bt=o.session_id;this._rmpPlayerState[bt]=o.playerState,this.emitDailyJSEvent(o);break;case Ao:delete this._rmpPlayerState[o.session_id],this.emitDailyJSEvent(o);break;case Oo:var _t=o.session_id,jn=this._rmpPlayerState[_t];jn&&this.compareEqualForRMPUpdateEvent(jn,o.remoteMediaPlayerState)||(this._rmpPlayerState[_t]=o.remoteMediaPlayerState,this.emitDailyJSEvent(o));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(o);break;case uo:var ga=this._meetingSessionState.topology!==(o.meetingSessionState&&o.meetingSessionState.topology);this._meetingSessionState=xr(o.meetingSessionState,this._callObjectMode),(this._callObjectMode||ga)&&this.emitDailyJSEvent(o);break;case Mo:this._isScreenSharing=!0,this.emitDailyJSEvent(o);break;case Po:case Io:this._isScreenSharing=!1,this.emitDailyJSEvent(o);break;case nn:case sn:case _o:case So:case wo:case vo:case yo:case bo:case Zs:case eo:case ko:case Co:case"test-completed":case No:case Eo:case Fo:case qo:case Vo:case Uo:case an:case $o:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(o);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(o,u){var c="record";o&&(u.local||u[c]!==!1||o[c]===u[c]||this.emitDailyJSEvent({action:sn}))}},{key:"maybeEventRecordingStarted",value:function(o,u){var c="record";o&&(u.local||u[c]!==!0||o[c]===u[c]||this.emitDailyJSEvent({action:nn}))}},{key:"_trackStatePlayable",value:function(o){return!(!o||o.state!==Js)}},{key:"_trackChanged",value:function(o,u){return o?.id!==u?.id}},{key:"maybeEventTrackStopped",value:function(o,u,c){var p,m,k=(p=u?.tracks[o])!==null&&p!==void 0?p:null,A=(m=c?.tracks[o])!==null&&m!==void 0?m:null,P=k?.track;if(P){var L=this._trackStatePlayable(k),U=this._trackStatePlayable(A),B=this._trackChanged(P,A?.track);L&&(U&&!B||this.emitDailyJSEvent({action:go,track:P,participant:c??u,type:o}))}}},{key:"maybeEventTrackStarted",value:function(o,u,c){var p,m,k=(p=u?.tracks[o])!==null&&p!==void 0?p:null,A=(m=c?.tracks[o])!==null&&m!==void 0?m:null,P=A?.track;if(P){var L=this._trackStatePlayable(k),U=this._trackStatePlayable(A),B=this._trackChanged(k?.track,P);U&&(L&&!B||this.emitDailyJSEvent({action:mo,track:P,participant:c,type:o}))}}},{key:"maybeParticipantTracksStopped",value:function(o,u){if(o)for(var c in o.tracks)this.maybeEventTrackStopped(c,o,u)}},{key:"maybeParticipantTracksStarted",value:function(o,u){if(u)for(var c in u.tracks)this.maybeEventTrackStarted(c,o,u)}},{key:"compareEqualForRMPUpdateEvent",value:function(o,u){var c,p;return o.state===u.state&&((c=o.settings)===null||c===void 0?void 0:c.volume)===((p=u.settings)===null||p===void 0?void 0:p.volume)}},{key:"emitDailyJSEvent",value:function(o){try{o.callClientId=this.callClientId,this.emit(o.action,o)}catch(u){console.log("could not emit",o,u)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(o,u){return!!ae(o,u)&&(!o.videoTrack||!u.videoTrack||o.videoTrack.id===u.videoTrack.id&&o.videoTrack.muted===u.videoTrack.muted&&o.videoTrack.enabled===u.videoTrack.enabled)&&(!o.audioTrack||!u.audioTrack||o.audioTrack.id===u.audioTrack.id&&o.audioTrack.muted===u.audioTrack.muted&&o.audioTrack.enabled===u.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return J()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(o){this._updateCallState(this._callState,o)}},{key:"_updateCallState",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(o!==this._callState||u!==this._isPreparingToJoin){var c=this._callState,p=this._isPreparingToJoin;this._callState=o,this._isPreparingToJoin=u;var m=this._callState===Fe;this.updateShowAndroidOngoingMeetingNotification(m);var k=er(c,p),A=er(this._callState,this._isPreparingToJoin);k!==A&&(this.updateKeepDeviceAwake(A),this.updateDeviceAudioMode(A),this.updateNoOpRecordingEnsuringBackgroundContinuity(A))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=hs,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Xt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=xr(ds,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Ar,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(o){J()&&this.nativeUtils().setKeepDeviceAwake(o,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(o){if(J()&&!this.disableReactNativeAutoDeviceManagement("audio")){var u=o?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(u)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(o){if(J()&&this.nativeUtils().setShowOngoingMeetingNotification){var u,c,p,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var k=this.properties.reactNativeConfig.androidInCallNotification;u=k.title,c=k.subtitle,p=k.iconName,m=k.disableForCustomOverride}m&&(o=!1),this.nativeUtils().setShowOngoingMeetingNotification(o,u,c,p,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(o){J()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(o)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var o;if(J()){var u=(o=this._callMachine())===null||o===void 0||(o=o.store)===null||o===void 0?void 0:o.getState();for(var c in u?.streams){var p=u.streams[c];p&&p.pendingTrack&&p.pendingTrack.kind==="audio"&&(p.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(o){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[o]}},{key:"absoluteUrl",value:function(o){if(o!==void 0){var u=document.createElement("a");return u.href=o,u.href}}},{key:"sayHello",value:function(){var o="hello, world.";return console.log(o),o}},{key:"_logUseAfterDestroy",value:function(){var o=Object.values(Ge)[0];if(this.needsLoad())if(o&&!o.needsLoad()){var u={action:Gt,level:"error",code:this.strictMode?9995:9997};o.sendMessageToCallMachine(u)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:Gt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var o=0,u=Object.values(Ge);o<u.length;o++){var c=u[o];c._callMachineInitialized?(c.sendMessageToCallMachine({action:Gt,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(o){var u,c,p,m;if(!((u=o.error)!==null&&u!==void 0&&u.type&&(![Ws,Ys,tn].includes(o.error.type)||o.error.type===tn&&o.error.msg.includes("deleted")))){var k=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,A="production";k&&k.host.includes(".staging.daily")&&(A="staging");var P,L,U,B,Ee,$e=(function(bt){const _t=[ac(),sc(),jc(),Ic(),Fc(),Vc(),dc(),qc()];return bt.autoSessionTracking!==!1&&_t.push(xc()),_t})({}).filter((function(bt){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(bt.name)})),vt=new bc({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:kc,stackParser:Pc,integrations:$e,environment:A}),Z=new Ve;if(Z.setClient(vt),vt.init(),this.session_id&&Z.setExtra("sessionId",this.session_id),this.properties){var pe=x({},this.properties);pe.userName=pe.userName?"[Filtered]":void 0,pe.userData=pe.userData?"[Filtered]":void 0,pe.token=pe.token?"[Filtered]":void 0,Z.setExtra("properties",pe)}if(k){var Je=k.searchParams.get("domain");if(!Je){var yt=k.host.match(/(.*?)\./);Je=yt&&yt[1]||""}Je&&Z.setTag("domain",Je)}o.error&&(Z.setTag("fatalErrorType",o.error.type),Z.setExtra("errorDetails",o.error.details),!((P=o.error.details)===null||P===void 0)&&P.uri&&Z.setTag("serverAddress",o.error.details.uri),!((L=o.error.details)===null||L===void 0)&&L.workerGroup&&Z.setTag("workerGroup",o.error.details.workerGroup),!((U=o.error.details)===null||U===void 0)&&U.geoGroup&&Z.setTag("geoGroup",o.error.details.geoGroup),!((B=o.error.details)===null||B===void 0)&&B.on&&Z.setTag("connectionAttempt",o.error.details.on),(Ee=o.error.details)!==null&&Ee!==void 0&&Ee.bundleUrl&&(Z.setTag("bundleUrl",o.error.details.bundleUrl),Z.setTag("bundleError",o.error.details.sourceError.type))),Z.setTags({callMode:this._callObjectMode?J()?"reactNative":(p=this.properties)!==null&&p!==void 0&&(p=p.dailyConfig)!==null&&p!==void 0&&(p=p.callMode)!==null&&p!==void 0&&p.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:t.version()});var Nt=((m=o.error)===null||m===void 0?void 0:m.msg)||o.errorMsg;Z.captureException(new Error(Nt))}}},{key:"_callMachine",value:function(){var o;return(o=window._daily)===null||o===void 0||(o=o.instances)===null||o===void 0||(o=o[this.callClientId])===null||o===void 0?void 0:o.callMachine}},{key:"_maybeUpdateInputSettings",value:function(o){if(!ae(this._inputSettings,o)){var u=this._getInputSettings();this._inputSettings=o;var c=this._getInputSettings();ae(u,c)||this.emitDailyJSEvent({action:on,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if(J())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var o=Oa.getParser(ve());return{supported:!!Ir(),mobile:o.getPlatformType()==="mobile",name:o.getBrowserName(),version:o.getBrowserVersion(),supportsFullscreen:!!Gi(),supportsScreenShare:!!pl(),supportsSfu:!!Ir(),supportsVideoProcessing:Yo(),supportsAudioProcessing:Wo()}}},{key:"version",value:function(){return"0.85.0"}},{key:"createCallObject",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.layout="none",new t(null,o)}},{key:"wrap",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($(),!o||!o.contentWindow||typeof o.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return u.layout||(u.customLayout?u.layout="custom-v1":u.layout="browser"),new t(o,u)}},{key:"createFrame",value:function(o,u){var c,p;$(),o&&u?(c=o,p=u):o&&o.append?(c=o,p={}):(c=document.body,p=o||{});var m=p.iframeStyle;m||(m=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var k=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?k.allow="microphone, camera":k.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",k.style.visibility="hidden",c.appendChild(k),k.style.visibility=null,Object.keys(m).forEach((function(A){return k.style[A]=m[A]})),p.layout||(p.customLayout?p.layout="custom-v1":p.layout="browser");try{return new t(k,p)}catch(A){throw c.removeChild(k),A}}},{key:"createTransparentFrame",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$();var u=document.createElement("iframe");return u.allow="microphone; camera; autoplay",u.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(u),o.layout||(o.layout="custom-v1"),t.wrap(u,o)}},{key:"getCallInstance",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return o?Ge[o]:Object.values(Ge)[0]}}]);var e,r,s,n,i,a,l,d,h,g,_,C,v,y,f,b,E,M,I,w,S,T,D,N,j,F,W,re,we,it,R,ne,X,Ue,gt,Pn,In,Dn})();function ms(t){if(t.extension){if(typeof t.extension!="string")throw new Error("Error starting dial out: extension must be a string");if(t.extension.length>20)throw new Error("Error starting dial out: extension length must be less than or equal to 20")}if(t.waitBeforeExtensionDialSec){if(typeof t.waitBeforeExtensionDialSec!="number")throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(t.waitBeforeExtensionDialSec>60)throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!t.extension)throw new Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function ot(t,e){var r={};for(var s in t)if(t[s]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",s),r[s]=De;else if(s==="dailyConfig"){if(t[s].modifyLocalSdpHook){var n=window._daily.instances[e].customCallbacks||{};n.modifyLocalSdpHook=t[s].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=n,delete t[s].modifyLocalSdpHook}if(t[s].modifyRemoteSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyRemoteSdpHook=t[s].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=i,delete t[s].modifyRemoteSdpHook}r[s]=t[s]}else r[s]=t[s];return r}function H(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Fe){var r="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(r+=" ".concat(e)),console.error(r),new Error(r)}}function er(t,e){return[ar,Fe].includes(t)||e}function Nr(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",s=arguments.length>3?arguments[3]:void 0;if(er(t,e)){var n="".concat(r," not supported after joining a meeting.");throw s&&(n+=" ".concat(s)),console.error(n),new Error(n)}}function zt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",r=arguments.length>2?arguments[2]:void 0;if(!t){var s="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw r&&(s+=" ".concat(r)),console.error(s),new Error(s)}}function Rr(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function ye(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function le(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function $(){if(J())throw new Error("This daily-js method is not currently supported in React Native")}function wt(){if(!J())throw new Error("This daily-js method is only supported in React Native")}function oa(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),ae(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(r){throw Error("userData must be serializable to JSON: ".concat(r))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function aa(t,e){for(var r=e.allowAllParticipantsKey,s=function(_){var C=["local"];return r||C.push("*"),_&&!C.includes(_)},n=function(_){return!!(_.layer===void 0||Number.isInteger(_.layer)&&_.layer>=0||_.layer==="inherit")},i=function(_){return!!_&&!(_.video&&!n(_.video))&&!(_.screenVideo&&!n(_.screenVideo))},a=0,l=Object.entries(t);a<l.length;a++){var d=se(l[a],2),h=d[0],g=d[1];if(!s(h)||!i(g))return!1}return!0}function ca(t){if(G(t)!=="object")return!1;for(var e=0,r=Object.entries(t);e<r.length;e++){var s=se(r[e],2),n=s[0],i=s[1];switch(n){case"video":if(G(i)!=="object")return!1;for(var a=0,l=Object.entries(i);a<l.length;a++){var d=se(l[a],2),h=d[0],g=d[1];switch(h){case"processor":if(!$l(g))return!1;break;case"settings":if(!gs(g))return!1;break;default:return!1}}break;case"audio":if(G(i)!=="object")return!1;for(var _=0,C=Object.entries(i);_<C.length;_++){var v=se(C[_],2),y=v[0],f=v[1];switch(y){case"processor":if(!Ul(f))return!1;break;case"settings":if(!gs(f))return!1;break;default:return!1}}break;default:return!1}}return!0}function la(t,e,r){var s,n=[];t.video&&t.video.processor&&(Yo((s=e?.useLegacyVideoProcessor)!==null&&s!==void 0&&s)||(t.video.settings?delete t.video.processor:delete t.video,n.push("video"))),t.audio&&t.audio.processor&&(Wo()||(t.audio.settings?delete t.audio.processor:delete t.audio,n.push("audio"))),n.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(n.join(", "))),t.audio&&t.audio.settings&&(t.audio.settings.customTrack?(r.audioTrack=t.audio.settings.customTrack,t.audio.settings={customTrack:De}):delete r.audioTrack),t.video&&t.video.settings&&(t.video.settings.customTrack?(r.videoTrack=t.video.settings.customTrack,t.video.settings={customTrack:De}):delete r.videoTrack)}function Ul(t){if(J())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!t&&G(t)==="object"&&(Object.keys(t).filter((function(r){return!e.includes(r)})).forEach((function(r){console.warn("invalid key inputSettings -> audio -> processor : ".concat(r)),delete t[r]})),!!(function(r){return typeof r!="string"?!1:Object.values(Bo).includes(r)?!0:(console.error("inputSettings audio processor type invalid"),!1)})(t.type))}function $l(t){if(J())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!t||G(t)!=="object"||!(function(r){return typeof r!="string"?!1:Object.values(Zt).includes(r)?!0:(console.error("inputSettings video processor type invalid"),!1)})(t.type)||t.config&&(G(t.config)!=="object"||!(function(r,s){var n=Object.keys(s);if(n.length===0)return!0;var i="invalid object in inputSettings -> video -> processor -> config";switch(r){case Zt.BGBLUR:return n.length>1||n[0]!=="strength"?(console.error(i),!1):!(typeof s.strength!="number"||s.strength<=0||s.strength>1||isNaN(s.strength))||(console.error("".concat(i,"; expected: {0 < strength <= 1}, got: ").concat(s.strength)),!1);case Zt.BGIMAGE:return!(s.source!==void 0&&!(function(a){if(a.source==="default")return a.type="default",!0;if(a.source instanceof ArrayBuffer)return!0;if(rr(a.source))return a.type="url",!!(function(h){var g=new URL(h),_=g.pathname;if(g.protocol==="data:")try{var C=_.substring(_.indexOf(":")+1,_.indexOf(";")).split("/")[1];return Pr.includes(C)}catch(y){return console.error("failed to deduce blob content type",y),!1}var v=_.split(".").at(-1).toLowerCase().trim();return Pr.includes(v)})(a.source)||(console.error("invalid image type; supported types: [".concat(Pr.join(", "),"]")),!1);return l=a.source,d=Number(l),isNaN(d)||!Number.isInteger(d)||d<=0||d>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(a.type="daily-preselect",!0);var l,d})(s));default:return!0}})(t.type,t.config))?!1:(Object.keys(t).filter((function(r){return!e.includes(r)})).forEach((function(r){console.warn("invalid key inputSettings -> video -> processor : ".concat(r)),delete t[r]})),!0)}function gs(t){return G(t)==="object"&&(!t.customTrack||t.customTrack instanceof MediaStreamTrack)}function mn(){var t=Object.values(Zt).join(" | "),e=Object.values(Bo).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function ua(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Gs).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function da(){return"customIntegrations should be an object of type ".concat(JSON.stringify(fn),".")}function ha(t){if(t&&G(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(ur),".")),!1;if(t)for(var e=0,r=Object.entries(t);e<r.length;e++)for(var s=se(r[e],1)[0],n=0,i=Object.entries(t[s]);n<i.length;n++){var a=se(i[n],2),l=a[0],d=a[1],h=ur.id[l];if(!h)return console.error("customTrayButton does not support key ".concat(l)),!1;switch(l){case"iconPath":case"iconPathDarkMode":if(!rr(d))return console.error("customTrayButton ".concat(l," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(d))return console.error("customTrayButton ".concat(l," should be ").concat(h,". Got: ").concat(d)),!1;break;default:if(G(d)!==h)return console.error("customTrayButton ".concat(l," should be a ").concat(h,".")),!1}}return!0}function pa(t){if(!t||t&&G(t)!=="object"||Array.isArray(t))return console.error(da()),!1;for(var e=function(_){return"".concat(_," should be ").concat(fn.id[_])},r=function(_,C){return console.error("customIntegration ".concat(_,": ").concat(C))},s=0,n=Object.entries(t);s<n.length;s++){var i=se(n[s],1)[0];if(!("label"in t[i]))return r(i,"label is required"),!1;if(!("location"in t[i]))return r(i,"location is required"),!1;if(!("src"in t[i])&&!("srcdoc"in t[i]))return r(i,"src or srcdoc is required"),!1;for(var a=0,l=Object.entries(t[i]);a<l.length;a++){var d=se(l[a],2),h=d[0],g=d[1];switch(h){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof g!="string")return r(i,e(h)),!1;break;case"iconURL":if(!rr(g))return r(i,"".concat(h," should be a url")),!1;break;case"src":if("srcdoc"in t[i])return r(i,"cannot have both src and srcdoc"),!1;if(!rr(g))return r(i,'src "'.concat(g,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[i])return r(i,"cannot have both src and srcdoc"),!1;if(typeof g!="string")return r(i,e(h)),!1;break;case"location":if(!["main","sidebar"].includes(g))return r(i,e(h)),!1;break;case"controlledBy":if(g!=="*"&&g!=="owners"&&(!Array.isArray(g)||g.some((function(_){return typeof _!="string"}))))return r(i,e(h)),!1;break;case"shared":if((!Array.isArray(g)||g.some((function(_){return typeof _!="string"})))&&g!=="owners"&&typeof g!="boolean")return r(i,e(h)),!1;break;default:if(!fn.id[h])return console.error("customIntegration does not support key ".concat(h)),!1}}}return!0}function fa(t,e){if(e===void 0)return!1;switch(G(e)){case"string":return G(t)===e;case"object":if(G(t)!=="object")return!1;for(var r in t)if(!fa(t[r],e[r]))return!1;return!0;default:return!1}}function vs(t,e){var r=t.sessionId,s=t.toEndPoint,n=t.callerId,i=t.useSipRefer;if(!r||!s)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof r!="string"||typeof s!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!s.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!s.startsWith("sip:")&&!s.startsWith("+"))throw new Error("toEndPoint: ".concat(s,' must starts with either "sip:" or "+"'));if(n&&typeof n!="string")throw new Error("callerId must be of type string");if(n&&!s.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function ys(t){if(G(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(ln).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ln));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function bs(t,e,r){return!(typeof t!="number"||t<e||t>r)}function xr(t,e){return t&&!e&&delete t.data,t}const Jl=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:Bs,DAILY_ACCESS_LEVEL_LOBBY:Yc,DAILY_ACCESS_LEVEL_NONE:Wc,DAILY_ACCESS_UNKNOWN:Xt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:il,DAILY_CAMERA_ERROR_CAM_IN_USE:rl,DAILY_CAMERA_ERROR_CONSTRAINTS:cl,DAILY_CAMERA_ERROR_MIC_IN_USE:nl,DAILY_CAMERA_ERROR_NOT_FOUND:al,DAILY_CAMERA_ERROR_PERMISSIONS:sl,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:ol,DAILY_CAMERA_ERROR_UNKNOWN:ll,DAILY_EVENT_ACCESS_STATE_UPDATED:co,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Do,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:jo,DAILY_EVENT_APP_MSG:ko,DAILY_EVENT_CAMERA_ERROR:eo,DAILY_EVENT_CPU_LOAD_CHANGE:Ro,DAILY_EVENT_ERROR:cn,DAILY_EVENT_EXIT_FULLSCREEN:Tt,DAILY_EVENT_FACE_COUNTS_UPDATED:xo,DAILY_EVENT_FULLSCREEN:Ct,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:Hs,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:zs,DAILY_EVENT_INPUT_SETTINGS_UPDATED:on,DAILY_EVENT_JOINED_MEETING:ro,DAILY_EVENT_JOINING_MEETING:to,DAILY_EVENT_LANG_UPDATED:$o,DAILY_EVENT_LEFT_MEETING:no,DAILY_EVENT_LIVE_STREAMING_ERROR:Uo,DAILY_EVENT_LIVE_STREAMING_STARTED:Fo,DAILY_EVENT_LIVE_STREAMING_STOPPED:Vo,DAILY_EVENT_LIVE_STREAMING_UPDATED:qo,DAILY_EVENT_LOADED:rn,DAILY_EVENT_LOADING:Ks,DAILY_EVENT_LOAD_ATTEMPT_FAILED:Xs,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Io,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:Mo,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:Po,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:ul,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:uo,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:lo,DAILY_EVENT_NETWORK_CONNECTION:No,DAILY_EVENT_NETWORK_QUALITY_CHANGE:Lo,DAILY_EVENT_NONFATAL_ERROR:an,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:ao,DAILY_EVENT_PARTICIPANT_JOINED:io,DAILY_EVENT_PARTICIPANT_LEFT:oo,DAILY_EVENT_PARTICIPANT_UPDATED:so,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:Jo,DAILY_EVENT_RECORDING_DATA:Eo,DAILY_EVENT_RECORDING_ERROR:So,DAILY_EVENT_RECORDING_STARTED:nn,DAILY_EVENT_RECORDING_STATS:_o,DAILY_EVENT_RECORDING_STOPPED:sn,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:wo,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:To,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Ao,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Oo,DAILY_EVENT_STARTED_CAMERA:Zs,DAILY_EVENT_THEME_UPDATED:Qs,DAILY_EVENT_TRACK_STARTED:mo,DAILY_EVENT_TRACK_STOPPED:go,DAILY_EVENT_TRANSCRIPTION_ERROR:bo,DAILY_EVENT_TRANSCRIPTION_MSG:Co,DAILY_EVENT_TRANSCRIPTION_STARTED:vo,DAILY_EVENT_TRANSCRIPTION_STOPPED:yo,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:ho,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:fo,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:po,DAILY_FATAL_ERROR_CONNECTION:Ws,DAILY_FATAL_ERROR_EJECTED:Hc,DAILY_FATAL_ERROR_EOL:Ys,DAILY_FATAL_ERROR_EXP_ROOM:Xc,DAILY_FATAL_ERROR_EXP_TOKEN:Zc,DAILY_FATAL_ERROR_MEETING_FULL:el,DAILY_FATAL_ERROR_NBF_ROOM:Qc,DAILY_FATAL_ERROR_NBF_TOKEN:Kc,DAILY_FATAL_ERROR_NOT_ALLOWED:tl,DAILY_FATAL_ERROR_NO_ROOM:tn,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:zc,DAILY_RECEIVE_SETTINGS_BASE_KEY:Gs,DAILY_STATE_ERROR:Ae,DAILY_STATE_JOINED:Fe,DAILY_STATE_JOINING:ar,DAILY_STATE_LEFT:Re,DAILY_STATE_NEW:en,DAILY_TRACK_STATE_BLOCKED:Uc,DAILY_TRACK_STATE_INTERRUPTED:Gc,DAILY_TRACK_STATE_LOADING:Bc,DAILY_TRACK_STATE_OFF:$c,DAILY_TRACK_STATE_PLAYABLE:Js,DAILY_TRACK_STATE_SENDABLE:Jc,default:Vl},Symbol.toStringTag,{value:"Module"})),Bl=ya(Jl);var Ht={exports:{}},_s;function Gl(){if(_s)return Ht.exports;_s=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,T,D){return Function.prototype.apply.call(S,T,D)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function s(w){console&&console.warn&&console.warn(w)}var n=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}Ht.exports=i,Ht.exports.once=E,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||n(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||n(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function d(w){return w._maxListeners===void 0?i.defaultMaxListeners:w._maxListeners}i.prototype.getMaxListeners=function(){return d(this)},i.prototype.emit=function(S){for(var T=[],D=1;D<arguments.length;D++)T.push(arguments[D]);var N=S==="error",j=this._events;if(j!==void 0)N=N&&j.error===void 0;else if(!N)return!1;if(N){var F;if(T.length>0&&(F=T[0]),F instanceof Error)throw F;var W=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw W.context=F,W}var re=j[S];if(re===void 0)return!1;if(typeof re=="function")e(re,this,T);else for(var we=re.length,it=y(re,we),D=0;D<we;++D)e(it[D],this,T);return!0};function h(w,S,T,D){var N,j,F;if(l(T),j=w._events,j===void 0?(j=w._events=Object.create(null),w._eventsCount=0):(j.newListener!==void 0&&(w.emit("newListener",S,T.listener?T.listener:T),j=w._events),F=j[S]),F===void 0)F=j[S]=T,++w._eventsCount;else if(typeof F=="function"?F=j[S]=D?[T,F]:[F,T]:D?F.unshift(T):F.push(T),N=d(w),N>0&&F.length>N&&!F.warned){F.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=w,W.type=S,W.count=F.length,s(W)}return w}i.prototype.addListener=function(S,T){return h(this,S,T,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,T){return h(this,S,T,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(w,S,T){var D={fired:!1,wrapFn:void 0,target:w,type:S,listener:T},N=g.bind(D);return N.listener=T,D.wrapFn=N,N}i.prototype.once=function(S,T){return l(T),this.on(S,_(this,S,T)),this},i.prototype.prependOnceListener=function(S,T){return l(T),this.prependListener(S,_(this,S,T)),this},i.prototype.removeListener=function(S,T){var D,N,j,F,W;if(l(T),N=this._events,N===void 0)return this;if(D=N[S],D===void 0)return this;if(D===T||D.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete N[S],N.removeListener&&this.emit("removeListener",S,D.listener||T));else if(typeof D!="function"){for(j=-1,F=D.length-1;F>=0;F--)if(D[F]===T||D[F].listener===T){W=D[F].listener,j=F;break}if(j<0)return this;j===0?D.shift():f(D,j),D.length===1&&(N[S]=D[0]),N.removeListener!==void 0&&this.emit("removeListener",S,W||T)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var T,D,N;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var j=Object.keys(D),F;for(N=0;N<j.length;++N)F=j[N],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=D[S],typeof T=="function")this.removeListener(S,T);else if(T!==void 0)for(N=T.length-1;N>=0;N--)this.removeListener(S,T[N]);return this};function C(w,S,T){var D=w._events;if(D===void 0)return[];var N=D[S];return N===void 0?[]:typeof N=="function"?T?[N.listener||N]:[N]:T?b(N):y(N,N.length)}i.prototype.listeners=function(S){return C(this,S,!0)},i.prototype.rawListeners=function(S){return C(this,S,!1)},i.listenerCount=function(w,S){return typeof w.listenerCount=="function"?w.listenerCount(S):v.call(w,S)},i.prototype.listenerCount=v;function v(w){var S=this._events;if(S!==void 0){var T=S[w];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function y(w,S){for(var T=new Array(S),D=0;D<S;++D)T[D]=w[D];return T}function f(w,S){for(;S+1<w.length;S++)w[S]=w[S+1];w.pop()}function b(w){for(var S=new Array(w.length),T=0;T<S.length;++T)S[T]=w[T].listener||w[T];return S}function E(w,S){return new Promise(function(T,D){function N(F){w.removeListener(S,j),D(F)}function j(){typeof w.removeListener=="function"&&w.removeListener("error",N),T([].slice.call(arguments))}I(w,S,j,{once:!0}),S!=="error"&&M(w,N,{once:!0})})}function M(w,S,T){typeof w.on=="function"&&I(w,"error",S,T)}function I(w,S,T,D){if(typeof w.on=="function")D.once?w.once(S,T):w.on(S,T);else if(typeof w.addEventListener=="function")w.addEventListener(S,function N(j){D.once&&w.removeEventListener(S,N),T(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return Ht.exports}var Et={},Oe={},Ss;function Yl(){if(Ss)return Oe;Ss=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Api=Oe.HttpClient=Oe.ContentType=void 0;var t;(function(s){s.Json="application/json",s.JsonApi="application/vnd.api+json",s.FormData="multipart/form-data",s.UrlEncoded="application/x-www-form-urlencoded",s.Text="text/plain"})(t||(Oe.ContentType=t={}));class e{baseUrl="https://api.vapi.ai";securityData=null;securityWorker;abortControllers=new Map;customFetch=(...n)=>fetch(...n);baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"};constructor(n={}){Object.assign(this,n)}setSecurityData=n=>{this.securityData=n};encodeQueryParam(n,i){return`${encodeURIComponent(n)}=${encodeURIComponent(typeof i=="number"?i:`${i}`)}`}addQueryParam(n,i){return this.encodeQueryParam(i,n[i])}addArrayQueryParam(n,i){return n[i].map(l=>this.encodeQueryParam(i,l)).join("&")}toQueryString(n){const i=n||{};return Object.keys(i).filter(l=>typeof i[l]<"u").map(l=>Array.isArray(i[l])?this.addArrayQueryParam(i,l):this.addQueryParam(i,l)).join("&")}addQueryParams(n){const i=this.toQueryString(n);return i?`?${i}`:""}contentFormatters={[t.Json]:n=>n!==null&&(typeof n=="object"||typeof n=="string")?JSON.stringify(n):n,[t.JsonApi]:n=>n!==null&&(typeof n=="object"||typeof n=="string")?JSON.stringify(n):n,[t.Text]:n=>n!==null&&typeof n!="string"?JSON.stringify(n):n,[t.FormData]:n=>n instanceof FormData?n:Object.keys(n||{}).reduce((i,a)=>{const l=n[a];return i.append(a,l instanceof Blob?l:typeof l=="object"&&l!==null?JSON.stringify(l):`${l}`),i},new FormData),[t.UrlEncoded]:n=>this.toQueryString(n)};mergeRequestParams(n,i){return{...this.baseApiParams,...n,...i||{},headers:{...this.baseApiParams.headers||{},...n.headers||{},...i&&i.headers||{}}}}createAbortSignal=n=>{if(this.abortControllers.has(n)){const a=this.abortControllers.get(n);return a?a.signal:void 0}const i=new AbortController;return this.abortControllers.set(n,i),i.signal};abortRequest=n=>{const i=this.abortControllers.get(n);i&&(i.abort(),this.abortControllers.delete(n))};request=async({body:n,secure:i,path:a,type:l,query:d,format:h,baseUrl:g,cancelToken:_,...C})=>{const v=(typeof i=="boolean"?i:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},y=this.mergeRequestParams(C,v),f=d&&this.toQueryString(d),b=this.contentFormatters[l||t.Json],E=h||y.format;return this.customFetch(`${g||this.baseUrl||""}${a}${f?`?${f}`:""}`,{...y,headers:{...y.headers||{},...l&&l!==t.FormData?{"Content-Type":l}:{}},signal:(_?this.createAbortSignal(_):y.signal)||null,body:typeof n>"u"||n===null?null:b(n)}).then(async M=>{const I=M;I.data=null,I.error=null;const w=E?M.clone():M,S=E?await w[E]().then(T=>(I.ok?I.data=T:I.error=T,I)).catch(T=>(I.error=T,I)):I;if(_&&this.abortControllers.delete(_),!M.ok)throw S;return S})}}Oe.HttpClient=e;class r extends e{assistant={assistantControllerCreate:(n,i={})=>this.request({path:"/assistant",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),assistantControllerFindAll:(n,i={})=>this.request({path:"/assistant",method:"GET",query:n,secure:!0,format:"json",...i}),assistantControllerFindOne:(n,i={})=>this.request({path:`/assistant/${n}`,method:"GET",secure:!0,format:"json",...i}),assistantControllerUpdate:(n,i,a={})=>this.request({path:`/assistant/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),assistantControllerReplace:(n,i,a={})=>this.request({path:`/assistant/${n}`,method:"PUT",body:i,secure:!0,type:t.Json,format:"json",...a}),assistantControllerRemove:(n,i={})=>this.request({path:`/assistant/${n}`,method:"DELETE",secure:!0,format:"json",...i}),assistantControllerFindVersions:(n,i,a={})=>this.request({path:`/assistant/${n}/version`,method:"GET",query:i,secure:!0,format:"json",...a})};v2={assistantControllerFindAllPaginated:(n,i={})=>this.request({path:"/v2/assistant",method:"GET",query:n,secure:!0,format:"json",...i}),callControllerCallsExport:(n,i={})=>this.request({path:"/v2/call/export",method:"GET",query:n,secure:!0,...i}),callControllerFindAllPaginated:(n,i={})=>this.request({path:"/v2/call",method:"GET",query:n,secure:!0,format:"json",...i}),callControllerFindAllMetadataPaginated:(n,i={})=>this.request({path:"/v2/call/metadata",method:"GET",query:n,secure:!0,format:"json",...i}),phoneNumberControllerFindAllPaginated:(n,i={})=>this.request({path:"/v2/phone-number",method:"GET",query:n,secure:!0,format:"json",...i})};squad={squadControllerCreate:(n,i={})=>this.request({path:"/squad",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),squadControllerFindAll:(n,i={})=>this.request({path:"/squad",method:"GET",query:n,secure:!0,format:"json",...i}),squadControllerFindOne:(n,i={})=>this.request({path:`/squad/${n}`,method:"GET",secure:!0,format:"json",...i}),squadControllerUpdate:(n,i,a={})=>this.request({path:`/squad/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),squadControllerRemove:(n,i={})=>this.request({path:`/squad/${n}`,method:"DELETE",secure:!0,format:"json",...i})};workflow={workflowControllerFindAll:(n={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...n}),workflowControllerCreate:(n,i={})=>this.request({path:"/workflow",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),workflowControllerFindOne:(n,i={})=>this.request({path:`/workflow/${n}`,method:"GET",secure:!0,format:"json",...i}),workflowControllerDelete:(n,i={})=>this.request({path:`/workflow/${n}`,method:"DELETE",secure:!0,format:"json",...i}),workflowControllerUpdate:(n,i,a={})=>this.request({path:`/workflow/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a})};call={callControllerCreate:(n,i={})=>this.request({path:"/call",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),callControllerFindAll:(n,i={})=>this.request({path:"/call",method:"GET",query:n,secure:!0,format:"json",...i}),callControllerFindOne:(n,i={})=>this.request({path:`/call/${n}`,method:"GET",secure:!0,format:"json",...i}),callControllerUpdate:(n,i,a={})=>this.request({path:`/call/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),callControllerDeleteCallData:(n,i,a={})=>this.request({path:`/call/${n}`,method:"DELETE",body:i,secure:!0,type:t.Json,format:"json",...a}),callControllerCreatePhoneCall:(n,i={})=>this.request({path:"/call/phone",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),callControllerCreateWebCall:(n,i={})=>this.request({path:"/call/web",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})};chat={chatControllerListChats:(n,i={})=>this.request({path:"/chat",method:"GET",query:n,secure:!0,format:"json",...i}),chatControllerCreateChat:(n,i={})=>this.request({path:"/chat",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),chatControllerGetChat:(n,i={})=>this.request({path:`/chat/${n}`,method:"GET",secure:!0,format:"json",...i}),chatControllerDeleteChat:(n,i={})=>this.request({path:`/chat/${n}`,method:"DELETE",secure:!0,format:"json",...i}),chatControllerCreateOpenAiChat:(n,i={})=>this.request({path:"/chat/responses",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),chatControllerCreateWebChat:(n,i={})=>this.request({path:"/chat/web",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),chatControllerCreateOpenAiWebChat:(n,i={})=>this.request({path:"/chat/web/responses",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})};campaign={campaignControllerCreate:(n,i={})=>this.request({path:"/campaign",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),campaignControllerFindAll:(n,i={})=>this.request({path:"/campaign",method:"GET",query:n,secure:!0,format:"json",...i}),campaignControllerFindOne:(n,i={})=>this.request({path:`/campaign/${n}`,method:"GET",secure:!0,format:"json",...i}),campaignControllerUpdate:(n,i,a={})=>this.request({path:`/campaign/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),campaignControllerRemove:(n,i={})=>this.request({path:`/campaign/${n}`,method:"DELETE",secure:!0,format:"json",...i})};session={sessionControllerCreate:(n,i={})=>this.request({path:"/session",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),sessionControllerFindAllPaginated:(n,i={})=>this.request({path:"/session",method:"GET",query:n,secure:!0,format:"json",...i}),sessionControllerFindOne:(n,i={})=>this.request({path:`/session/${n}`,method:"GET",secure:!0,format:"json",...i}),sessionControllerUpdate:(n,i,a={})=>this.request({path:`/session/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),sessionControllerRemove:(n,i={})=>this.request({path:`/session/${n}`,method:"DELETE",secure:!0,format:"json",...i})};phoneNumber={phoneNumberControllerImportTwilio:(n,i={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerImportVonage:(n,i={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerCreate:(n,i={})=>this.request({path:"/phone-number",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerFindAll:(n,i={})=>this.request({path:"/phone-number",method:"GET",query:n,secure:!0,format:"json",...i}),phoneNumberControllerFindOne:(n,i={})=>this.request({path:`/phone-number/${n}`,method:"GET",secure:!0,format:"json",...i}),phoneNumberControllerUpdate:(n,i,a={})=>this.request({path:`/phone-number/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),phoneNumberControllerRemove:(n,i={})=>this.request({path:`/phone-number/${n}`,method:"DELETE",secure:!0,format:"json",...i})};tool={toolControllerCreate:(n,i={})=>this.request({path:"/tool",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),toolControllerFindAll:(n,i={})=>this.request({path:"/tool",method:"GET",query:n,secure:!0,format:"json",...i}),toolControllerFindOne:(n,i={})=>this.request({path:`/tool/${n}`,method:"GET",secure:!0,format:"json",...i}),toolControllerUpdate:(n,i,a={})=>this.request({path:`/tool/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),toolControllerRemove:(n,i={})=>this.request({path:`/tool/${n}`,method:"DELETE",secure:!0,format:"json",...i})};file={fileControllerCreateDeprecated:(n,i={})=>this.request({path:"/file/upload",method:"POST",body:n,secure:!0,type:t.FormData,format:"json",...i}),fileControllerCreate:(n,i={})=>this.request({path:"/file",method:"POST",body:n,secure:!0,type:t.FormData,format:"json",...i}),fileControllerFindAll:(n={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...n}),fileControllerFindOne:(n,i={})=>this.request({path:`/file/${n}`,method:"GET",secure:!0,format:"json",...i}),fileControllerUpdate:(n,i,a={})=>this.request({path:`/file/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),fileControllerRemove:(n,i={})=>this.request({path:`/file/${n}`,method:"DELETE",secure:!0,format:"json",...i})};knowledgeBase={knowledgeBaseControllerCreate:(n,i={})=>this.request({path:"/knowledge-base",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),knowledgeBaseControllerFindAll:(n,i={})=>this.request({path:"/knowledge-base",method:"GET",query:n,secure:!0,format:"json",...i}),knowledgeBaseControllerFindOne:(n,i={})=>this.request({path:`/knowledge-base/${n}`,method:"GET",secure:!0,format:"json",...i}),knowledgeBaseControllerUpdate:(n,i,a={})=>this.request({path:`/knowledge-base/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),knowledgeBaseControllerRemove:(n,i={})=>this.request({path:`/knowledge-base/${n}`,method:"DELETE",secure:!0,format:"json",...i})};structuredOutput={structuredOutputControllerFindAll:(n,i={})=>this.request({path:"/structured-output",method:"GET",query:n,secure:!0,format:"json",...i}),structuredOutputControllerCreate:(n,i={})=>this.request({path:"/structured-output",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),structuredOutputControllerFindOne:(n,i={})=>this.request({path:`/structured-output/${n}`,method:"GET",secure:!0,format:"json",...i}),structuredOutputControllerUpdate:(n,i,a,l={})=>this.request({path:`/structured-output/${n}`,method:"PATCH",query:i,body:a,secure:!0,type:t.Json,format:"json",...l}),structuredOutputControllerRemove:(n,i={})=>this.request({path:`/structured-output/${n}`,method:"DELETE",secure:!0,format:"json",...i}),structuredOutputControllerRun:(n,i={})=>this.request({path:"/structured-output/run",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})};testSuite={testSuiteControllerFindAllPaginated:(n,i={})=>this.request({path:"/test-suite",method:"GET",query:n,secure:!0,format:"json",...i}),testSuiteControllerCreate:(n,i={})=>this.request({path:"/test-suite",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),testSuiteControllerFindOne:(n,i={})=>this.request({path:`/test-suite/${n}`,method:"GET",secure:!0,format:"json",...i}),testSuiteControllerUpdate:(n,i,a={})=>this.request({path:`/test-suite/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),testSuiteControllerRemove:(n,i={})=>this.request({path:`/test-suite/${n}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteTestControllerFindAllPaginated:(n,i,a={})=>this.request({path:`/test-suite/${n}/test`,method:"GET",query:i,secure:!0,format:"json",...a}),testSuiteTestControllerCreate:(n,i,a={})=>this.request({path:`/test-suite/${n}/test`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),testSuiteTestControllerFindOne:(n,i,a={})=>this.request({path:`/test-suite/${n}/test/${i}`,method:"GET",secure:!0,format:"json",...a}),testSuiteTestControllerUpdate:(n,i,a,l={})=>this.request({path:`/test-suite/${n}/test/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...l}),testSuiteTestControllerRemove:(n,i,a={})=>this.request({path:`/test-suite/${n}/test/${i}`,method:"DELETE",secure:!0,format:"json",...a}),testSuiteRunControllerFindAllPaginated:(n,i,a={})=>this.request({path:`/test-suite/${n}/run`,method:"GET",query:i,secure:!0,format:"json",...a}),testSuiteRunControllerCreate:(n,i,a={})=>this.request({path:`/test-suite/${n}/run`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),testSuiteRunControllerFindOne:(n,i,a={})=>this.request({path:`/test-suite/${n}/run/${i}`,method:"GET",secure:!0,format:"json",...a}),testSuiteRunControllerUpdate:(n,i,a,l={})=>this.request({path:`/test-suite/${n}/run/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...l}),testSuiteRunControllerRemove:(n,i,a={})=>this.request({path:`/test-suite/${n}/run/${i}`,method:"DELETE",secure:!0,format:"json",...a})};reporting={insightControllerCreate:(n,i={})=>this.request({path:"/reporting/insight",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),insightControllerFindAll:(n,i={})=>this.request({path:"/reporting/insight",method:"GET",query:n,secure:!0,format:"json",...i}),insightControllerUpdate:(n,i,a={})=>this.request({path:`/reporting/insight/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),insightControllerFindOne:(n,i={})=>this.request({path:`/reporting/insight/${n}`,method:"GET",secure:!0,format:"json",...i}),insightControllerRemove:(n,i={})=>this.request({path:`/reporting/insight/${n}`,method:"DELETE",secure:!0,format:"json",...i}),insightControllerRun:(n,i,a={})=>this.request({path:`/reporting/insight/${n}/run`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),insightControllerPreview:(n,i={})=>this.request({path:"/reporting/insight/preview",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})};eval={evalControllerCreate:(n,i={})=>this.request({path:"/eval",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),evalControllerGetPaginated:(n,i={})=>this.request({path:"/eval",method:"GET",query:n,secure:!0,format:"json",...i}),evalControllerUpdate:(n,i,a={})=>this.request({path:`/eval/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),evalControllerRemove:(n,i={})=>this.request({path:`/eval/${n}`,method:"DELETE",secure:!0,format:"json",...i}),evalControllerGet:(n,i={})=>this.request({path:`/eval/${n}`,method:"GET",secure:!0,format:"json",...i}),evalControllerRemoveRun:(n,i={})=>this.request({path:`/eval/run/${n}`,method:"DELETE",secure:!0,format:"json",...i}),evalControllerGetRun:(n,i={})=>this.request({path:`/eval/run/${n}`,method:"GET",secure:!0,format:"json",...i}),evalControllerRun:(n,i={})=>this.request({path:"/eval/run",method:"POST",body:n,secure:!0,type:t.Json,...i}),evalControllerGetRunsPaginated:(n,i={})=>this.request({path:"/eval/run",method:"GET",query:n,secure:!0,format:"json",...i})};observability={scorecardControllerGet:(n,i={})=>this.request({path:`/observability/scorecard/${n}`,method:"GET",secure:!0,format:"json",...i}),scorecardControllerUpdate:(n,i,a={})=>this.request({path:`/observability/scorecard/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),scorecardControllerRemove:(n,i={})=>this.request({path:`/observability/scorecard/${n}`,method:"DELETE",secure:!0,format:"json",...i}),scorecardControllerGetPaginated:(n,i={})=>this.request({path:"/observability/scorecard",method:"GET",query:n,secure:!0,format:"json",...i}),scorecardControllerCreate:(n,i={})=>this.request({path:"/observability/scorecard",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})};org={orgControllerCreate:(n,i={})=>this.request({path:"/org",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),orgControllerFindAll:(n={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...n}),orgControllerFeatureFlagEnabled:(n,i={})=>this.request({path:"/org/feature-flag",method:"GET",query:n,secure:!0,format:"json",...i}),orgControllerFindOne:(n,i={})=>this.request({path:`/org/${n}`,method:"GET",secure:!0,format:"json",...i}),orgControllerUpdate:(n,i,a={})=>this.request({path:`/org/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),orgControllerDeleteOrg:(n,i={})=>this.request({path:`/org/${n}`,method:"DELETE",secure:!0,...i}),orgControllerFindAllUsers:(n,i={})=>this.request({path:`/org/${n}/user`,method:"GET",secure:!0,format:"json",...i}),orgControllerOrgLeave:(n,i={})=>this.request({path:`/org/${n}/leave`,method:"DELETE",secure:!0,...i}),orgControllerOrgRemoveUser:(n,i,a={})=>this.request({path:`/org/${n}/member/${i}/leave`,method:"DELETE",secure:!0,...a}),orgControllerUsersInvite:(n,i,a={})=>this.request({path:`/org/${n}/invite`,method:"POST",body:i,secure:!0,type:t.Json,...a}),orgControllerUserUpdate:(n,i,a={})=>this.request({path:`/org/${n}/role`,method:"PATCH",body:i,secure:!0,type:t.Json,...a}),orgControllerOrgToken:(n,i={})=>this.request({path:`/org/${n}/auth`,method:"GET",secure:!0,format:"json",...i})};token={tokenControllerCreate:(n,i={})=>this.request({path:"/token",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),tokenControllerFindAll:(n,i={})=>this.request({path:"/token",method:"GET",query:n,secure:!0,format:"json",...i}),tokenControllerFindOne:(n,i={})=>this.request({path:`/token/${n}`,method:"GET",secure:!0,format:"json",...i}),tokenControllerUpdate:(n,i,a={})=>this.request({path:`/token/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),tokenControllerRemove:(n,i={})=>this.request({path:`/token/${n}`,method:"DELETE",secure:!0,format:"json",...i})};credential={credentialControllerCreate:(n,i={})=>this.request({path:"/credential",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),credentialControllerFindAll:(n,i={})=>this.request({path:"/credential",method:"GET",query:n,secure:!0,format:"json",...i}),credentialControllerFindOne:(n,i={})=>this.request({path:`/credential/${n}`,method:"GET",secure:!0,format:"json",...i}),credentialControllerUpdate:(n,i,a={})=>this.request({path:`/credential/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),credentialControllerRemove:(n,i={})=>this.request({path:`/credential/${n}`,method:"DELETE",secure:!0,format:"json",...i})};template={templateControllerCreate:(n,i={})=>this.request({path:"/template",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),templateControllerFindAll:(n,i={})=>this.request({path:"/template",method:"GET",query:n,secure:!0,format:"json",...i}),templateControllerFindAllPinned:(n={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...n}),templateControllerFindOne:(n,i={})=>this.request({path:`/template/${n}`,method:"GET",secure:!0,format:"json",...i}),templateControllerUpdate:(n,i,a={})=>this.request({path:`/template/${n}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...a}),templateControllerRemove:(n,i={})=>this.request({path:`/template/${n}`,method:"DELETE",secure:!0,format:"json",...i})};voiceLibrary={voiceLibraryControllerVoiceGetByProvider:(n,i,a={})=>this.request({path:`/voice-library/${n}`,method:"GET",query:i,secure:!0,format:"json",...a}),voiceLibraryControllerVoiceGetAccentsByProvider:(n,i={})=>this.request({path:`/voice-library/${n}/accents`,method:"GET",secure:!0,format:"json",...i}),voiceLibraryControllerVoiceLibrarySyncByProvider:(n,i={})=>this.request({path:`/voice-library/sync/${n}`,method:"POST",secure:!0,format:"json",...i}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(n,i={})=>this.request({path:"/voice-library/sync",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(n,i={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:n,secure:!0,type:t.Json,...i})};provider={providerResourceControllerCreateProviderResource:(n,i,a={})=>this.request({path:`/provider/${n}/${i}`,method:"POST",secure:!0,format:"json",...a}),providerResourceControllerGetProviderResourcesPaginated:(n,i,a,l={})=>this.request({path:`/provider/${n}/${i}`,method:"GET",query:a,secure:!0,format:"json",...l}),providerResourceControllerGetProviderResource:(n,i,a,l={})=>this.request({path:`/provider/${n}/${i}/${a}`,method:"GET",secure:!0,format:"json",...l}),providerResourceControllerDeleteProviderResource:(n,i,a,l={})=>this.request({path:`/provider/${n}/${i}/${a}`,method:"DELETE",secure:!0,format:"json",...l}),providerResourceControllerUpdateProviderResource:(n,i,a,l={})=>this.request({path:`/provider/${n}/${i}/${a}`,method:"PATCH",secure:!0,format:"json",...l}),providerControllerGetWorkflows:(n,i,a={})=>this.request({path:`/${n}/workflows`,method:"GET",query:i,secure:!0,format:"json",...a}),providerControllerGetWorkflowTriggerHook:(n,i,a={})=>this.request({path:`/${n}/workflows/${i}/hooks`,method:"GET",secure:!0,format:"json",...a}),providerControllerGetLocations:(n,i={})=>this.request({path:`/${n}/locations`,method:"GET",secure:!0,format:"json",...i}),voiceProviderControllerSearchVoices:(n,i,a={})=>this.request({path:`/${n}/voices/search`,method:"GET",query:i,secure:!0,format:"json",...a}),voiceProviderControllerSearchVoice:(n,i,a={})=>this.request({path:`/${n}/voice/search`,method:"GET",query:i,secure:!0,format:"json",...a}),voiceProviderControllerAddVoices:(n,i,a={})=>this.request({path:`/${n}/voices/add`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),voiceProviderControllerAddVoice:(n,i,a={})=>this.request({path:`/${n}/voice/add`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a})};v11Labs={voiceProviderControllerCloneVoices:(n,i={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:n,secure:!0,type:t.FormData,...i})};analytics={analyticsControllerQuery:(n,i={})=>this.request({path:"/analytics",method:"POST",body:n,secure:!0,type:t.Json,format:"json",...i})}}return Oe.Api=r,Oe}var ws;function Wl(){if(ws)return Et;ws=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.client=void 0;const t=Yl(),e=new t.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async r=>{if(r)return{headers:{Authorization:`Bearer ${r}`}}}});return Et.client=e,Et}var We={},Es;function zl(){if(Es)return We;Es=1,Object.defineProperty(We,"__esModule",{value:!0}),We.createSafeDailyConfig=t,We.safeSetLocalAudio=e,We.safeSetInputDevicesAsync=r,We.createSafeDailyFactoryOptions=s;function t(n){if(!n)return{};const{alwaysIncludeMicInPermissionPrompt:i,...a}=n;return i===!1?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),a):n}function e(n,i){if(!n)throw new Error("Call object is not available.");n.setLocalAudio(i)}async function r(n,i){if(!n)throw new Error("Call object is not available.");if("audioSource"in i&&i.audioSource===!1){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");const{audioSource:a,...l}=i;await n.setInputDevicesAsync(l);return}await n.setInputDevicesAsync(i)}function s(n){return n?n.audioSource===!1?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...n,audioSource:!0}):n:{}}return We}var ks;function Hl(){if(ks)return st;ks=1;var t=st&&st.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(st,"__esModule",{value:!0});const e=t(Bl),r=t(Gl()),s=Wl(),n=zl();function i(C){if(C==null)return{message:"Unknown error (null or undefined)"};if(C instanceof Error){const v={message:C.message,name:C.name,stack:C.stack},y=C;return y.code!==void 0&&(v.code=y.code),y.cause!==void 0&&(v.cause=String(y.cause)),y.reason!==void 0&&(v.reason=y.reason),y.details!==void 0&&(v.details=y.details),y.errorMsg!==void 0&&(v.errorMsg=y.errorMsg),y.error!==void 0&&typeof y.error=="string"&&(v.errorDetail=y.error),v}if(typeof C=="string")return{message:C};if(typeof C=="object"){const v=C;return{message:v.message||v.error||JSON.stringify(C),...v}}return{message:String(C)}}async function a(C,v){C.muted=!1,C.autoplay=!0,v!=null&&(C.srcObject=new MediaStream([v]),await C.play())}async function l(C,v){const y=document.createElement("audio");return y.dataset.participantId=v,document.body.appendChild(y),await a(y,C),y}function d(C){document.querySelector(`audio[data-participant-id="${C}"]`)?.remove()}function h(C,v,y,f){C.participant.local||v.updateParticipant(C.participant.session_id,{setSubscribedTracks:{audio:!0,video:y||f}})}class g extends r.default{on(v,y){return super.on(v,y),this}once(v,y){return super.once(v,y),this}emit(v,...y){return super.emit(v,...y)}removeListener(v,y){return super.removeListener(v,y),this}removeAllListeners(v){return super.removeAllListeners(v),this}}class _ extends g{started=!1;call=null;speakingTimeout=null;dailyCallConfig={};dailyCallObject={};hasEmittedCallEndedStatus=!1;constructor(v,y,f,b){super(),s.client.baseUrl=y??"https://api.vapi.ai",s.client.setSecurityData(v),this.dailyCallConfig=(0,n.createSafeDailyConfig)(f),this.dailyCallObject=(0,n.createSafeDailyFactoryOptions)(b)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const v=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(v.toLowerCase())}async sleep(v){return new Promise(y=>setTimeout(y,v))}async start(v,y,f,b,E,M){const I=Date.now();if(!v&&!f&&!b){const w=new Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",error:i(w),timestamp:new Date().toISOString()}),w}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!v,hasSquad:!!f,hasWorkflow:!!b}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});const w=Date.now(),S=(await s.client.call.callControllerCreateWebCall({assistant:typeof v=="string"?void 0:v,assistantId:typeof v=="string"?v:void 0,assistantOverrides:y,squad:typeof f=="string"?void 0:f,squadId:typeof f=="string"?f:void 0,workflow:typeof b=="string"?void 0:b,workflowId:typeof b=="string"?b:void 0,workflowOverrides:E,roomDeleteOnUserLeaveEnabled:M?.roomDeleteOnUserLeaveEnabled})).data,T=Date.now()-w;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:T,timestamp:new Date().toISOString(),metadata:{callId:S?.id||"unknown",videoRecordingEnabled:S?.artifactPlan?.videoRecordingEnabled??!1,voiceProvider:S?.assistant?.voice?.provider||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());const D=S?.artifactPlan?.videoRecordingEnabled??!1,N=S?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??D,isVideoRecordingEnabled:D,isVideoEnabled:N}});const j=Date.now();try{this.call=e.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??D,dailyConfig:this.dailyCallConfig});const R=Date.now()-j;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:R,timestamp:new Date().toISOString()})}catch(R){const ne=Date.now()-j,X=i(R);throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:ne,timestamp:new Date().toISOString(),metadata:{error:X.message}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:X,timestamp:new Date().toISOString()}),R}this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),D&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",R=>{this.emit("error",{type:"daily-error",error:i(R),timestamp:new Date().toISOString()}),D&&this.call?.stopRecording()}),this.call.on("camera-error",R=>{this.emit("camera-error",{type:"camera-error",error:i(R),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",R=>{this.emit("network-quality-change",R)}),this.call.on("network-connection",R=>{this.emit("network-connection",R)}),this.call.on("track-started",async R=>{!R||!R.participant||R.participant?.local||R.participant?.user_name==="Vapi Speaker"&&(R.track.kind==="video"&&this.emit("video",R.track),R.track.kind==="audio"&&await l(R.track,R.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",R=>{!R||!this.call||h(R,this.call,D,N)}),this.call.on("participant-updated",R=>{R&&this.emit("daily-participant-updated",R.participant)}),this.call.on("participant-left",R=>{R&&d(R.participant.session_id)});const F=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:F}}),F){const R=Date.now();await this.sleep(1e3);const ne=Date.now()-R;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:ne,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const W=Date.now();try{await this.call.join({url:S.webCallUrl,subscribeToTracksAutomatically:!1});const R=Date.now()-W;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:R,timestamp:new Date().toISOString()})}catch(R){const ne=Date.now()-W,X=i(R);throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:ne,timestamp:new Date().toISOString(),metadata:{error:X.message}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:X,duration:ne,timestamp:new Date().toISOString()}),R}if(D){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const R=new Date().getTime(),ne=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const X=Date.now()-ne;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:X,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const Ue=(new Date().getTime()-R)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:Ue}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:Ue})})}catch(X){const Ue=Date.now()-ne,gt=i(X);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:Ue,timestamp:new Date().toISOString(),metadata:{error:gt.message}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:gt,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const re=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const R=Date.now()-re;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:R,timestamp:new Date().toISOString()})}catch(R){const ne=Date.now()-re,X=i(R);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:ne,timestamp:new Date().toISOString(),metadata:{error:X.message}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:X,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",R=>{R&&this.handleRemoteParticipantsAudioLevel(R)}),this.call.on("app-message",R=>this.onAppMessage(R)),this.call.on("nonfatal-error",R=>{R?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,n.safeSetLocalAudio)(this.call,!0)})}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const we=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const R=Date.now()-we;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:R,timestamp:new Date().toISOString()})}catch(R){const ne=Date.now()-we,X=i(R);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:ne,timestamp:new Date().toISOString(),metadata:{error:X.message}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:X,timestamp:new Date().toISOString()})}const it=Date.now()-I;return this.emit("call-start-success",{totalDuration:it,callId:S?.id||"unknown",timestamp:new Date().toISOString()}),S}catch(w){const S=Date.now()-I,T=i(w);return this.emit("call-start-failed",{stage:"unknown",totalDuration:S,error:T.message,errorStack:T.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!v,hasSquad:!!f,hasWorkflow:!!b,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:T,totalDuration:S,timestamp:new Date().toISOString(),context:{hasAssistant:!!v,hasSquad:!!f,hasWorkflow:!!b,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(v){if(v)try{if(v.data==="listening")return this.emit("call-start");try{const y=JSON.parse(v.data);this.emit("message",y),y&&"type"in y&&"status"in y&&y.type==="status-update"&&y.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(y){console.log("Error parsing message data: ",y)}}catch(y){console.error(y)}}handleRemoteParticipantsAudioLevel(v){const y=Object.values(v.participantsAudioLevel).reduce((b,E)=>b+E,0);this.emit("volume-level",Math.min(1,y/.15)),y>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(v){this.call?.sendAppMessage(JSON.stringify(v))}setMuted(v){(0,n.safeSetLocalAudio)(this.call,!v)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(v,y,f,b){this.send({type:"say",message:v,endCallAfterSpoken:y,interruptionsEnabled:f??!1,interruptAssistantEnabled:b??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(v){return(0,n.safeSetInputDevicesAsync)(this.call,v)}async increaseMicLevel(v){if(!this.call)throw new Error("Call object is not available.");try{const y=await navigator.mediaDevices.getUserMedia({audio:!0}),f=new AudioContext,b=f.createMediaStreamSource(y),E=f.createGain();E.gain.value=v,b.connect(E);const M=f.createMediaStreamDestination();E.connect(M);const[I]=M.stream.getAudioTracks();await(0,n.safeSetInputDevicesAsync)(this.call,{audioSource:I})}catch(y){console.error("Error adjusting microphone level:",y)}}setOutputDeviceAsync(v){this.call?.setOutputDeviceAsync(v)}getDailyCallObject(){return this.call}startScreenSharing(v,y){this.call?.startScreenShare({displayMediaOptions:v,screenVideoSendSettings:y})}stopScreenSharing(){this.call?.stopScreenShare()}async reconnect(v){const y=Date.now();if(this.started)throw new Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!v.webCallUrl)throw new Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:v.id||"unknown",hasVideoRecording:!!v?.artifactPlan?.videoRecordingEnabled,voiceProvider:v?.assistant?.voice?.provider||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));const f=v?.artifactPlan?.videoRecordingEnabled??!1,b=v?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??f,isVideoRecordingEnabled:f,isVideoEnabled:b}});const E=Date.now();this.call=e.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??f,dailyConfig:this.dailyCallConfig});const M=Date.now()-E;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:M,timestamp:new Date().toISOString()}),this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),f&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",j=>{this.emit("error",{type:"daily-error",error:i(j),timestamp:new Date().toISOString()}),f&&this.call?.stopRecording()}),this.call.on("camera-error",j=>{this.emit("camera-error",{type:"camera-error",error:i(j),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",j=>{this.emit("network-quality-change",j)}),this.call.on("network-connection",j=>{this.emit("network-connection",j)}),this.call.on("track-started",async j=>{!j||!j.participant||j.participant?.local||j.participant?.user_name==="Vapi Speaker"&&(j.track.kind==="video"&&this.emit("video",j.track),j.track.kind==="audio"&&await l(j.track,j.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",j=>{!j||!this.call||h(j,this.call,f,b)}),this.call.on("participant-updated",j=>{j&&this.emit("daily-participant-updated",j.participant)}),this.call.on("participant-left",j=>{j&&d(j.participant.session_id)}),this.call.on("remote-participants-audio-level",j=>{j&&this.handleRemoteParticipantsAudioLevel(j)}),this.call.on("app-message",j=>this.onAppMessage(j)),this.call.on("nonfatal-error",j=>{j?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,n.safeSetLocalAudio)(this.call,!0)})});const I=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:I}}),I){const j=Date.now();await this.sleep(1e3);const F=Date.now()-j;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:F,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const w=Date.now();await this.call.join({url:v.webCallUrl,subscribeToTracksAutomatically:!1});const S=Date.now()-w;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:S,timestamp:new Date().toISOString()}),f){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const j=Date.now(),F=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const W=Date.now()-j;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:W,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const re=(new Date().getTime()-F)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:re}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:re})})}catch(W){const re=Date.now()-j,we=i(W);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:re,timestamp:new Date().toISOString(),metadata:{error:we.message}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const T=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const j=Date.now()-T;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:j,timestamp:new Date().toISOString()})}catch(j){const F=Date.now()-T,W=i(j);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:W.message}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const D=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const j=Date.now()-D;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:j,timestamp:new Date().toISOString()})}catch(j){const F=Date.now()-D,W=i(j);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:W.message}})}const N=Date.now()-y;this.emit("call-start-success",{totalDuration:N,callId:v?.id||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(f){const b=Date.now()-y,E=i(f);throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:b,error:E.message,errorStack:E.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:v?.id||"unknown",hasVideoRecording:!!v?.artifactPlan?.videoRecordingEnabled,voiceProvider:v?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:E,totalDuration:b,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:v?.id||"unknown",hasVideoRecording:!!v?.artifactPlan?.videoRecordingEnabled,voiceProvider:v?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),f}}static async runNetworkTestsStandalone(){console.log("Starting standalone network connectivity tests...");const v={};let y=null;try{console.log("Creating temporary call object for testing..."),y=e.default.createCallObject({audioSource:!0,videoSource:!0}),console.log(`
1. Testing network connectivity (TURN server)...`);let f=null;try{f=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];const E=await y.testNetworkConnectivity(f);v.networkConnectivity=E,console.log("Network connectivity test result:",E)}catch(b){v.networkConnectivity={result:"error",error:b?.toString()},console.error("Network connectivity test error:",b)}finally{f&&f.stop()}console.log(`
2. Testing websocket connectivity...`);try{const b=await y.testWebsocketConnectivity();v.websocketConnectivity=b,console.log("Websocket connectivity test result:",b)}catch(b){v.websocketConnectivity={result:"error",error:b?.toString()},console.error("Websocket connectivity test error:",b)}console.log(`
3. Testing call quality...`);try{if(typeof y.testCallQuality=="function")try{console.log("Initializing call state with startCamera..."),await y.startCamera();const b=await y.testCallQuality();v.callQuality=b,console.log("Call quality test result:",b)}catch(b){console.error("Failed to start camera for call quality test:",b),v.callQuality={result:"error",error:b?.toString(),message:"Failed to initialize camera for call quality test. Check camera permissions."}}else v.callQuality={result:"not-available",message:"testCallQuality method not available"},console.log("Call quality test not available in current Daily.co version")}catch(b){v.callQuality={result:"error",error:b?.toString()},console.error("Call quality test error:",b)}}catch(f){console.error("Failed to create temporary call object:",f),v.error=f?.toString()}finally{if(y)try{console.log("Cleaning up temporary call object..."),await y.destroy()}catch(f){console.error("Error destroying temporary call object:",f)}}return console.log(`
=== Network Test Summary ===`),console.log("Results:",JSON.stringify(v,null,2)),v}}return st.default=_,st}var ma=Hl();const Ql=ba(ma),Xl=_a({__proto__:null,default:Ql},[ma]);export{Xl as v};
